"use strict";(self.webpackChunkvisualization_sketches=self.webpackChunkvisualization_sketches||[]).push([[188],{6460:function(e,t,n){n.r(t),n.d(t,{default:function(){return m}});var i=n(7294),a=n(2149),r=n(8352),c=n(2884),o=n(615),l=function(e){var t=e.pixelRatio,n=[],l=[],s=e.height,u=e.width,d=e.margin,f=e.marginLeft,h=e.marginTop,m=e.particles,g=(0,i.useRef)(),p=(0,i.useRef)(),v=(0,i.useRef)(),S=function(e,t){var n=(0,i.useRef)(t);return(0,i.useEffect)((function(){n.current=e})),n.current}(e.dateSelection,"year"),y=function(e,t){return r.BYU().domain(r.Wem(m,(function(e){return e[t]}))).range([f,u-d])},x=r.BYU().domain(r.Wem(m,(function(t){return t[e.valueSelection]}))).range([s-d,h]).nice(),w=(r.Ly_().value((function(e){return e.x})).thresholds(20),r.PKp().domain(r.Wem(m,(function(t){return t[e.dateSelection]}))).range([100,200,300,400,500,600,7])),k=(0,o.j)()&&r.Ys("#tooltipDiv").style("background-color","white").style("border","1px solid").style("border-radius","2px").style("box-shadow","0 3px 6px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.4)").style("opacity",0).style("padding","10px");var b=r.cJy().domain(r.Wem(m,(function(t){return t[e.dateSelection]}))).range([f,u-d]),E=r.LLu(b).ticks(5).tickFormat((function(e){return""+e}));e.particles.map((function(t){n.push({x:y(t[e.dateSelection],e.dateSelection)(t[e.dateSelection],e.dateSelection),y:x(t[e.valueSelection]),id:t.id}),l.push({x:y(t[S],S)(t[S],S),y:x(t[e.valueSelection]),id:t.id})}));var R=r.BYU().domain(r.Wem(n,(function(e){return e.y}))).range([0,8]).nice();return(0,i.useEffect)((function(){var i=g.current.getContext("2d");i.scale(t,t),i.setTransform(t,0,0,t,0,0),i.globalAlpha=.4;onscroll=function(e){d()};var d=function(){r.Ys(p.current).attr("r",0)};onmousemove=function(t){t.preventDefault();var n,i,c,l=(0,o.j)()?window.pageYOffset:0,s=r.cx$(t,undefined),f=s[0],h=s[1]-[l],g=f<u,v=(e.dateSelection,a.Z.from(m.map((function(t){return[y(t[e.dateSelection],e.dateSelection)(t[e.dateSelection],e.dateSelection),x(t[e.valueSelection])]})))).find(f,h),S=m[v],w=S[e.dateSelection],b=S[e.valueSelection];S[e.valueSelection];g?function(t,n,i,a,r){(0,o.j)()&&k.style("opacity",.7).style("display","block").style("top",r+"px").style("left",a+15+"px").style("z-index",5).html("<div>word_count: <b>"+n+"</b></div><div>"+e.dateSelection+": <b>"+t+"</b></div>  <div></div>")}(w,b,0,y(0,e.dateSelection)(w,e.dateSelection),x(b)):(o.j&&k.style("display","none"),o.j&&k.style("opacity","0")),g?(i=y((n=S)[e.dateSelection],e.dateSelection)(n[e.dateSelection],e.dateSelection),c=x(n[e.valueSelection],e.valueSelection),r.Ys(p.current).attr("r",8).attr("cx",i).attr("cy",c).attr("fill","rgba(255,255,255,.7)")):d(S)},function(){i.fillStyle="rgb(226, 99, 255)",i.strokeStyle="rgb(226, 99, 255)";function t(){i.restore(),i.clearRect(0,0,u,s),r.Ys(v.current).call(E).transition(),i.beginPath(),l.map((function(e,t){return i.beginPath(),i.arc(e.x,e.y,8,0,2*Math.PI),i.fill()}))}function a(){i.clearRect(0,0,u,s),i.save(),i.beginPath(),l.map((function(e){return i.beginPath(),i.arc(e.x,e.y,R(e.y),0,2*Math.PI),i.fill()}))}c.p8.fromTo(l,{x:function(e){return l[e].x},y:function(e){return l[e].y}},{x:function(e){return n[e].x},y:function(e){return n[e].y},duration:.5,ease:"strong.inOut",onUpdate:t,stagger:{each:5e-4,from:"random"}});"week"===e.dateSelection&&r.A4v(l).force("x",r.RUJ().x((function(e){return w(e.x)})).strength(2)).force("collide",r.q5i().strength(.1)).force("collision",r.Hh().radius((function(e){return R(e.y+.3*e.y)})).strength(1)).on("tick",a)}()}),[e.dateSelection,e.width,e.height,e.pixelRatio]),!1===(0,o.j)()?i.createElement(i.Fragment,null):i.createElement("div",{className:"canvasStickyChartContainer"},i.createElement("div",{id:"tooltipDiv",className:"tooltipDiv"}),i.createElement("svg",{className:"canvasStickyPointHighlight",width:u,height:s},i.createElement("circle",{r:0,className:"highlightCircle",ref:p})),i.createElement("canvas",{className:"canvasStickyChart",style:{width:e.width+"px",height:e.height+"px"},ref:g,particles:e.particles,stroke:e.stroke,width:e.width*e.pixelRatio,height:e.height*e.pixelRatio,useScrollData:e.useScrollData,dateSelection:e.dateSelection,valueSelection:e.valueSelection,margin:e.margin}),i.createElement("svg",{style:{top:e.height-1},className:"canvasStickyChartAxis"},i.createElement("g",{className:"darkModeAxis",ref:v})))},s=n(2826),u=n(2881),d=n.n(u),f=n(8830),h=n(6601),m=function(e){var t=e.data.allDataCsv.edges[0].node.items,n=((0,s.k)().speed.y,(0,i.useState)(0)),a=n[0],r=n[1],c=(0,i.useState)("down"),u=(c[0],c[1]),m=(0,i.useState)((0,o.j)()?window.devicePixelRatio:0),g=m[0],p=m[1],v=(0,i.useState)((0,o.j)()?window.innerWidth:0),S=v[0],y=v[1],x=(0,i.useState)((0,o.j)()?window.innerHeight:0),w=x[0],k=x[1];return i.useEffect((function(){(0,o.j)()&&(y(window.innerWidth),k(window.innerHeight),p(window.devicePixelRatio),window.onresize=function(e){y(window.innerWidth),k(window.innerHeight),p(window.devicePixelRatio)})}),[S,g]),!1===(0,o.j)()?i.createElement(i.Fragment,null):i.createElement("div",null,i.createElement("div",null,i.createElement(l,{className:"staticGraphicContainer",height:.95*w,width:.6*S,particles:(0,h.x)(t),useScrollData:s.k,dateSelection:(0,h.V)(a).date_selection,valueSelection:"entry_word_count",stepIndex:a,margin:10,marginLeft:.1*S,marginTop:.7*w,pixelRatio:g}),i.createElement("div",{className:"scrollingTextContainer darkModeScrollingTitle"},i.createElement(f.k,{offset:.5,onStepEnter:d()((function(e){r(e.data),u(e.direction)}),150),debug:!1},[0,1,2,3].map((function(e,t){return i.createElement(f.h,{data:t,key:t},i.createElement("div",{style:{opacity:a===t?1:.2},class:"textStep"},(0,h.V)(t).title))}))))))}}}]);
//# sourceMappingURL=component---src-pages-childhood-diary-scatter-scroll-js-834cb06d183f105603fa.js.map