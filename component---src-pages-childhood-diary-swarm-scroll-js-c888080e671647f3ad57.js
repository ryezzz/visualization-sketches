"use strict";(self.webpackChunkvisualization_sketches=self.webpackChunkvisualization_sketches||[]).push([[410],{263:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var r=n(7294),i=n(2149),a=n(8352),o=n(2884),l=n(615),c=n(7136),u=function(e){var t=e.pixelRatio,n=e.height,u=e.width,s=e.margin,d=e.marginLeft,f=(e.marginTop,e.particles),h=(0,r.useRef)(),m=(0,r.useRef)(),p=(0,r.useRef)(),v=function(e,t){var n=(0,r.useRef)(t);return(0,r.useEffect)((function(){n.current=e})),n.current}(e.dateSelection,"year"),g=a.BYU().domain(a.Wem(f,(function(t){return t[e.valueSelection]}))).range([1,n/80]),y=function(e,t){return a.cJy().domain(a.Wem(f,(function(e){return e[t]}))).range([d,u-0])},x=function(e){return g(e)},w=(0,c.s)(f,v,e.valueSelection,y(0,v),x,0),S=(0,c.s)(f,e.dateSelection,e.valueSelection,y(0,e.dateSelection),x,0),b=(0,l.j)()&&a.Ys("#tooltipDiv").style("background-color","white").style("border","1px solid").style("border-radius","2px").style("box-shadow","0 3px 6px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.4)").style("opacity",0).style("padding","10px");var k=a.cJy().domain(a.Wem(f,(function(t){return t[e.dateSelection]}))).range([d,u-s]),E=a.LLu(k).ticks(5).tickFormat((function(e){return""+e}));return(0,r.useEffect)((function(){var r=h.current.getContext("2d");r.scale(t,t),r.setTransform(t,0,0,t,0,0),r.globalAlpha=.4;onscroll=function(e){c()};var c=function(){a.Ys(m.current).attr("r",0)};onmousemove=function(t){t.preventDefault();var r=(0,l.j)()?window.pageYOffset:0,o=a.cx$(t,undefined),s=o[0],d=n-o[1]-[r],f=s<u,h=(e.dateSelection,i.Z.from(S.map((function(e){return[e.x,e.y]})))).find(s,d);console.log(h);var p=S[h];console.log(p);var v=p.x,g=n-p.y;p.r;f?function(t,n,r,i,a){(0,l.j)()&&b.style("opacity",.7).style("display","block").style("top",a+"px").style("left",i+15+"px").style("z-index",5).html("<div>word_count: <b>"+n+"</b></div><div>"+e.dateSelection+": <b>"+t+"</b></div>  <div></div>")}(v,g,0,v,g):(l.j&&b.style("display","none"),l.j&&b.style("opacity","0")),f?function(e){console.log("hoveractive",e);var t=e.x,r=e.y;(0,l.j)()&&window.pageYOffset,a.Ys(m.current).attr("r",e.r).attr("cx",t).attr("cy",n-r).attr("fill","rgba(255,255,255,.7)")}(p):c(p)},function(){r.fillStyle="rgb(226, 99, 255)",r.strokeStyle="rgb(226, 99, 255)";function e(){r.restore(),r.clearRect(0,0,u,n),a.Ys(p.current).call(E).transition(),r.beginPath(),w.map((function(e,t){return r.beginPath(),r.arc(e.x,n-e.y,e.r,0,2*Math.PI),r.fill()}))}o.p8.fromTo(w,{x:function(e){return w[e].x},y:function(e){return w[e].y}},{x:function(e){return S[e].x},y:function(e){return S[e].y},duration:.5,ease:"strong.inOut",onUpdate:e,stagger:{each:5e-4,from:"random"}})}()}),[e.dateSelection,e.width,e.height,e.pixelRatio]),!1===(0,l.j)()?r.createElement(r.Fragment,null):r.createElement("div",{className:"canvasStickyChartContainer"},r.createElement("div",{id:"tooltipDiv",className:"tooltipDiv"}),r.createElement("svg",{className:"canvasStickyPointHighlight",width:u,height:n},r.createElement("circle",{r:0,className:"highlightCircle",ref:m})),r.createElement("canvas",{className:"canvasStickyChart",style:{width:e.width+"px",height:e.height+"px"},ref:h,particles:e.particles,stroke:e.stroke,width:e.width*e.pixelRatio,height:e.height*e.pixelRatio,useScrollData:e.useScrollData,dateSelection:e.dateSelection,valueSelection:e.valueSelection,margin:e.margin}),r.createElement("svg",{style:{top:e.height-1},className:"canvasStickyChartAxis"},r.createElement("g",{className:"darkModeAxis",ref:p})))},s=n(2826),d=(n(2881),n(8830)),f=n(6601),h=function(e){var t=e.data.allDataCsv.edges[0].node.items,n=(0,r.useState)(0),i=n[0],a=n[1],o=(0,r.useState)((0,l.j)()?window.devicePixelRatio:0),c=o[0],h=o[1],m=(0,r.useState)((0,l.j)()?window.innerWidth:0),p=m[0],v=m[1],g=(0,r.useState)((0,l.j)()?window.innerHeight:0),y=g[0],x=g[1];return r.useEffect((function(){(0,l.j)()&&(v(window.innerWidth),x(window.innerHeight),h(window.devicePixelRatio),window.onresize=function(e){v(window.innerWidth),x(window.innerHeight),h(window.devicePixelRatio)})}),[p,c]),!1===(0,l.j)()?r.createElement(r.Fragment,null):r.createElement("div",null,r.createElement("div",null,r.createElement(u,{className:"staticGraphicContainer",height:.95*y,width:.6*p,particles:(0,f.x)(t),useScrollData:s.k,dateSelection:(0,f.V)(i).date_selection,valueSelection:"entry_word_count",stepIndex:i,margin:10,marginLeft:.1*p,marginTop:.7*y,pixelRatio:c}),r.createElement("div",{className:"scrollingTextContainer darkModeScrollingTitle"},r.createElement(d.k,{offset:.5,onStepEnter:function(e){a(e.data)},debug:!1},[0,1,2,3].map((function(e,t){return r.createElement(d.h,{data:t,key:t},r.createElement("div",{style:{opacity:i===t?1:.2},class:"textStep"},(0,f.V)(t).title))}))))))}},7136:function(e,t,n){function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{s:function(){return a}});var a=function(e,t,n,i,a,o){var l=e.map((function(e){return{x:i(e[t]),r:a(e[n]),data:e}})),c=null,u=null;function s(e,t,n){for(var r=c;r;){if(Math.pow(r.r+n+o,2)-.001>Math.pow(r.x-e,2)+Math.pow(r.y-t,2))return!0;r=r.next}return!1}for(var d,f=r(l);!(d=f()).done;){var h=d.value;if(s(h.x,h.y=h.r,h.r)){var m=c;h.y=1/0;do{var p=m.y+Math.sqrt(Math.pow(m.r+h.r+o,2)-Math.pow(m.x-h.x,2));p<h.y&&!s(h.x,p,h.r)&&(h.y=p),m=m.next}while(m)}h.next=null,null===c?c=u=h:u=u.next=h}return l}}}]);
//# sourceMappingURL=component---src-pages-childhood-diary-swarm-scroll-js-c888080e671647f3ad57.js.map