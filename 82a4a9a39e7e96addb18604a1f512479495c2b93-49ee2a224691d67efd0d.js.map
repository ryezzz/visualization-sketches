{"version":3,"file":"82a4a9a39e7e96addb18604a1f512479495c2b93-49ee2a224691d67efd0d.js","mappings":"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","sources":["webpack://visualization-sketches/./src/utils/visualizationUtils.js","webpack://visualization-sketches/./src/components/ScrollySwarm/ScrollSwarmSterile.js","webpack://visualization-sketches/./node_modules/roughjs/bin/geometry.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/scan-line-hachure.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/hachure-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/zigzag-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/hatch-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/dot-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/dashed-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/zigzag-line-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/math.js","webpack://visualization-sketches/./node_modules/path-data-parser/lib/parser.js","webpack://visualization-sketches/./node_modules/path-data-parser/lib/absolutize.js","webpack://visualization-sketches/./node_modules/path-data-parser/lib/normalize.js","webpack://visualization-sketches/./node_modules/roughjs/bin/renderer.js","webpack://visualization-sketches/./node_modules/points-on-curve/lib/curve-to-bezier.js","webpack://visualization-sketches/./node_modules/points-on-curve/lib/index.js","webpack://visualization-sketches/./node_modules/points-on-path/lib/index.js","webpack://visualization-sketches/./node_modules/roughjs/bin/generator.js","webpack://visualization-sketches/./node_modules/roughjs/bin/canvas.js","webpack://visualization-sketches/./src/hooks/customHooks.js","webpack://visualization-sketches/./src/components/ScrollySwarm/ScrollSwarmDrawing.js"],"sourcesContent":["export const dodge = (data, selectedDateI, selectedValueI, xScaleI, rScaleI, paddingI, preRenderFun=false) => {\n  const circles = data\n    .map((d) => ({ x: xScaleI(d[selectedDateI]), r: rScaleI(d[selectedValueI]), data: d }))\n    .sort((b, a) => b.data.formatted_date - a.data.formatted_date);\n\n  const epsilon = 1e-3;\n  let head = null,\n    tail = null,\n    queue = null;\n\n  //   // Returns true if circle x,y intersects with any circle in the queue.\n  function intersects(x, y, r) {\n    let a = head;\n    while (a) {\n      const radius2 = (a.r + r + paddingI) ** 2;\n      if (radius2 - epsilon > (a.x - x) ** 2 + (a.y - y) ** 2) {\n        return true;\n      }\n      a = a.next;\n    }\n    return false;\n  }\n\n  //   // Place each circle sequentially.\n  for (const b of circles) {\n\n    //     // Choose the minimum non-intersecting tangent.\n    if (intersects(b.x, (b.y = b.r ), b.r)) {\n      let a = head;\n      b.y = Infinity;\n      do {\n        let y =\n          a.y + Math.sqrt((a.r + b.r + paddingI) ** 2 - (a.x - b.x) ** 2);\n        if (y < b.y && !intersects(b.x, y, b.r)) b.y = y;\n        a = a.next;\n      } while (a);\n    }\n\n    //     // Add b to the queue.\n    b.next = null;\n    if (head === null) {\n      head = tail = b;\n      queue = head;\n    } else tail = tail.next = b;\n\n    // console.log(\"Dodge Undefined:\", selectedDateI, selectedValueI, b.x)\n\n    // if (preRenderFun) {b.preRendered=preRenderFun(b.x, b.y,b.r)}\n  }\n\n  return circles;\n};\n\n\n\nexport const dodgeMap = (data, selectedDateI, selectedValueI, xScaleI, rScaleI, paddingI, externalMap) => {\n  // const M = new Map(dodgedParticlesMap.map(d => [[d.x, d.y], d.r]));\n  data.sort((b, a) => b.formatted_date - a.formatted_date)\n  const circles = data.map((d) => ({ x: xScaleI(d[selectedDateI]), r: rScaleI(d[selectedValueI]), data: d }))\n\n  const M = new Map(data.sort((b, a) => b.formatted_date - a.formatted_date).map(d => [d.id, [xScaleI(d[selectedDateI]), d.y, rScaleI(d[selectedValueI])]]));\n\n  const epsilon = 1e-3;\n  let head = null,\n    tail = null,\n    queue = null;\n\n  //   // Returns true if circle x,y intersects with any circle in the queue.\n  function intersects(x, y, r) {\n    let a = head;\n    while (a) {\n      const radius2 = (a.r + r + paddingI) ** 2;\n      if (radius2 - epsilon > (a.x - x) ** 2 + (a.y - y) ** 2) {\n        return true;\n      }\n      a = a.next;\n    }\n    return false;\n  }\n\n  //   // Place each circle sequentially.\n  for (const b of circles) {\n\n    //     // Choose the minimum non-intersecting tangent.\n    if (intersects(b.x, (b.y = b.r ), b.r)) {\n      let a = head;\n      b.y = Infinity;\n      do {\n        let y =\n          a.y + Math.sqrt((a.r + b.r + paddingI) ** 2 - (a.x - b.x) ** 2);\n        if (y < b.y && !intersects(b.x, y, b.r)) b.y = y;\n        a = a.next;\n      } while (a);\n    }\n\n    //     // Add b to the queue.\n    b.next = null;\n    if (head === null) {\n      head = tail = b;\n      queue = head;\n    } else tail = tail.next = b;\n\n    // console.log(\"Dodge Undefined:\", selectedDateI, selectedValueI, b.x)\n\n    // if (preRenderFun) {b.preRendered=preRenderFun(b.x, b.y,b.r)}\n  }\n\n\n  return M;\n};\n\n\n\n\n// export const dodgeMap = (data, selectedDateI, selectedValueI, xScaleI, rScaleI, paddingI, preRenderFun=false) => {\n//   // const M = new Map(dodgedParticlesMap.map(d => [[d.x, d.y], d.r]));\n\n//   const circles = data.sort((b, a) => b.formatted_date - a.formatted_date)\n//     .map((d) => ({ x: xScaleI(d[selectedDateI]), r: rScaleI(d[selectedValueI]), data: d }))\n\n//   const M = new Map(data.sort((b, a) => b.formatted_date - a.formatted_date).map(d => [d.id, [xScaleI(d[selectedDateI]), d.y, rScaleI(d[selectedValueI])]]));\n\n//   const epsilon = 1e-3;\n//   let head = null,\n//     tail = null,\n//     queue = null;\n\n//   //   // Returns true if circle x,y intersects with any circle in the queue.\n//   function intersects(x, y, r) {\n//     let a = head;\n//     while (a) {\n//       const radius2 = (a.r + r + paddingI) ** 2;\n//       if (radius2 - epsilon > (a.x - x) ** 2 + (a.y - y) ** 2) {\n//         return true;\n//       }\n//       a = a.next;\n//     }\n//     return false;\n//   }\n\n//   //   // Place each circle sequentially.\n//   for (const b of circles) {\n\n//     //     // Choose the minimum non-intersecting tangent.\n//     if (intersects(b.x, (b.y = b.r ), b.r)) {\n//       let a = head;\n//       b.y = Infinity;\n//       do {\n//         let y =\n//           a.y + Math.sqrt((a.r + b.r + paddingI) ** 2 - (a.x - b.x) ** 2);\n//         if (y < b.y && !intersects(b.x, y, b.r)) b.y = y;\n//         a = a.next;\n//       } while (a);\n//     }\n\n//     //     // Add b to the queue.\n//     b.next = null;\n//     if (head === null) {\n//       head = tail = b;\n//       queue = head;\n//     } else tail = tail.next = b;\n\n//     // console.log(\"Dodge Undefined:\", selectedDateI, selectedValueI, b.x)\n\n//     // if (preRenderFun) {b.preRendered=preRenderFun(b.x, b.y,b.r)}\n//   }\n\n\n//   return M;\n// };\n\n\n","// To fix canvas blurryness I used this: https://stackoverflow.com/questions/48961797/canvas-circle-looks-blurry\nimport { useEffect, useRef } from \"react\";\nimport { Delaunay } from \"d3-delaunay\";\nimport * as d3 from \"d3\";\nimport React from \"react\";\nimport { gsap } from \"gsap\";\nimport { isBrowser } from \"../../utils/staticRendering\";\nimport { dodge } from \"../../utils/visualizationUtils\";\n\nconst ScrollySwarmSterile = (props) => {\n  const pixelRatio = props.pixelRatio;\n  let height = props.height;\n  let width = props.width;\n  let margin = props.margin;\n  let marginLeft = props.marginLeft;\n  let marginTop = props.marginTop;\n  let particles = props.particles;\n  let ref = useRef();\n  let highlightRef = useRef();\n  let axisRef = useRef();\n  let circleColor = \"rgba(0,0,255,.7)\";\n  let circleHighlightColor = \"rgb(255,255,255)\";\n  let strokeColor = \"rgba(0,0,0,0)\";\n  let globalOpacity = 1;\n  let animationDuration = 1;\n  let lineWidth = 1.4;\n  let padding = lineWidth;\n\n  ////MOVE TO HOOKS\n  const usePrevious = (value, defaultRef) => {\n    const ref = useRef(defaultRef);\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  };\n\n  const prevDate = usePrevious(props.dateSelection, \"\");\n\n  let rScale = d3\n    .scaleLinear()\n    .domain(d3.extent(particles, (d) => d[props.valueSelection]))\n    .range([1, height / 80]);\n\n  let x = (incomingData, prevOrCurrent) =>\n    d3\n      .scaleSequential()\n      .domain(d3.extent(particles, (d) => d[prevOrCurrent]))\n      .range([marginLeft, width - 0]);\n\n  let r = (selectedValue) => rScale(selectedValue);\n\n  const dodgedParticlesOrigin = dodge(\n    particles,\n    prevDate,\n    props.valueSelection,\n    x(particles, prevDate),\n    r,\n    padding\n  );\n  const dodgedParticlesDestination = dodge(\n    particles,\n    props.dateSelection,\n    props.valueSelection,\n    x(particles, props.dateSelection),\n    r,\n    padding\n  );\n\n  const tooltip =\n    isBrowser() &&\n    d3\n      .select(\"#tooltipDiv\")\n      .style(\"background-color\", \"white\")\n      .style(\"border-radius\", \"2px\")\n      .style(\n        \"box-shadow\",\n        \"0 3px 6px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.4)\"\n      )\n      .style(\"opacity\", 0)\n      .style(\"padding\", \"5px\")\n      .style(\"z-index\", 1000000);\n\n  function showTooltip(\n    tooltipX,\n    tooltipY,\n    readableValue,\n    readableDate,\n    readableFullDate\n  ) {\n    isBrowser() &&\n      tooltip\n        .style(\"opacity\", 0.7)\n        .style(\"display\", \"block\")\n        .style(\"top\", tooltipY + \"px\")\n        .style(\"left\", tooltipX + 30 - margin + \"px\")\n        .style(\"z-index\", 500000)\n        .html(\n          `<div class =\"swarmTooltipText\">\n          <div>words written: <b>${readableValue}</b></div>\n          <div>${props.dateSelection}: <b>${readableDate}</b></div>\n          <div><b>${readableFullDate}</b></div>\n          </div>`\n        );\n  }\n\n  const delaunay2 = (dateString, x, y) =>\n    Delaunay.from(dodgedParticlesDestination.map((d) => [d.x, d.y]));\n\n  const xAxisScale = d3\n    .scaleSequential()\n    .domain(d3.extent(particles, (d) => d[props.dateSelection]))\n    .range([margin, width - margin]);\n\n  const xAxis = d3\n    .axisBottom(xAxisScale)\n    .ticks(5)\n    .tickFormat((d) => `${d}`);\n\n  useEffect(() => {\n    //************************************************************\n    // ***** Scale Canvas and prep\n    // ***********************************************************\n    const canvas = ref.current;\n    const context = canvas.getContext(\"2d\");\n    context.scale(pixelRatio, pixelRatio);\n    context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    context.globalAlpha = globalOpacity;\n    context.lineWidth = lineWidth;\n    context.fillStyle = circleColor;\n\n    //************************************************************\n    // ***** End Scale Canvas and prep\n    // ***********************************************************\n\n    const update = () => {\n      // context.fillStyle = \"rgb(226, 99, 255)\";\n      // context.fillStyle = \"rgb(65, 82, 158, 0.2)\";\n\n      context.strokeStyle = strokeColor;\n\n      const animation = () =>\n        gsap.fromTo(\n          dodgedParticlesOrigin,\n          {\n            x: (index) => dodgedParticlesOrigin[index].x,\n            y: (index) => dodgedParticlesOrigin[index].y,\n          },\n          {\n            x: (index) => dodgedParticlesDestination[index].x,\n            y: (index) => dodgedParticlesDestination[index].y,\n            // ease: \"power.3.out\",\n            duration: animationDuration,\n\n            // Documentation: https://greensock.com/docs/v3/Staggers\n            ease: \"strong.inOut\",\n            // runBackwards: true,\n            onUpdate: animate,\n\n            stagger: {\n              each: 0.0005,\n              from: \"random\",\n            },\n          }\n        );\n\n      animation();\n\n      function animate() {\n        context.restore();\n\n        context.clearRect(0, 0, width, height);\n\n        d3.select(axisRef.current).call(xAxis).transition();\n        context.beginPath();\n        dodgedParticlesOrigin.map(\n          (d, i) => (\n            context.beginPath(),\n            context.arc(d.x - margin, height - d.y, d.r, 0, 2 * Math.PI),\n            context.stroke(),\n            context.fill()\n          )\n        );\n      }\n    };\n\n    onscroll = (event) => {\n      pointHoverOut();\n    };\n\n    const pointHoverIn = (hoverActive) => {\n      let xSelection = hoverActive.x - margin;\n\n      let ySelection = hoverActive.y;\n\n      d3.select(highlightRef.current)\n        .attr(\"r\", hoverActive.r + 1)\n        .attr(\"cx\", xSelection)\n        .attr(\"cy\", height - ySelection)\n        .attr(\"fill\", circleHighlightColor)\n        .attr(\"stroke\", circleColor);\n    };\n\n    const pointHoverOut = () => {\n      d3.select(highlightRef.current).attr(\"r\", 0);\n    };\n\n    function hideTooltip(hoverInactive) {\n      isBrowser && tooltip.style(\"display\", \"none\");\n      isBrowser && tooltip.style(\"opacity\", \"0\");\n    }\n\n    onmousemove = (event) => {\n      event.preventDefault();\n      const pageYoffset = window.pageYOffset;\n      let mousePoint = d3.pointer(event, this);\n      let xi = mousePoint[0] + margin;\n      let y = height - mousePoint[1] + pageYoffset;\n      let heightCond = xi < width + margin;\n      let index = delaunay2(props.dateSelection).find(xi, y);\n      let indexObj = dodgedParticlesDestination[index];\n      let tooltipX = indexObj.x;\n      let tooltipY = height - indexObj.y;\n      let tooltipLegibleValue = indexObj.data[props.valueSelection];\n      let tooltipLegibleSelectedDate = indexObj.data[props.dateSelection];\n      let tooltipLegibleDate = indexObj.data.date;\n\n      heightCond\n        ? showTooltip(\n            tooltipX,\n            tooltipY,\n            tooltipLegibleValue,\n            tooltipLegibleSelectedDate,\n            tooltipLegibleDate\n          )\n        : hideTooltip(indexObj);\n\n      heightCond ? pointHoverIn(indexObj) : pointHoverOut(indexObj);\n    };\n\n    update();\n  }, [props.dateSelection, props.width, props.height, props.pixelRatio]);\n\n  return (\n    <div className=\"canvasStickyChartContainer scrollySwarmContainerSterile\">\n      <div id=\"tooltipDiv\" className=\"tooltipDiv\" />\n\n      <svg className=\"canvasStickyPointHighlight\" width={width} height={height}>\n        <circle r={0} className=\"highlightCircle\" ref={highlightRef}></circle>\n      </svg>\n      <canvas\n        className={\"canvasStickyChart\"}\n        style={{\n          width: props.width + \"px\",\n          height: props.height + \"px\",\n        }}\n        ref={ref}\n        particles={props.particles}\n        stroke={props.stroke}\n        width={props.width * props.pixelRatio}\n        height={props.height * props.pixelRatio}\n        useScrollData={props.useScrollData}\n        dateSelection={props.dateSelection}\n        valueSelection={props.valueSelection}\n        margin={props.margin}\n      />\n      <svg style={{ top: props.height - 1 }} className=\"canvasStickyChartAxis\">\n        <g className=\"lightModeAxis\" ref={axisRef}></g>\n      </svg>\n    </div>\n  );\n};\n\nexport default ScrollySwarmSterile;\n","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nexport function rotatePoints(points, center, degrees) {\n  if (points && points.length) {\n    var _center = _slicedToArray(center, 2),\n        cx = _center[0],\n        cy = _center[1];\n\n    var angle = Math.PI / 180 * degrees;\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    points.forEach(function (p) {\n      var _p = _slicedToArray(p, 2),\n          x = _p[0],\n          y = _p[1];\n\n      p[0] = (x - cx) * cos - (y - cy) * sin + cx;\n      p[1] = (x - cx) * sin + (y - cy) * cos + cy;\n    });\n  }\n}\nexport function rotateLines(lines, center, degrees) {\n  var points = [];\n  lines.forEach(function (line) {\n    return points.push.apply(points, _toConsumableArray(line));\n  });\n  rotatePoints(points, center, degrees);\n}\nexport function lineLength(line) {\n  var p1 = line[0];\n  var p2 = line[1];\n  return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2));\n}","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { rotatePoints, rotateLines } from '../geometry';\nexport function polygonHachureLines(polygonList, o) {\n  var angle = o.hachureAngle + 90;\n  var gap = o.hachureGap;\n\n  if (gap < 0) {\n    gap = o.strokeWidth * 4;\n  }\n\n  gap = Math.max(gap, 0.1);\n  var rotationCenter = [0, 0];\n\n  if (angle) {\n    var _iterator = _createForOfIteratorHelper(polygonList),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var polygon = _step.value;\n        rotatePoints(polygon, rotationCenter, angle);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n\n  var lines = straightHachureLines(polygonList, gap);\n\n  if (angle) {\n    var _iterator2 = _createForOfIteratorHelper(polygonList),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _polygon = _step2.value;\n        rotatePoints(_polygon, rotationCenter, -angle);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    rotateLines(lines, rotationCenter, -angle);\n  }\n\n  return lines;\n}\n\nfunction straightHachureLines(polygonList, gap) {\n  var vertexArray = [];\n\n  var _iterator3 = _createForOfIteratorHelper(polygonList),\n      _step3;\n\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var polygon = _step3.value;\n\n      var _vertices = _toConsumableArray(polygon);\n\n      if (_vertices[0].join(',') !== _vertices[_vertices.length - 1].join(',')) {\n        _vertices.push([_vertices[0][0], _vertices[0][1]]);\n      }\n\n      if (_vertices.length > 2) {\n        vertexArray.push(_vertices);\n      }\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  var lines = [];\n  gap = Math.max(gap, 0.1); // Create sorted edges table\n\n  var edges = [];\n\n  for (var _i = 0, _vertexArray = vertexArray; _i < _vertexArray.length; _i++) {\n    var vertices = _vertexArray[_i];\n\n    for (var i = 0; i < vertices.length - 1; i++) {\n      var p1 = vertices[i];\n      var p2 = vertices[i + 1];\n\n      if (p1[1] !== p2[1]) {\n        var ymin = Math.min(p1[1], p2[1]);\n        edges.push({\n          ymin: ymin,\n          ymax: Math.max(p1[1], p2[1]),\n          x: ymin === p1[1] ? p1[0] : p2[0],\n          islope: (p2[0] - p1[0]) / (p2[1] - p1[1])\n        });\n      }\n    }\n  }\n\n  edges.sort(function (e1, e2) {\n    if (e1.ymin < e2.ymin) {\n      return -1;\n    }\n\n    if (e1.ymin > e2.ymin) {\n      return 1;\n    }\n\n    if (e1.x < e2.x) {\n      return -1;\n    }\n\n    if (e1.x > e2.x) {\n      return 1;\n    }\n\n    if (e1.ymax === e2.ymax) {\n      return 0;\n    }\n\n    return (e1.ymax - e2.ymax) / Math.abs(e1.ymax - e2.ymax);\n  });\n\n  if (!edges.length) {\n    return lines;\n  } // Start scanning\n\n\n  var activeEdges = [];\n  var y = edges[0].ymin;\n\n  while (activeEdges.length || edges.length) {\n    if (edges.length) {\n      var ix = -1;\n\n      for (var _i2 = 0; _i2 < edges.length; _i2++) {\n        if (edges[_i2].ymin > y) {\n          break;\n        }\n\n        ix = _i2;\n      }\n\n      var removed = edges.splice(0, ix + 1);\n      removed.forEach(function (edge) {\n        activeEdges.push({\n          s: y,\n          edge: edge\n        });\n      });\n    }\n\n    activeEdges = activeEdges.filter(function (ae) {\n      if (ae.edge.ymax <= y) {\n        return false;\n      }\n\n      return true;\n    });\n    activeEdges.sort(function (ae1, ae2) {\n      if (ae1.edge.x === ae2.edge.x) {\n        return 0;\n      }\n\n      return (ae1.edge.x - ae2.edge.x) / Math.abs(ae1.edge.x - ae2.edge.x);\n    }); // fill between the edges\n\n    if (activeEdges.length > 1) {\n      for (var _i3 = 0; _i3 < activeEdges.length; _i3 = _i3 + 2) {\n        var nexti = _i3 + 1;\n\n        if (nexti >= activeEdges.length) {\n          break;\n        }\n\n        var ce = activeEdges[_i3].edge;\n        var ne = activeEdges[nexti].edge;\n        lines.push([[Math.round(ce.x), y], [Math.round(ne.x), y]]);\n      }\n    }\n\n    y += gap;\n    activeEdges.forEach(function (ae) {\n      ae.edge.x = ae.edge.x + gap * ae.edge.islope;\n    });\n  }\n\n  return lines;\n}","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { polygonHachureLines } from './scan-line-hachure';\nexport var HachureFiller = /*#__PURE__*/function () {\n  function HachureFiller(helper) {\n    _classCallCheck(this, HachureFiller);\n\n    this.helper = helper;\n  }\n\n  _createClass(HachureFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      return this._fillPolygons(polygonList, o);\n    }\n  }, {\n    key: \"_fillPolygons\",\n    value: function _fillPolygons(polygonList, o) {\n      var lines = polygonHachureLines(polygonList, o);\n      var ops = this.renderLines(lines, o);\n      return {\n        type: 'fillSketch',\n        ops: ops\n      };\n    }\n  }, {\n    key: \"renderLines\",\n    value: function renderLines(lines, o) {\n      var ops = [];\n\n      var _iterator = _createForOfIteratorHelper(lines),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var line = _step.value;\n          ops.push.apply(ops, _toConsumableArray(this.helper.doubleLineOps(line[0][0], line[0][1], line[1][0], line[1][1], o)));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return ops;\n    }\n  }]);\n\n  return HachureFiller;\n}();","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { HachureFiller } from './hachure-filler';\nimport { polygonHachureLines } from './scan-line-hachure';\nimport { lineLength } from '../geometry';\nexport var ZigZagFiller = /*#__PURE__*/function (_HachureFiller) {\n  _inherits(ZigZagFiller, _HachureFiller);\n\n  var _super = _createSuper(ZigZagFiller);\n\n  function ZigZagFiller() {\n    _classCallCheck(this, ZigZagFiller);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ZigZagFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      var gap = o.hachureGap;\n\n      if (gap < 0) {\n        gap = o.strokeWidth * 4;\n      }\n\n      gap = Math.max(gap, 0.1);\n      var o2 = Object.assign({}, o, {\n        hachureGap: gap\n      });\n      var lines = polygonHachureLines(polygonList, o2);\n      var zigZagAngle = Math.PI / 180 * o.hachureAngle;\n      var zigzagLines = [];\n      var dgx = gap * 0.5 * Math.cos(zigZagAngle);\n      var dgy = gap * 0.5 * Math.sin(zigZagAngle);\n\n      var _iterator = _createForOfIteratorHelper(lines),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              p1 = _step$value[0],\n              p2 = _step$value[1];\n\n          if (lineLength([p1, p2])) {\n            zigzagLines.push([[p1[0] - dgx, p1[1] + dgy], _toConsumableArray(p2)], [[p1[0] + dgx, p1[1] - dgy], _toConsumableArray(p2)]);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var ops = this.renderLines(zigzagLines, o);\n      return {\n        type: 'fillSketch',\n        ops: ops\n      };\n    }\n  }]);\n\n  return ZigZagFiller;\n}(HachureFiller);","import _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { HachureFiller } from './hachure-filler';\nexport var HatchFiller = /*#__PURE__*/function (_HachureFiller) {\n  _inherits(HatchFiller, _HachureFiller);\n\n  var _super = _createSuper(HatchFiller);\n\n  function HatchFiller() {\n    _classCallCheck(this, HatchFiller);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(HatchFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      var set = this._fillPolygons(polygonList, o);\n\n      var o2 = Object.assign({}, o, {\n        hachureAngle: o.hachureAngle + 90\n      });\n\n      var set2 = this._fillPolygons(polygonList, o2);\n\n      set.ops = set.ops.concat(set2.ops);\n      return set;\n    }\n  }]);\n\n  return HatchFiller;\n}(HachureFiller);","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport var DotFiller = /*#__PURE__*/function () {\n  function DotFiller(helper) {\n    _classCallCheck(this, DotFiller);\n\n    this.helper = helper;\n  }\n\n  _createClass(DotFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      o = Object.assign({}, o, {\n        hachureAngle: 0\n      });\n      var lines = polygonHachureLines(polygonList, o);\n      return this.dotsOnLines(lines, o);\n    }\n  }, {\n    key: \"dotsOnLines\",\n    value: function dotsOnLines(lines, o) {\n      var ops = [];\n      var gap = o.hachureGap;\n\n      if (gap < 0) {\n        gap = o.strokeWidth * 4;\n      }\n\n      gap = Math.max(gap, 0.1);\n      var fweight = o.fillWeight;\n\n      if (fweight < 0) {\n        fweight = o.strokeWidth / 2;\n      }\n\n      var ro = gap / 4;\n\n      var _iterator = _createForOfIteratorHelper(lines),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var line = _step.value;\n          var length = lineLength(line);\n          var dl = length / gap;\n          var count = Math.ceil(dl) - 1;\n          var offset = length - count * gap;\n          var x = (line[0][0] + line[1][0]) / 2 - gap / 4;\n          var minY = Math.min(line[0][1], line[1][1]);\n\n          for (var i = 0; i < count; i++) {\n            var y = minY + offset + i * gap;\n            var cx = x - ro + Math.random() * 2 * ro;\n            var cy = y - ro + Math.random() * 2 * ro;\n            var el = this.helper.ellipse(cx, cy, fweight, fweight, o);\n            ops.push.apply(ops, _toConsumableArray(el.ops));\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return {\n        type: 'fillSketch',\n        ops: ops\n      };\n    }\n  }]);\n\n  return DotFiller;\n}();","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport var DashedFiller = /*#__PURE__*/function () {\n  function DashedFiller(helper) {\n    _classCallCheck(this, DashedFiller);\n\n    this.helper = helper;\n  }\n\n  _createClass(DashedFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      var lines = polygonHachureLines(polygonList, o);\n      return {\n        type: 'fillSketch',\n        ops: this.dashedLine(lines, o)\n      };\n    }\n  }, {\n    key: \"dashedLine\",\n    value: function dashedLine(lines, o) {\n      var _this = this;\n\n      var offset = o.dashOffset < 0 ? o.hachureGap < 0 ? o.strokeWidth * 4 : o.hachureGap : o.dashOffset;\n      var gap = o.dashGap < 0 ? o.hachureGap < 0 ? o.strokeWidth * 4 : o.hachureGap : o.dashGap;\n      var ops = [];\n      lines.forEach(function (line) {\n        var length = lineLength(line);\n        var count = Math.floor(length / (offset + gap));\n        var startOffset = (length + gap - count * (offset + gap)) / 2;\n        var p1 = line[0];\n        var p2 = line[1];\n\n        if (p1[0] > p2[0]) {\n          p1 = line[1];\n          p2 = line[0];\n        }\n\n        var alpha = Math.atan((p2[1] - p1[1]) / (p2[0] - p1[0]));\n\n        for (var i = 0; i < count; i++) {\n          var lstart = i * (offset + gap);\n          var lend = lstart + offset;\n          var start = [p1[0] + lstart * Math.cos(alpha) + startOffset * Math.cos(alpha), p1[1] + lstart * Math.sin(alpha) + startOffset * Math.sin(alpha)];\n          var end = [p1[0] + lend * Math.cos(alpha) + startOffset * Math.cos(alpha), p1[1] + lend * Math.sin(alpha) + startOffset * Math.sin(alpha)];\n          ops.push.apply(ops, _toConsumableArray(_this.helper.doubleLineOps(start[0], start[1], end[0], end[1], o)));\n        }\n      });\n      return ops;\n    }\n  }]);\n\n  return DashedFiller;\n}();","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport var ZigZagLineFiller = /*#__PURE__*/function () {\n  function ZigZagLineFiller(helper) {\n    _classCallCheck(this, ZigZagLineFiller);\n\n    this.helper = helper;\n  }\n\n  _createClass(ZigZagLineFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      var gap = o.hachureGap < 0 ? o.strokeWidth * 4 : o.hachureGap;\n      var zo = o.zigzagOffset < 0 ? gap : o.zigzagOffset;\n      o = Object.assign({}, o, {\n        hachureGap: gap + zo\n      });\n      var lines = polygonHachureLines(polygonList, o);\n      return {\n        type: 'fillSketch',\n        ops: this.zigzagLines(lines, zo, o)\n      };\n    }\n  }, {\n    key: \"zigzagLines\",\n    value: function zigzagLines(lines, zo, o) {\n      var _this = this;\n\n      var ops = [];\n      lines.forEach(function (line) {\n        var length = lineLength(line);\n        var count = Math.round(length / (2 * zo));\n        var p1 = line[0];\n        var p2 = line[1];\n\n        if (p1[0] > p2[0]) {\n          p1 = line[1];\n          p2 = line[0];\n        }\n\n        var alpha = Math.atan((p2[1] - p1[1]) / (p2[0] - p1[0]));\n\n        for (var i = 0; i < count; i++) {\n          var lstart = i * 2 * zo;\n          var lend = (i + 1) * 2 * zo;\n          var dz = Math.sqrt(2 * Math.pow(zo, 2));\n          var start = [p1[0] + lstart * Math.cos(alpha), p1[1] + lstart * Math.sin(alpha)];\n          var end = [p1[0] + lend * Math.cos(alpha), p1[1] + lend * Math.sin(alpha)];\n          var middle = [start[0] + dz * Math.cos(alpha + Math.PI / 4), start[1] + dz * Math.sin(alpha + Math.PI / 4)];\n          ops.push.apply(ops, _toConsumableArray(_this.helper.doubleLineOps(start[0], start[1], middle[0], middle[1], o)).concat(_toConsumableArray(_this.helper.doubleLineOps(middle[0], middle[1], end[0], end[1], o))));\n        }\n      });\n      return ops;\n    }\n  }]);\n\n  return ZigZagLineFiller;\n}();","import { HachureFiller } from './hachure-filler';\nimport { ZigZagFiller } from './zigzag-filler';\nimport { HatchFiller } from './hatch-filler';\nimport { DotFiller } from './dot-filler';\nimport { DashedFiller } from './dashed-filler';\nimport { ZigZagLineFiller } from './zigzag-line-filler';\nvar fillers = {};\nexport function getFiller(o, helper) {\n  var fillerName = o.fillStyle || 'hachure';\n\n  if (!fillers[fillerName]) {\n    switch (fillerName) {\n      case 'zigzag':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new ZigZagFiller(helper);\n        }\n\n        break;\n\n      case 'cross-hatch':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new HatchFiller(helper);\n        }\n\n        break;\n\n      case 'dots':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new DotFiller(helper);\n        }\n\n        break;\n\n      case 'dashed':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new DashedFiller(helper);\n        }\n\n        break;\n\n      case 'zigzag-line':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new ZigZagLineFiller(helper);\n        }\n\n        break;\n\n      case 'hachure':\n      default:\n        fillerName = 'hachure';\n\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new HachureFiller(helper);\n        }\n\n        break;\n    }\n  }\n\n  return fillers[fillerName];\n}","import _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nexport function randomSeed() {\n  return Math.floor(Math.random() * Math.pow(2, 31));\n}\nexport var Random = /*#__PURE__*/function () {\n  function Random(seed) {\n    _classCallCheck(this, Random);\n\n    this.seed = seed;\n  }\n\n  _createClass(Random, [{\n    key: \"next\",\n    value: function next() {\n      if (this.seed) {\n        return (Math.pow(2, 31) - 1 & (this.seed = Math.imul(48271, this.seed))) / Math.pow(2, 31);\n      } else {\n        return Math.random();\n      }\n    }\n  }]);\n\n  return Random;\n}();","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar COMMAND = 0;\nvar NUMBER = 1;\nvar EOD = 2;\nvar PARAMS = {\n  A: 7,\n  a: 7,\n  C: 6,\n  c: 6,\n  H: 1,\n  h: 1,\n  L: 2,\n  l: 2,\n  M: 2,\n  m: 2,\n  Q: 4,\n  q: 4,\n  S: 4,\n  s: 4,\n  T: 2,\n  t: 2,\n  V: 1,\n  v: 1,\n  Z: 0,\n  z: 0\n};\n\nfunction tokenize(d) {\n  var tokens = new Array();\n\n  while (d !== '') {\n    if (d.match(/^([ \\t\\r\\n,]+)/)) {\n      d = d.substr(RegExp.$1.length);\n    } else if (d.match(/^([aAcChHlLmMqQsStTvVzZ])/)) {\n      tokens[tokens.length] = {\n        type: COMMAND,\n        text: RegExp.$1\n      };\n      d = d.substr(RegExp.$1.length);\n    } else if (d.match(/^(([-+]?[0-9]+(\\.[0-9]*)?|[-+]?\\.[0-9]+)([eE][-+]?[0-9]+)?)/)) {\n      tokens[tokens.length] = {\n        type: NUMBER,\n        text: \"\".concat(parseFloat(RegExp.$1))\n      };\n      d = d.substr(RegExp.$1.length);\n    } else {\n      return [];\n    }\n  }\n\n  tokens[tokens.length] = {\n    type: EOD,\n    text: ''\n  };\n  return tokens;\n}\n\nfunction isType(token, type) {\n  return token.type === type;\n}\n\nexport function parsePath(d) {\n  var segments = [];\n  var tokens = tokenize(d);\n  var mode = 'BOD';\n  var index = 0;\n  var token = tokens[index];\n\n  while (!isType(token, EOD)) {\n    var paramsCount = 0;\n    var params = [];\n\n    if (mode === 'BOD') {\n      if (token.text === 'M' || token.text === 'm') {\n        index++;\n        paramsCount = PARAMS[token.text];\n        mode = token.text;\n      } else {\n        return parsePath('M0,0' + d);\n      }\n    } else if (isType(token, NUMBER)) {\n      paramsCount = PARAMS[mode];\n    } else {\n      index++;\n      paramsCount = PARAMS[token.text];\n      mode = token.text;\n    }\n\n    if (index + paramsCount < tokens.length) {\n      for (var i = index; i < index + paramsCount; i++) {\n        var numbeToken = tokens[i];\n\n        if (isType(numbeToken, NUMBER)) {\n          params[params.length] = +numbeToken.text;\n        } else {\n          throw new Error('Param not a number: ' + mode + ',' + numbeToken.text);\n        }\n      }\n\n      if (typeof PARAMS[mode] === 'number') {\n        var segment = {\n          key: mode,\n          data: params\n        };\n        segments.push(segment);\n        index += paramsCount;\n        token = tokens[index];\n        if (mode === 'M') mode = 'L';\n        if (mode === 'm') mode = 'l';\n      } else {\n        throw new Error('Bad segment: ' + mode);\n      }\n    } else {\n      throw new Error('Path data ended short');\n    }\n  }\n\n  return segments;\n}\nexport function serialize(segments) {\n  var tokens = [];\n\n  var _iterator = _createForOfIteratorHelper(segments),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n      tokens.push(key);\n\n      switch (key) {\n        case 'C':\n        case 'c':\n          tokens.push(data[0], \"\".concat(data[1], \",\"), data[2], \"\".concat(data[3], \",\"), data[4], data[5]);\n          break;\n\n        case 'S':\n        case 's':\n        case 'Q':\n        case 'q':\n          tokens.push(data[0], \"\".concat(data[1], \",\"), data[2], data[3]);\n          break;\n\n        default:\n          tokens.push.apply(tokens, _toConsumableArray(data));\n          break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return tokens.join(' ');\n}","import _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n// Translate relative commands to absolute commands\nexport function absolutize(segments) {\n  var cx = 0,\n      cy = 0;\n  var subx = 0,\n      suby = 0;\n  var out = [];\n\n  var _iterator = _createForOfIteratorHelper(segments),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n\n      switch (key) {\n        case 'M':\n          out.push({\n            key: 'M',\n            data: _toConsumableArray(data)\n          });\n\n          var _data = _slicedToArray(data, 2);\n\n          cx = _data[0];\n          cy = _data[1];\n\n          var _data2 = _slicedToArray(data, 2);\n\n          subx = _data2[0];\n          suby = _data2[1];\n          break;\n\n        case 'm':\n          cx += data[0];\n          cy += data[1];\n          out.push({\n            key: 'M',\n            data: [cx, cy]\n          });\n          subx = cx;\n          suby = cy;\n          break;\n\n        case 'L':\n          out.push({\n            key: 'L',\n            data: _toConsumableArray(data)\n          });\n\n          var _data3 = _slicedToArray(data, 2);\n\n          cx = _data3[0];\n          cy = _data3[1];\n          break;\n\n        case 'l':\n          cx += data[0];\n          cy += data[1];\n          out.push({\n            key: 'L',\n            data: [cx, cy]\n          });\n          break;\n\n        case 'C':\n          out.push({\n            key: 'C',\n            data: _toConsumableArray(data)\n          });\n          cx = data[4];\n          cy = data[5];\n          break;\n\n        case 'c':\n          {\n            var newdata = data.map(function (d, i) {\n              return i % 2 ? d + cy : d + cx;\n            });\n            out.push({\n              key: 'C',\n              data: newdata\n            });\n            cx = newdata[4];\n            cy = newdata[5];\n            break;\n          }\n\n        case 'Q':\n          out.push({\n            key: 'Q',\n            data: _toConsumableArray(data)\n          });\n          cx = data[2];\n          cy = data[3];\n          break;\n\n        case 'q':\n          {\n            var _newdata = data.map(function (d, i) {\n              return i % 2 ? d + cy : d + cx;\n            });\n\n            out.push({\n              key: 'Q',\n              data: _newdata\n            });\n            cx = _newdata[2];\n            cy = _newdata[3];\n            break;\n          }\n\n        case 'A':\n          out.push({\n            key: 'A',\n            data: _toConsumableArray(data)\n          });\n          cx = data[5];\n          cy = data[6];\n          break;\n\n        case 'a':\n          cx += data[5];\n          cy += data[6];\n          out.push({\n            key: 'A',\n            data: [data[0], data[1], data[2], data[3], data[4], cx, cy]\n          });\n          break;\n\n        case 'H':\n          out.push({\n            key: 'H',\n            data: _toConsumableArray(data)\n          });\n          cx = data[0];\n          break;\n\n        case 'h':\n          cx += data[0];\n          out.push({\n            key: 'H',\n            data: [cx]\n          });\n          break;\n\n        case 'V':\n          out.push({\n            key: 'V',\n            data: _toConsumableArray(data)\n          });\n          cy = data[0];\n          break;\n\n        case 'v':\n          cy += data[0];\n          out.push({\n            key: 'V',\n            data: [cy]\n          });\n          break;\n\n        case 'S':\n          out.push({\n            key: 'S',\n            data: _toConsumableArray(data)\n          });\n          cx = data[2];\n          cy = data[3];\n          break;\n\n        case 's':\n          {\n            var _newdata2 = data.map(function (d, i) {\n              return i % 2 ? d + cy : d + cx;\n            });\n\n            out.push({\n              key: 'S',\n              data: _newdata2\n            });\n            cx = _newdata2[2];\n            cy = _newdata2[3];\n            break;\n          }\n\n        case 'T':\n          out.push({\n            key: 'T',\n            data: _toConsumableArray(data)\n          });\n          cx = data[0];\n          cy = data[1];\n          break;\n\n        case 't':\n          cx += data[0];\n          cy += data[1];\n          out.push({\n            key: 'T',\n            data: [cx, cy]\n          });\n          break;\n\n        case 'Z':\n        case 'z':\n          out.push({\n            key: 'Z',\n            data: []\n          });\n          cx = subx;\n          cy = suby;\n          break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return out;\n}","import _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n// Normalize path to include only M, L, C, and Z commands\nexport function normalize(segments) {\n  var out = [];\n  var lastType = '';\n  var cx = 0,\n      cy = 0;\n  var subx = 0,\n      suby = 0;\n  var lcx = 0,\n      lcy = 0;\n\n  var _iterator = _createForOfIteratorHelper(segments),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n\n      switch (key) {\n        case 'M':\n          out.push({\n            key: 'M',\n            data: _toConsumableArray(data)\n          });\n\n          var _data = _slicedToArray(data, 2);\n\n          cx = _data[0];\n          cy = _data[1];\n\n          var _data2 = _slicedToArray(data, 2);\n\n          subx = _data2[0];\n          suby = _data2[1];\n          break;\n\n        case 'C':\n          out.push({\n            key: 'C',\n            data: _toConsumableArray(data)\n          });\n          cx = data[4];\n          cy = data[5];\n          lcx = data[2];\n          lcy = data[3];\n          break;\n\n        case 'L':\n          out.push({\n            key: 'L',\n            data: _toConsumableArray(data)\n          });\n\n          var _data3 = _slicedToArray(data, 2);\n\n          cx = _data3[0];\n          cy = _data3[1];\n          break;\n\n        case 'H':\n          cx = data[0];\n          out.push({\n            key: 'L',\n            data: [cx, cy]\n          });\n          break;\n\n        case 'V':\n          cy = data[0];\n          out.push({\n            key: 'L',\n            data: [cx, cy]\n          });\n          break;\n\n        case 'S':\n          {\n            var cx1 = 0,\n                cy1 = 0;\n\n            if (lastType === 'C' || lastType === 'S') {\n              cx1 = cx + (cx - lcx);\n              cy1 = cy + (cy - lcy);\n            } else {\n              cx1 = cx;\n              cy1 = cy;\n            }\n\n            out.push({\n              key: 'C',\n              data: [cx1, cy1].concat(_toConsumableArray(data))\n            });\n            lcx = data[0];\n            lcy = data[1];\n            cx = data[2];\n            cy = data[3];\n            break;\n          }\n\n        case 'T':\n          {\n            var _data4 = _slicedToArray(data, 2),\n                x = _data4[0],\n                y = _data4[1];\n\n            var x1 = 0,\n                y1 = 0;\n\n            if (lastType === 'Q' || lastType === 'T') {\n              x1 = cx + (cx - lcx);\n              y1 = cy + (cy - lcy);\n            } else {\n              x1 = cx;\n              y1 = cy;\n            }\n\n            var _cx = cx + 2 * (x1 - cx) / 3;\n\n            var _cy = cy + 2 * (y1 - cy) / 3;\n\n            var cx2 = x + 2 * (x1 - x) / 3;\n            var cy2 = y + 2 * (y1 - y) / 3;\n            out.push({\n              key: 'C',\n              data: [_cx, _cy, cx2, cy2, x, y]\n            });\n            lcx = x1;\n            lcy = y1;\n            cx = x;\n            cy = y;\n            break;\n          }\n\n        case 'Q':\n          {\n            var _data5 = _slicedToArray(data, 4),\n                _x = _data5[0],\n                _y = _data5[1],\n                _x2 = _data5[2],\n                _y2 = _data5[3];\n\n            var _cx2 = cx + 2 * (_x - cx) / 3;\n\n            var _cy2 = cy + 2 * (_y - cy) / 3;\n\n            var _cx3 = _x2 + 2 * (_x - _x2) / 3;\n\n            var _cy3 = _y2 + 2 * (_y - _y2) / 3;\n\n            out.push({\n              key: 'C',\n              data: [_cx2, _cy2, _cx3, _cy3, _x2, _y2]\n            });\n            lcx = _x;\n            lcy = _y;\n            cx = _x2;\n            cy = _y2;\n            break;\n          }\n\n        case 'A':\n          {\n            var r1 = Math.abs(data[0]);\n            var r2 = Math.abs(data[1]);\n            var angle = data[2];\n            var largeArcFlag = data[3];\n            var sweepFlag = data[4];\n            var _x3 = data[5];\n            var _y3 = data[6];\n\n            if (r1 === 0 || r2 === 0) {\n              out.push({\n                key: 'C',\n                data: [cx, cy, _x3, _y3, _x3, _y3]\n              });\n              cx = _x3;\n              cy = _y3;\n            } else {\n              if (cx !== _x3 || cy !== _y3) {\n                var curves = arcToCubicCurves(cx, cy, _x3, _y3, r1, r2, angle, largeArcFlag, sweepFlag);\n                curves.forEach(function (curve) {\n                  out.push({\n                    key: 'C',\n                    data: curve\n                  });\n                });\n                cx = _x3;\n                cy = _y3;\n              }\n            }\n\n            break;\n          }\n\n        case 'Z':\n          out.push({\n            key: 'Z',\n            data: []\n          });\n          cx = subx;\n          cy = suby;\n          break;\n      }\n\n      lastType = key;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return out;\n}\n\nfunction degToRad(degrees) {\n  return Math.PI * degrees / 180;\n}\n\nfunction rotate(x, y, angleRad) {\n  var X = x * Math.cos(angleRad) - y * Math.sin(angleRad);\n  var Y = x * Math.sin(angleRad) + y * Math.cos(angleRad);\n  return [X, Y];\n}\n\nfunction arcToCubicCurves(x1, y1, x2, y2, r1, r2, angle, largeArcFlag, sweepFlag, recursive) {\n  var angleRad = degToRad(angle);\n  var params = [];\n  var f1 = 0,\n      f2 = 0,\n      cx = 0,\n      cy = 0;\n\n  if (recursive) {\n    var _recursive = _slicedToArray(recursive, 4);\n\n    f1 = _recursive[0];\n    f2 = _recursive[1];\n    cx = _recursive[2];\n    cy = _recursive[3];\n  } else {\n    var _rotate = rotate(x1, y1, -angleRad);\n\n    var _rotate2 = _slicedToArray(_rotate, 2);\n\n    x1 = _rotate2[0];\n    y1 = _rotate2[1];\n\n    var _rotate3 = rotate(x2, y2, -angleRad);\n\n    var _rotate4 = _slicedToArray(_rotate3, 2);\n\n    x2 = _rotate4[0];\n    y2 = _rotate4[1];\n    var x = (x1 - x2) / 2;\n    var y = (y1 - y2) / 2;\n    var h = x * x / (r1 * r1) + y * y / (r2 * r2);\n\n    if (h > 1) {\n      h = Math.sqrt(h);\n      r1 = h * r1;\n      r2 = h * r2;\n    }\n\n    var sign = largeArcFlag === sweepFlag ? -1 : 1;\n    var r1Pow = r1 * r1;\n    var r2Pow = r2 * r2;\n    var left = r1Pow * r2Pow - r1Pow * y * y - r2Pow * x * x;\n    var right = r1Pow * y * y + r2Pow * x * x;\n    var k = sign * Math.sqrt(Math.abs(left / right));\n    cx = k * r1 * y / r2 + (x1 + x2) / 2;\n    cy = k * -r2 * x / r1 + (y1 + y2) / 2;\n    f1 = Math.asin(parseFloat(((y1 - cy) / r2).toFixed(9)));\n    f2 = Math.asin(parseFloat(((y2 - cy) / r2).toFixed(9)));\n\n    if (x1 < cx) {\n      f1 = Math.PI - f1;\n    }\n\n    if (x2 < cx) {\n      f2 = Math.PI - f2;\n    }\n\n    if (f1 < 0) {\n      f1 = Math.PI * 2 + f1;\n    }\n\n    if (f2 < 0) {\n      f2 = Math.PI * 2 + f2;\n    }\n\n    if (sweepFlag && f1 > f2) {\n      f1 = f1 - Math.PI * 2;\n    }\n\n    if (!sweepFlag && f2 > f1) {\n      f2 = f2 - Math.PI * 2;\n    }\n  }\n\n  var df = f2 - f1;\n\n  if (Math.abs(df) > Math.PI * 120 / 180) {\n    var f2old = f2;\n    var x2old = x2;\n    var y2old = y2;\n\n    if (sweepFlag && f2 > f1) {\n      f2 = f1 + Math.PI * 120 / 180 * 1;\n    } else {\n      f2 = f1 + Math.PI * 120 / 180 * -1;\n    }\n\n    x2 = cx + r1 * Math.cos(f2);\n    y2 = cy + r2 * Math.sin(f2);\n    params = arcToCubicCurves(x2, y2, x2old, y2old, r1, r2, angle, 0, sweepFlag, [f2, f2old, cx, cy]);\n  }\n\n  df = f2 - f1;\n  var c1 = Math.cos(f1);\n  var s1 = Math.sin(f1);\n  var c2 = Math.cos(f2);\n  var s2 = Math.sin(f2);\n  var t = Math.tan(df / 4);\n  var hx = 4 / 3 * r1 * t;\n  var hy = 4 / 3 * r2 * t;\n  var m1 = [x1, y1];\n  var m2 = [x1 + hx * s1, y1 - hy * c1];\n  var m3 = [x2 + hx * s2, y2 - hy * c2];\n  var m4 = [x2, y2];\n  m2[0] = 2 * m1[0] - m2[0];\n  m2[1] = 2 * m1[1] - m2[1];\n\n  if (recursive) {\n    return [m2, m3, m4].concat(params);\n  } else {\n    params = [m2, m3, m4].concat(params);\n    var curves = [];\n\n    for (var i = 0; i < params.length; i += 3) {\n      var _r = rotate(params[i][0], params[i][1], angleRad);\n\n      var _r2 = rotate(params[i + 1][0], params[i + 1][1], angleRad);\n\n      var r3 = rotate(params[i + 2][0], params[i + 2][1], angleRad);\n      curves.push([_r[0], _r[1], _r2[0], _r2[1], r3[0], r3[1]]);\n    }\n\n    return curves;\n  }\n}","import _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { getFiller } from './fillers/filler.js';\nimport { Random } from './math.js';\nimport { parsePath, normalize, absolutize } from 'path-data-parser';\nvar helper = {\n  randOffset: randOffset,\n  randOffsetWithRange: randOffsetWithRange,\n  ellipse: ellipse,\n  doubleLineOps: doubleLineFillOps\n};\nexport function line(x1, y1, x2, y2, o) {\n  return {\n    type: 'path',\n    ops: _doubleLine(x1, y1, x2, y2, o)\n  };\n}\nexport function linearPath(points, close, o) {\n  var len = (points || []).length;\n\n  if (len > 2) {\n    var ops = [];\n\n    for (var i = 0; i < len - 1; i++) {\n      ops.push.apply(ops, _toConsumableArray(_doubleLine(points[i][0], points[i][1], points[i + 1][0], points[i + 1][1], o)));\n    }\n\n    if (close) {\n      ops.push.apply(ops, _toConsumableArray(_doubleLine(points[len - 1][0], points[len - 1][1], points[0][0], points[0][1], o)));\n    }\n\n    return {\n      type: 'path',\n      ops: ops\n    };\n  } else if (len === 2) {\n    return line(points[0][0], points[0][1], points[1][0], points[1][1], o);\n  }\n\n  return {\n    type: 'path',\n    ops: []\n  };\n}\nexport function polygon(points, o) {\n  return linearPath(points, true, o);\n}\nexport function rectangle(x, y, width, height, o) {\n  var points = [[x, y], [x + width, y], [x + width, y + height], [x, y + height]];\n  return polygon(points, o);\n}\nexport function curve(points, o) {\n  var o1 = _curveWithOffset(points, 1 * (1 + o.roughness * 0.2), o);\n\n  if (!o.disableMultiStroke) {\n    var o2 = _curveWithOffset(points, 1.5 * (1 + o.roughness * 0.22), cloneOptionsAlterSeed(o));\n\n    o1 = o1.concat(o2);\n  }\n\n  return {\n    type: 'path',\n    ops: o1\n  };\n}\nexport function ellipse(x, y, width, height, o) {\n  var params = generateEllipseParams(width, height, o);\n  return ellipseWithParams(x, y, o, params).opset;\n}\nexport function generateEllipseParams(width, height, o) {\n  var psq = Math.sqrt(Math.PI * 2 * Math.sqrt((Math.pow(width / 2, 2) + Math.pow(height / 2, 2)) / 2));\n  var stepCount = Math.ceil(Math.max(o.curveStepCount, o.curveStepCount / Math.sqrt(200) * psq));\n  var increment = Math.PI * 2 / stepCount;\n  var rx = Math.abs(width / 2);\n  var ry = Math.abs(height / 2);\n  var curveFitRandomness = 1 - o.curveFitting;\n  rx += _offsetOpt(rx * curveFitRandomness, o);\n  ry += _offsetOpt(ry * curveFitRandomness, o);\n  return {\n    increment: increment,\n    rx: rx,\n    ry: ry\n  };\n}\nexport function ellipseWithParams(x, y, o, ellipseParams) {\n  var _computeEllipsePoints2 = _computeEllipsePoints(ellipseParams.increment, x, y, ellipseParams.rx, ellipseParams.ry, 1, ellipseParams.increment * _offset(0.1, _offset(0.4, 1, o), o), o),\n      _computeEllipsePoints3 = _slicedToArray(_computeEllipsePoints2, 2),\n      ap1 = _computeEllipsePoints3[0],\n      cp1 = _computeEllipsePoints3[1];\n\n  var o1 = _curve(ap1, null, o);\n\n  if (!o.disableMultiStroke && o.roughness !== 0) {\n    var _computeEllipsePoints4 = _computeEllipsePoints(ellipseParams.increment, x, y, ellipseParams.rx, ellipseParams.ry, 1.5, 0, o),\n        _computeEllipsePoints5 = _slicedToArray(_computeEllipsePoints4, 1),\n        ap2 = _computeEllipsePoints5[0];\n\n    var o2 = _curve(ap2, null, o);\n\n    o1 = o1.concat(o2);\n  }\n\n  return {\n    estimatedPoints: cp1,\n    opset: {\n      type: 'path',\n      ops: o1\n    }\n  };\n}\nexport function arc(x, y, width, height, start, stop, closed, roughClosure, o) {\n  var cx = x;\n  var cy = y;\n  var rx = Math.abs(width / 2);\n  var ry = Math.abs(height / 2);\n  rx += _offsetOpt(rx * 0.01, o);\n  ry += _offsetOpt(ry * 0.01, o);\n  var strt = start;\n  var stp = stop;\n\n  while (strt < 0) {\n    strt += Math.PI * 2;\n    stp += Math.PI * 2;\n  }\n\n  if (stp - strt > Math.PI * 2) {\n    strt = 0;\n    stp = Math.PI * 2;\n  }\n\n  var ellipseInc = Math.PI * 2 / o.curveStepCount;\n  var arcInc = Math.min(ellipseInc / 2, (stp - strt) / 2);\n\n  var ops = _arc(arcInc, cx, cy, rx, ry, strt, stp, 1, o);\n\n  if (!o.disableMultiStroke) {\n    var o2 = _arc(arcInc, cx, cy, rx, ry, strt, stp, 1.5, o);\n\n    ops.push.apply(ops, _toConsumableArray(o2));\n  }\n\n  if (closed) {\n    if (roughClosure) {\n      ops.push.apply(ops, _toConsumableArray(_doubleLine(cx, cy, cx + rx * Math.cos(strt), cy + ry * Math.sin(strt), o)).concat(_toConsumableArray(_doubleLine(cx, cy, cx + rx * Math.cos(stp), cy + ry * Math.sin(stp), o))));\n    } else {\n      ops.push({\n        op: 'lineTo',\n        data: [cx, cy]\n      }, {\n        op: 'lineTo',\n        data: [cx + rx * Math.cos(strt), cy + ry * Math.sin(strt)]\n      });\n    }\n  }\n\n  return {\n    type: 'path',\n    ops: ops\n  };\n}\nexport function svgPath(path, o) {\n  var segments = normalize(absolutize(parsePath(path)));\n  var ops = [];\n  var first = [0, 0];\n  var current = [0, 0];\n\n  var _iterator = _createForOfIteratorHelper(segments),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n\n      switch (key) {\n        case 'M':\n          {\n            var _ret = function () {\n              var ro = 1 * (o.maxRandomnessOffset || 0);\n              var pv = o.preserveVertices;\n              ops.push({\n                op: 'move',\n                data: data.map(function (d) {\n                  return d + (pv ? 0 : _offsetOpt(ro, o));\n                })\n              });\n              current = [data[0], data[1]];\n              first = [data[0], data[1]];\n              return \"break\";\n            }();\n\n            if (_ret === \"break\") break;\n          }\n\n        case 'L':\n          ops.push.apply(ops, _toConsumableArray(_doubleLine(current[0], current[1], data[0], data[1], o)));\n          current = [data[0], data[1]];\n          break;\n\n        case 'C':\n          {\n            var _data = _slicedToArray(data, 6),\n                x1 = _data[0],\n                y1 = _data[1],\n                x2 = _data[2],\n                y2 = _data[3],\n                x = _data[4],\n                y = _data[5];\n\n            ops.push.apply(ops, _toConsumableArray(_bezierTo(x1, y1, x2, y2, x, y, current, o)));\n            current = [x, y];\n            break;\n          }\n\n        case 'Z':\n          ops.push.apply(ops, _toConsumableArray(_doubleLine(current[0], current[1], first[0], first[1], o)));\n          current = [first[0], first[1]];\n          break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return {\n    type: 'path',\n    ops: ops\n  };\n} // Fills\n\nexport function solidFillPolygon(polygonList, o) {\n  var ops = [];\n\n  var _iterator2 = _createForOfIteratorHelper(polygonList),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var points = _step2.value;\n\n      if (points.length) {\n        var offset = o.maxRandomnessOffset || 0;\n        var len = points.length;\n\n        if (len > 2) {\n          ops.push({\n            op: 'move',\n            data: [points[0][0] + _offsetOpt(offset, o), points[0][1] + _offsetOpt(offset, o)]\n          });\n\n          for (var i = 1; i < len; i++) {\n            ops.push({\n              op: 'lineTo',\n              data: [points[i][0] + _offsetOpt(offset, o), points[i][1] + _offsetOpt(offset, o)]\n            });\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return {\n    type: 'fillPath',\n    ops: ops\n  };\n}\nexport function patternFillPolygons(polygonList, o) {\n  return getFiller(o, helper).fillPolygons(polygonList, o);\n}\nexport function patternFillArc(x, y, width, height, start, stop, o) {\n  var cx = x;\n  var cy = y;\n  var rx = Math.abs(width / 2);\n  var ry = Math.abs(height / 2);\n  rx += _offsetOpt(rx * 0.01, o);\n  ry += _offsetOpt(ry * 0.01, o);\n  var strt = start;\n  var stp = stop;\n\n  while (strt < 0) {\n    strt += Math.PI * 2;\n    stp += Math.PI * 2;\n  }\n\n  if (stp - strt > Math.PI * 2) {\n    strt = 0;\n    stp = Math.PI * 2;\n  }\n\n  var increment = (stp - strt) / o.curveStepCount;\n  var points = [];\n\n  for (var angle = strt; angle <= stp; angle = angle + increment) {\n    points.push([cx + rx * Math.cos(angle), cy + ry * Math.sin(angle)]);\n  }\n\n  points.push([cx + rx * Math.cos(stp), cy + ry * Math.sin(stp)]);\n  points.push([cx, cy]);\n  return patternFillPolygons([points], o);\n}\nexport function randOffset(x, o) {\n  return _offsetOpt(x, o);\n}\nexport function randOffsetWithRange(min, max, o) {\n  return _offset(min, max, o);\n}\nexport function doubleLineFillOps(x1, y1, x2, y2, o) {\n  return _doubleLine(x1, y1, x2, y2, o, true);\n} // Private helpers\n\nfunction cloneOptionsAlterSeed(ops) {\n  var result = Object.assign({}, ops);\n  result.randomizer = undefined;\n\n  if (ops.seed) {\n    result.seed = ops.seed + 1;\n  }\n\n  return result;\n}\n\nfunction random(ops) {\n  if (!ops.randomizer) {\n    ops.randomizer = new Random(ops.seed || 0);\n  }\n\n  return ops.randomizer.next();\n}\n\nfunction _offset(min, max, ops) {\n  var roughnessGain = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  return ops.roughness * roughnessGain * (random(ops) * (max - min) + min);\n}\n\nfunction _offsetOpt(x, ops) {\n  var roughnessGain = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  return _offset(-x, x, ops, roughnessGain);\n}\n\nfunction _doubleLine(x1, y1, x2, y2, o) {\n  var filling = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n  var singleStroke = filling ? o.disableMultiStrokeFill : o.disableMultiStroke;\n\n  var o1 = _line(x1, y1, x2, y2, o, true, false);\n\n  if (singleStroke) {\n    return o1;\n  }\n\n  var o2 = _line(x1, y1, x2, y2, o, true, true);\n\n  return o1.concat(o2);\n}\n\nfunction _line(x1, y1, x2, y2, o, move, overlay) {\n  var lengthSq = Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2);\n  var length = Math.sqrt(lengthSq);\n  var roughnessGain = 1;\n\n  if (length < 200) {\n    roughnessGain = 1;\n  } else if (length > 500) {\n    roughnessGain = 0.4;\n  } else {\n    roughnessGain = -0.0016668 * length + 1.233334;\n  }\n\n  var offset = o.maxRandomnessOffset || 0;\n\n  if (offset * offset * 100 > lengthSq) {\n    offset = length / 10;\n  }\n\n  var halfOffset = offset / 2;\n  var divergePoint = 0.2 + random(o) * 0.2;\n  var midDispX = o.bowing * o.maxRandomnessOffset * (y2 - y1) / 200;\n  var midDispY = o.bowing * o.maxRandomnessOffset * (x1 - x2) / 200;\n  midDispX = _offsetOpt(midDispX, o, roughnessGain);\n  midDispY = _offsetOpt(midDispY, o, roughnessGain);\n  var ops = [];\n\n  var randomHalf = function randomHalf() {\n    return _offsetOpt(halfOffset, o, roughnessGain);\n  };\n\n  var randomFull = function randomFull() {\n    return _offsetOpt(offset, o, roughnessGain);\n  };\n\n  var preserveVertices = o.preserveVertices;\n\n  if (move) {\n    if (overlay) {\n      ops.push({\n        op: 'move',\n        data: [x1 + (preserveVertices ? 0 : randomHalf()), y1 + (preserveVertices ? 0 : randomHalf())]\n      });\n    } else {\n      ops.push({\n        op: 'move',\n        data: [x1 + (preserveVertices ? 0 : _offsetOpt(offset, o, roughnessGain)), y1 + (preserveVertices ? 0 : _offsetOpt(offset, o, roughnessGain))]\n      });\n    }\n  }\n\n  if (overlay) {\n    ops.push({\n      op: 'bcurveTo',\n      data: [midDispX + x1 + (x2 - x1) * divergePoint + randomHalf(), midDispY + y1 + (y2 - y1) * divergePoint + randomHalf(), midDispX + x1 + 2 * (x2 - x1) * divergePoint + randomHalf(), midDispY + y1 + 2 * (y2 - y1) * divergePoint + randomHalf(), x2 + (preserveVertices ? 0 : randomHalf()), y2 + (preserveVertices ? 0 : randomHalf())]\n    });\n  } else {\n    ops.push({\n      op: 'bcurveTo',\n      data: [midDispX + x1 + (x2 - x1) * divergePoint + randomFull(), midDispY + y1 + (y2 - y1) * divergePoint + randomFull(), midDispX + x1 + 2 * (x2 - x1) * divergePoint + randomFull(), midDispY + y1 + 2 * (y2 - y1) * divergePoint + randomFull(), x2 + (preserveVertices ? 0 : randomFull()), y2 + (preserveVertices ? 0 : randomFull())]\n    });\n  }\n\n  return ops;\n}\n\nfunction _curveWithOffset(points, offset, o) {\n  var ps = [];\n  ps.push([points[0][0] + _offsetOpt(offset, o), points[0][1] + _offsetOpt(offset, o)]);\n  ps.push([points[0][0] + _offsetOpt(offset, o), points[0][1] + _offsetOpt(offset, o)]);\n\n  for (var i = 1; i < points.length; i++) {\n    ps.push([points[i][0] + _offsetOpt(offset, o), points[i][1] + _offsetOpt(offset, o)]);\n\n    if (i === points.length - 1) {\n      ps.push([points[i][0] + _offsetOpt(offset, o), points[i][1] + _offsetOpt(offset, o)]);\n    }\n  }\n\n  return _curve(ps, null, o);\n}\n\nfunction _curve(points, closePoint, o) {\n  var len = points.length;\n  var ops = [];\n\n  if (len > 3) {\n    var b = [];\n    var s = 1 - o.curveTightness;\n    ops.push({\n      op: 'move',\n      data: [points[1][0], points[1][1]]\n    });\n\n    for (var i = 1; i + 2 < len; i++) {\n      var cachedVertArray = points[i];\n      b[0] = [cachedVertArray[0], cachedVertArray[1]];\n      b[1] = [cachedVertArray[0] + (s * points[i + 1][0] - s * points[i - 1][0]) / 6, cachedVertArray[1] + (s * points[i + 1][1] - s * points[i - 1][1]) / 6];\n      b[2] = [points[i + 1][0] + (s * points[i][0] - s * points[i + 2][0]) / 6, points[i + 1][1] + (s * points[i][1] - s * points[i + 2][1]) / 6];\n      b[3] = [points[i + 1][0], points[i + 1][1]];\n      ops.push({\n        op: 'bcurveTo',\n        data: [b[1][0], b[1][1], b[2][0], b[2][1], b[3][0], b[3][1]]\n      });\n    }\n\n    if (closePoint && closePoint.length === 2) {\n      var ro = o.maxRandomnessOffset;\n      ops.push({\n        op: 'lineTo',\n        data: [closePoint[0] + _offsetOpt(ro, o), closePoint[1] + _offsetOpt(ro, o)]\n      });\n    }\n  } else if (len === 3) {\n    ops.push({\n      op: 'move',\n      data: [points[1][0], points[1][1]]\n    });\n    ops.push({\n      op: 'bcurveTo',\n      data: [points[1][0], points[1][1], points[2][0], points[2][1], points[2][0], points[2][1]]\n    });\n  } else if (len === 2) {\n    ops.push.apply(ops, _toConsumableArray(_doubleLine(points[0][0], points[0][1], points[1][0], points[1][1], o)));\n  }\n\n  return ops;\n}\n\nfunction _computeEllipsePoints(increment, cx, cy, rx, ry, offset, overlap, o) {\n  var coreOnly = o.roughness === 0;\n  var corePoints = [];\n  var allPoints = [];\n\n  if (coreOnly) {\n    increment = increment / 4;\n    allPoints.push([cx + rx * Math.cos(-increment), cy + ry * Math.sin(-increment)]);\n\n    for (var angle = 0; angle <= Math.PI * 2; angle = angle + increment) {\n      var p = [cx + rx * Math.cos(angle), cy + ry * Math.sin(angle)];\n      corePoints.push(p);\n      allPoints.push(p);\n    }\n\n    allPoints.push([cx + rx * Math.cos(0), cy + ry * Math.sin(0)]);\n    allPoints.push([cx + rx * Math.cos(increment), cy + ry * Math.sin(increment)]);\n  } else {\n    var radOffset = _offsetOpt(0.5, o) - Math.PI / 2;\n    allPoints.push([_offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment), _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment)]);\n    var endAngle = Math.PI * 2 + radOffset - 0.01;\n\n    for (var _angle = radOffset; _angle < endAngle; _angle = _angle + increment) {\n      var _p = [_offsetOpt(offset, o) + cx + rx * Math.cos(_angle), _offsetOpt(offset, o) + cy + ry * Math.sin(_angle)];\n      corePoints.push(_p);\n      allPoints.push(_p);\n    }\n\n    allPoints.push([_offsetOpt(offset, o) + cx + rx * Math.cos(radOffset + Math.PI * 2 + overlap * 0.5), _offsetOpt(offset, o) + cy + ry * Math.sin(radOffset + Math.PI * 2 + overlap * 0.5)]);\n    allPoints.push([_offsetOpt(offset, o) + cx + 0.98 * rx * Math.cos(radOffset + overlap), _offsetOpt(offset, o) + cy + 0.98 * ry * Math.sin(radOffset + overlap)]);\n    allPoints.push([_offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset + overlap * 0.5), _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset + overlap * 0.5)]);\n  }\n\n  return [allPoints, corePoints];\n}\n\nfunction _arc(increment, cx, cy, rx, ry, strt, stp, offset, o) {\n  var radOffset = strt + _offsetOpt(0.1, o);\n\n  var points = [];\n  points.push([_offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment), _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment)]);\n\n  for (var angle = radOffset; angle <= stp; angle = angle + increment) {\n    points.push([_offsetOpt(offset, o) + cx + rx * Math.cos(angle), _offsetOpt(offset, o) + cy + ry * Math.sin(angle)]);\n  }\n\n  points.push([cx + rx * Math.cos(stp), cy + ry * Math.sin(stp)]);\n  points.push([cx + rx * Math.cos(stp), cy + ry * Math.sin(stp)]);\n  return _curve(points, null, o);\n}\n\nfunction _bezierTo(x1, y1, x2, y2, x, y, current, o) {\n  var ops = [];\n  var ros = [o.maxRandomnessOffset || 1, (o.maxRandomnessOffset || 1) + 0.3];\n  var f = [0, 0];\n  var iterations = o.disableMultiStroke ? 1 : 2;\n  var preserveVertices = o.preserveVertices;\n\n  for (var i = 0; i < iterations; i++) {\n    if (i === 0) {\n      ops.push({\n        op: 'move',\n        data: [current[0], current[1]]\n      });\n    } else {\n      ops.push({\n        op: 'move',\n        data: [current[0] + (preserveVertices ? 0 : _offsetOpt(ros[0], o)), current[1] + (preserveVertices ? 0 : _offsetOpt(ros[0], o))]\n      });\n    }\n\n    f = preserveVertices ? [x, y] : [x + _offsetOpt(ros[i], o), y + _offsetOpt(ros[i], o)];\n    ops.push({\n      op: 'bcurveTo',\n      data: [x1 + _offsetOpt(ros[i], o), y1 + _offsetOpt(ros[i], o), x2 + _offsetOpt(ros[i], o), y2 + _offsetOpt(ros[i], o), f[0], f[1]]\n    });\n  }\n\n  return ops;\n}","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction clone(p) {\n  return _toConsumableArray(p);\n}\n\nexport function curveToBezier(pointsIn) {\n  var curveTightness = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var len = pointsIn.length;\n\n  if (len < 3) {\n    throw new Error('A curve must have at least three points.');\n  }\n\n  var out = [];\n\n  if (len === 3) {\n    out.push(clone(pointsIn[0]), clone(pointsIn[1]), clone(pointsIn[2]), clone(pointsIn[2]));\n  } else {\n    var points = [];\n    points.push(pointsIn[0], pointsIn[0]);\n\n    for (var i = 1; i < pointsIn.length; i++) {\n      points.push(pointsIn[i]);\n\n      if (i === pointsIn.length - 1) {\n        points.push(pointsIn[i]);\n      }\n    }\n\n    var b = [];\n    var s = 1 - curveTightness;\n    out.push(clone(points[0]));\n\n    for (var _i = 1; _i + 2 < points.length; _i++) {\n      var cachedVertArray = points[_i];\n      b[0] = [cachedVertArray[0], cachedVertArray[1]];\n      b[1] = [cachedVertArray[0] + (s * points[_i + 1][0] - s * points[_i - 1][0]) / 6, cachedVertArray[1] + (s * points[_i + 1][1] - s * points[_i - 1][1]) / 6];\n      b[2] = [points[_i + 1][0] + (s * points[_i][0] - s * points[_i + 2][0]) / 6, points[_i + 1][1] + (s * points[_i][1] - s * points[_i + 2][1]) / 6];\n      b[3] = [points[_i + 1][0], points[_i + 1][1]];\n      out.push(b[1], b[2], b[3]);\n    }\n  }\n\n  return out;\n}","// distance between 2 points\nfunction distance(p1, p2) {\n  return Math.sqrt(distanceSq(p1, p2));\n} // distance between 2 points squared\n\n\nfunction distanceSq(p1, p2) {\n  return Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2);\n} // Sistance squared from a point p to the line segment vw\n\n\nfunction distanceToSegmentSq(p, v, w) {\n  var l2 = distanceSq(v, w);\n\n  if (l2 === 0) {\n    return distanceSq(p, v);\n  }\n\n  var t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n  t = Math.max(0, Math.min(1, t));\n  return distanceSq(p, lerp(v, w, t));\n}\n\nfunction lerp(a, b, t) {\n  return [a[0] + (b[0] - a[0]) * t, a[1] + (b[1] - a[1]) * t];\n} // Adapted from https://seant23.wordpress.com/2010/11/12/offset-bezier-curves/\n\n\nfunction flatness(points, offset) {\n  var p1 = points[offset + 0];\n  var p2 = points[offset + 1];\n  var p3 = points[offset + 2];\n  var p4 = points[offset + 3];\n  var ux = 3 * p2[0] - 2 * p1[0] - p4[0];\n  ux *= ux;\n  var uy = 3 * p2[1] - 2 * p1[1] - p4[1];\n  uy *= uy;\n  var vx = 3 * p3[0] - 2 * p4[0] - p1[0];\n  vx *= vx;\n  var vy = 3 * p3[1] - 2 * p4[1] - p1[1];\n  vy *= vy;\n\n  if (ux < vx) {\n    ux = vx;\n  }\n\n  if (uy < vy) {\n    uy = vy;\n  }\n\n  return ux + uy;\n}\n\nfunction getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints) {\n  var outPoints = newPoints || [];\n\n  if (flatness(points, offset) < tolerance) {\n    var p0 = points[offset + 0];\n\n    if (outPoints.length) {\n      var d = distance(outPoints[outPoints.length - 1], p0);\n\n      if (d > 1) {\n        outPoints.push(p0);\n      }\n    } else {\n      outPoints.push(p0);\n    }\n\n    outPoints.push(points[offset + 3]);\n  } else {\n    // subdivide\n    var t = .5;\n    var p1 = points[offset + 0];\n    var p2 = points[offset + 1];\n    var p3 = points[offset + 2];\n    var p4 = points[offset + 3];\n    var q1 = lerp(p1, p2, t);\n    var q2 = lerp(p2, p3, t);\n    var q3 = lerp(p3, p4, t);\n    var r1 = lerp(q1, q2, t);\n    var r2 = lerp(q2, q3, t);\n    var red = lerp(r1, r2, t);\n    getPointsOnBezierCurveWithSplitting([p1, q1, r1, red], 0, tolerance, outPoints);\n    getPointsOnBezierCurveWithSplitting([red, r2, q3, p4], 0, tolerance, outPoints);\n  }\n\n  return outPoints;\n}\n\nexport function simplify(points, distance) {\n  return simplifyPoints(points, 0, points.length, distance);\n} // RamerDouglasPeucker algorithm\n// https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm\n\nfunction simplifyPoints(points, start, end, epsilon, newPoints) {\n  var outPoints = newPoints || []; // find the most distance point from the endpoints\n\n  var s = points[start];\n  var e = points[end - 1];\n  var maxDistSq = 0;\n  var maxNdx = 1;\n\n  for (var i = start + 1; i < end - 1; ++i) {\n    var distSq = distanceToSegmentSq(points[i], s, e);\n\n    if (distSq > maxDistSq) {\n      maxDistSq = distSq;\n      maxNdx = i;\n    }\n  } // if that point is too far, split\n\n\n  if (Math.sqrt(maxDistSq) > epsilon) {\n    simplifyPoints(points, start, maxNdx + 1, epsilon, outPoints);\n    simplifyPoints(points, maxNdx, end, epsilon, outPoints);\n  } else {\n    if (!outPoints.length) {\n      outPoints.push(s);\n    }\n\n    outPoints.push(e);\n  }\n\n  return outPoints;\n}\n\nexport function pointsOnBezierCurves(points) {\n  var tolerance = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.15;\n  var distance = arguments.length > 2 ? arguments[2] : undefined;\n  var newPoints = [];\n  var numSegments = (points.length - 1) / 3;\n\n  for (var i = 0; i < numSegments; i++) {\n    var offset = i * 3;\n    getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints);\n  }\n\n  if (distance && distance > 0) {\n    return simplifyPoints(newPoints, 0, newPoints.length, distance);\n  }\n\n  return newPoints;\n}","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { pointsOnBezierCurves, simplify } from 'points-on-curve';\nimport { parsePath, absolutize, normalize } from 'path-data-parser';\nexport function pointsOnPath(path, tolerance, distance) {\n  var segments = parsePath(path);\n  var normalized = normalize(absolutize(segments));\n  var sets = [];\n  var currentPoints = [];\n  var start = [0, 0];\n  var pendingCurve = [];\n\n  var appendPendingCurve = function appendPendingCurve() {\n    if (pendingCurve.length >= 4) {\n      var _currentPoints;\n\n      (_currentPoints = currentPoints).push.apply(_currentPoints, _toConsumableArray(pointsOnBezierCurves(pendingCurve, tolerance)));\n    }\n\n    pendingCurve = [];\n  };\n\n  var appendPendingPoints = function appendPendingPoints() {\n    appendPendingCurve();\n\n    if (currentPoints.length) {\n      sets.push(currentPoints);\n      currentPoints = [];\n    }\n  };\n\n  var _iterator = _createForOfIteratorHelper(normalized),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n\n      switch (key) {\n        case 'M':\n          appendPendingPoints();\n          start = [data[0], data[1]];\n          currentPoints.push(start);\n          break;\n\n        case 'L':\n          appendPendingCurve();\n          currentPoints.push([data[0], data[1]]);\n          break;\n\n        case 'C':\n          if (!pendingCurve.length) {\n            var lastPoint = currentPoints.length ? currentPoints[currentPoints.length - 1] : start;\n            pendingCurve.push([lastPoint[0], lastPoint[1]]);\n          }\n\n          pendingCurve.push([data[0], data[1]]);\n          pendingCurve.push([data[2], data[3]]);\n          pendingCurve.push([data[4], data[5]]);\n          break;\n\n        case 'Z':\n          appendPendingCurve();\n          currentPoints.push([start[0], start[1]]);\n          break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  appendPendingPoints();\n\n  if (!distance) {\n    return sets;\n  }\n\n  var out = [];\n\n  for (var _i = 0, _sets = sets; _i < _sets.length; _i++) {\n    var set = _sets[_i];\n    var simplifiedSet = simplify(set, distance);\n\n    if (simplifiedSet.length) {\n      out.push(simplifiedSet);\n    }\n  }\n\n  return out;\n}","import _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { line as _line, solidFillPolygon, patternFillPolygons, rectangle as _rectangle, ellipseWithParams, generateEllipseParams, linearPath as _linearPath, arc as _arc, patternFillArc, curve as _curve, svgPath } from './renderer.js';\nimport { randomSeed } from './math.js';\nimport { curveToBezier } from 'points-on-curve/lib/curve-to-bezier.js';\nimport { pointsOnBezierCurves } from 'points-on-curve';\nimport { pointsOnPath } from 'points-on-path';\nvar NOS = 'none';\nexport var RoughGenerator = /*#__PURE__*/function () {\n  function RoughGenerator(config) {\n    _classCallCheck(this, RoughGenerator);\n\n    this.defaultOptions = {\n      maxRandomnessOffset: 2,\n      roughness: 1,\n      bowing: 1,\n      stroke: '#000',\n      strokeWidth: 1,\n      curveTightness: 0,\n      curveFitting: 0.95,\n      curveStepCount: 9,\n      fillStyle: 'hachure',\n      fillWeight: -1,\n      hachureAngle: -41,\n      hachureGap: -1,\n      dashOffset: -1,\n      dashGap: -1,\n      zigzagOffset: -1,\n      seed: 0,\n      disableMultiStroke: false,\n      disableMultiStrokeFill: false,\n      preserveVertices: false\n    };\n    this.config = config || {};\n\n    if (this.config.options) {\n      this.defaultOptions = this._o(this.config.options);\n    }\n  }\n\n  _createClass(RoughGenerator, [{\n    key: \"_o\",\n    value: function _o(options) {\n      return options ? Object.assign({}, this.defaultOptions, options) : this.defaultOptions;\n    }\n  }, {\n    key: \"_d\",\n    value: function _d(shape, sets, options) {\n      return {\n        shape: shape,\n        sets: sets || [],\n        options: options || this.defaultOptions\n      };\n    }\n  }, {\n    key: \"line\",\n    value: function line(x1, y1, x2, y2, options) {\n      var o = this._o(options);\n\n      return this._d('line', [_line(x1, y1, x2, y2, o)], o);\n    }\n  }, {\n    key: \"rectangle\",\n    value: function rectangle(x, y, width, height, options) {\n      var o = this._o(options);\n\n      var paths = [];\n\n      var outline = _rectangle(x, y, width, height, o);\n\n      if (o.fill) {\n        var points = [[x, y], [x + width, y], [x + width, y + height], [x, y + height]];\n\n        if (o.fillStyle === 'solid') {\n          paths.push(solidFillPolygon([points], o));\n        } else {\n          paths.push(patternFillPolygons([points], o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(outline);\n      }\n\n      return this._d('rectangle', paths, o);\n    }\n  }, {\n    key: \"ellipse\",\n    value: function ellipse(x, y, width, height, options) {\n      var o = this._o(options);\n\n      var paths = [];\n      var ellipseParams = generateEllipseParams(width, height, o);\n      var ellipseResponse = ellipseWithParams(x, y, o, ellipseParams);\n\n      if (o.fill) {\n        if (o.fillStyle === 'solid') {\n          var shape = ellipseWithParams(x, y, o, ellipseParams).opset;\n          shape.type = 'fillPath';\n          paths.push(shape);\n        } else {\n          paths.push(patternFillPolygons([ellipseResponse.estimatedPoints], o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(ellipseResponse.opset);\n      }\n\n      return this._d('ellipse', paths, o);\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(x, y, diameter, options) {\n      var ret = this.ellipse(x, y, diameter, diameter, options);\n      ret.shape = 'circle';\n      return ret;\n    }\n  }, {\n    key: \"linearPath\",\n    value: function linearPath(points, options) {\n      var o = this._o(options);\n\n      return this._d('linearPath', [_linearPath(points, false, o)], o);\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(x, y, width, height, start, stop) {\n      var closed = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n      var options = arguments.length > 7 ? arguments[7] : undefined;\n\n      var o = this._o(options);\n\n      var paths = [];\n\n      var outline = _arc(x, y, width, height, start, stop, closed, true, o);\n\n      if (closed && o.fill) {\n        if (o.fillStyle === 'solid') {\n          var fillOptions = Object.assign({}, o);\n          fillOptions.disableMultiStroke = true;\n\n          var shape = _arc(x, y, width, height, start, stop, true, false, fillOptions);\n\n          shape.type = 'fillPath';\n          paths.push(shape);\n        } else {\n          paths.push(patternFillArc(x, y, width, height, start, stop, o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(outline);\n      }\n\n      return this._d('arc', paths, o);\n    }\n  }, {\n    key: \"curve\",\n    value: function curve(points, options) {\n      var o = this._o(options);\n\n      var paths = [];\n\n      var outline = _curve(points, o);\n\n      if (o.fill && o.fill !== NOS && points.length >= 3) {\n        var bcurve = curveToBezier(points);\n        var polyPoints = pointsOnBezierCurves(bcurve, 10, (1 + o.roughness) / 2);\n\n        if (o.fillStyle === 'solid') {\n          paths.push(solidFillPolygon([polyPoints], o));\n        } else {\n          paths.push(patternFillPolygons([polyPoints], o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(outline);\n      }\n\n      return this._d('curve', paths, o);\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(points, options) {\n      var o = this._o(options);\n\n      var paths = [];\n\n      var outline = _linearPath(points, true, o);\n\n      if (o.fill) {\n        if (o.fillStyle === 'solid') {\n          paths.push(solidFillPolygon([points], o));\n        } else {\n          paths.push(patternFillPolygons([points], o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(outline);\n      }\n\n      return this._d('polygon', paths, o);\n    }\n  }, {\n    key: \"path\",\n    value: function path(d, options) {\n      var o = this._o(options);\n\n      var paths = [];\n\n      if (!d) {\n        return this._d('path', paths, o);\n      }\n\n      d = (d || '').replace(/\\n/g, ' ').replace(/(-\\s)/g, '-').replace('/(\\s\\s)/g', ' ');\n      var hasFill = o.fill && o.fill !== 'transparent' && o.fill !== NOS;\n      var hasStroke = o.stroke !== NOS;\n      var simplified = !!(o.simplification && o.simplification < 1);\n      var distance = simplified ? 4 - 4 * o.simplification : (1 + o.roughness) / 2;\n      var sets = pointsOnPath(d, 1, distance);\n\n      if (hasFill) {\n        if (o.fillStyle === 'solid') {\n          paths.push(solidFillPolygon(sets, o));\n        } else {\n          paths.push(patternFillPolygons(sets, o));\n        }\n      }\n\n      if (hasStroke) {\n        if (simplified) {\n          sets.forEach(function (set) {\n            paths.push(_linearPath(set, false, o));\n          });\n        } else {\n          paths.push(svgPath(d, o));\n        }\n      }\n\n      return this._d('path', paths, o);\n    }\n  }, {\n    key: \"opsToPath\",\n    value: function opsToPath(drawing, fixedDecimals) {\n      var path = '';\n\n      var _iterator = _createForOfIteratorHelper(drawing.ops),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var item = _step.value;\n          var data = typeof fixedDecimals === 'number' && fixedDecimals >= 0 ? item.data.map(function (d) {\n            return +d.toFixed(fixedDecimals);\n          }) : item.data;\n\n          switch (item.op) {\n            case 'move':\n              path += \"M\".concat(data[0], \" \").concat(data[1], \" \");\n              break;\n\n            case 'bcurveTo':\n              path += \"C\".concat(data[0], \" \").concat(data[1], \", \").concat(data[2], \" \").concat(data[3], \", \").concat(data[4], \" \").concat(data[5], \" \");\n              break;\n\n            case 'lineTo':\n              path += \"L\".concat(data[0], \" \").concat(data[1], \" \");\n              break;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return path.trim();\n    }\n  }, {\n    key: \"toPaths\",\n    value: function toPaths(drawable) {\n      var sets = drawable.sets || [];\n      var o = drawable.options || this.defaultOptions;\n      var paths = [];\n\n      var _iterator2 = _createForOfIteratorHelper(sets),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var drawing = _step2.value;\n          var path = null;\n\n          switch (drawing.type) {\n            case 'path':\n              path = {\n                d: this.opsToPath(drawing),\n                stroke: o.stroke,\n                strokeWidth: o.strokeWidth,\n                fill: NOS\n              };\n              break;\n\n            case 'fillPath':\n              path = {\n                d: this.opsToPath(drawing),\n                stroke: NOS,\n                strokeWidth: 0,\n                fill: o.fill || NOS\n              };\n              break;\n\n            case 'fillSketch':\n              path = this.fillSketch(drawing, o);\n              break;\n          }\n\n          if (path) {\n            paths.push(path);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return paths;\n    }\n  }, {\n    key: \"fillSketch\",\n    value: function fillSketch(drawing, o) {\n      var fweight = o.fillWeight;\n\n      if (fweight < 0) {\n        fweight = o.strokeWidth / 2;\n      }\n\n      return {\n        d: this.opsToPath(drawing),\n        stroke: o.fill || NOS,\n        strokeWidth: fweight,\n        fill: NOS\n      };\n    }\n  }], [{\n    key: \"newSeed\",\n    value: function newSeed() {\n      return randomSeed();\n    }\n  }]);\n\n  return RoughGenerator;\n}();","import _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { RoughGenerator } from './generator';\nexport var RoughCanvas = /*#__PURE__*/function () {\n  function RoughCanvas(canvas, config) {\n    _classCallCheck(this, RoughCanvas);\n\n    this.canvas = canvas;\n    this.ctx = this.canvas.getContext('2d');\n    this.gen = new RoughGenerator(config);\n  }\n\n  _createClass(RoughCanvas, [{\n    key: \"draw\",\n    value: function draw(drawable) {\n      var sets = drawable.sets || [];\n      var o = drawable.options || this.getDefaultOptions();\n      var ctx = this.ctx;\n      var precision = drawable.options.fixedDecimalPlaceDigits;\n\n      var _iterator = _createForOfIteratorHelper(sets),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var drawing = _step.value;\n\n          switch (drawing.type) {\n            case 'path':\n              ctx.save();\n              ctx.strokeStyle = o.stroke === 'none' ? 'transparent' : o.stroke;\n              ctx.lineWidth = o.strokeWidth;\n\n              if (o.strokeLineDash) {\n                ctx.setLineDash(o.strokeLineDash);\n              }\n\n              if (o.strokeLineDashOffset) {\n                ctx.lineDashOffset = o.strokeLineDashOffset;\n              }\n\n              this._drawToContext(ctx, drawing, precision);\n\n              ctx.restore();\n              break;\n\n            case 'fillPath':\n              {\n                ctx.save();\n                ctx.fillStyle = o.fill || '';\n                var fillRule = drawable.shape === 'curve' || drawable.shape === 'polygon' || drawable.shape === 'path' ? 'evenodd' : 'nonzero';\n\n                this._drawToContext(ctx, drawing, precision, fillRule);\n\n                ctx.restore();\n                break;\n              }\n\n            case 'fillSketch':\n              this.fillSketch(ctx, drawing, o);\n              break;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"fillSketch\",\n    value: function fillSketch(ctx, drawing, o) {\n      var fweight = o.fillWeight;\n\n      if (fweight < 0) {\n        fweight = o.strokeWidth / 2;\n      }\n\n      ctx.save();\n\n      if (o.fillLineDash) {\n        ctx.setLineDash(o.fillLineDash);\n      }\n\n      if (o.fillLineDashOffset) {\n        ctx.lineDashOffset = o.fillLineDashOffset;\n      }\n\n      ctx.strokeStyle = o.fill || '';\n      ctx.lineWidth = fweight;\n\n      this._drawToContext(ctx, drawing, o.fixedDecimalPlaceDigits);\n\n      ctx.restore();\n    }\n  }, {\n    key: \"_drawToContext\",\n    value: function _drawToContext(ctx, drawing, fixedDecimals) {\n      var rule = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'nonzero';\n      ctx.beginPath();\n\n      var _iterator2 = _createForOfIteratorHelper(drawing.ops),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var item = _step2.value;\n          var data = typeof fixedDecimals === 'number' && fixedDecimals >= 0 ? item.data.map(function (d) {\n            return +d.toFixed(fixedDecimals);\n          }) : item.data;\n\n          switch (item.op) {\n            case 'move':\n              ctx.moveTo(data[0], data[1]);\n              break;\n\n            case 'bcurveTo':\n              ctx.bezierCurveTo(data[0], data[1], data[2], data[3], data[4], data[5]);\n              break;\n\n            case 'lineTo':\n              ctx.lineTo(data[0], data[1]);\n              break;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      if (drawing.type === 'fillPath') {\n        ctx.fill(rule);\n      } else {\n        ctx.stroke();\n      }\n    }\n  }, {\n    key: \"generator\",\n    get: function get() {\n      return this.gen;\n    }\n  }, {\n    key: \"getDefaultOptions\",\n    value: function getDefaultOptions() {\n      return this.gen.defaultOptions;\n    }\n  }, {\n    key: \"line\",\n    value: function line(x1, y1, x2, y2, options) {\n      var d = this.gen.line(x1, y1, x2, y2, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"rectangle\",\n    value: function rectangle(x, y, width, height, options) {\n      var d = this.gen.rectangle(x, y, width, height, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"ellipse\",\n    value: function ellipse(x, y, width, height, options) {\n      var d = this.gen.ellipse(x, y, width, height, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(x, y, diameter, options) {\n      var d = this.gen.circle(x, y, diameter, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"linearPath\",\n    value: function linearPath(points, options) {\n      var d = this.gen.linearPath(points, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(points, options) {\n      var d = this.gen.polygon(points, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(x, y, width, height, start, stop) {\n      var closed = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n      var options = arguments.length > 7 ? arguments[7] : undefined;\n      var d = this.gen.arc(x, y, width, height, start, stop, closed, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"curve\",\n    value: function curve(points, options) {\n      var d = this.gen.curve(points, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"path\",\n    value: function path(d, options) {\n      var drawing = this.gen.path(d, options);\n      this.draw(drawing);\n      return drawing;\n    }\n  }]);\n\n  return RoughCanvas;\n}();","import React, { useState, useEffect, useRef } from \"react\";\n\n\nexport function GetScroll() {\n  const prevScrollY = useRef(0)\n  const [goingUp, setGoingUp] = useState(false);\n\n  const handleScroll = () => {\n\n    const currentScrollY = window.scrollY;\n    if (prevScrollY.current < currentScrollY && goingUp) {\n      setGoingUp(false);\n    }\n    if (prevScrollY.current > currentScrollY && !goingUp) {\n      setGoingUp(true);\n    }\n    prevScrollY.current = currentScrollY;\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"scroll\", handleScroll());\n    return () => window.removeEventListener(\"scroll\", handleScroll);\n  }, [goingUp]);\n  return goingUp ? 'up' : 'down';\n}\n\n\n\nexport const usePrevious = (value, defaultRef) => {\n  const ref = useRef(defaultRef);\n  useEffect(() => {\n    ref.current = value;\n  });\n  return ref.current;\n};\n","// To fix canvas blurryness I used this: https://stackoverflow.com/questions/48961797/canvas-circle-looks-blurry\nimport { useEffect, useRef, useState, useMemo } from \"react\";\nimport { Delaunay } from \"d3-delaunay\";\nimport * as d3 from \"d3\";\nimport React from \"react\";\nimport { gsap } from \"gsap\";\nimport { isBrowser } from \"../../utils/staticRendering\";\nimport { dodge, dodgeMap } from \"../../utils/visualizationUtils\";\nimport * as RoughCanvas from \"roughjs/bin/canvas\";\nimport { usePrevious } from \"../../hooks/customHooks\";\nimport { RoughGenerator } from \"roughjs/bin/generator\";\n// import { select } from \"d3\";\n// import { withTheme } from \"styled-components\";\n\n// import * as RoughSvgfrom from \"roughjs/bin/svg\"\n\nconst ScrollySwarmDrawing = (\n  props,\n  {\n    pixelRatio = props.pixelRatio,\n    particles = props.particles,\n    height = props.height,\n    width = props.width,\n    margin = props.margin,\n    marginLeft = props.marginLeft,\n    circleColor = \"rgba(0,0,255,.3)\",\n    strokeColor = \"rgba(0,0,255,1)\",\n    animationDuration = 2,\n    lineWidth = 0,\n    padding = lineWidth,\n  }\n) => {\n  // const [complete, setComplete] = useState(true);\n  const prevDate = usePrevious(props.dateSelection, \"\");\n  // const [interuptedDate, setInturptedDate] = useState(prevDate);\n\n  const mainCanvasRef = useRef();\n  const axisRef = useRef();\n  const interactiveCanvasRef = useRef();\n\n  const rScale = d3\n    .scaleLinear()\n    .domain(d3.extent(particles, (d) => d[props.valueSelection]))\n    .range([1, height / 70]);\n\n  const xScale = (_, prevOrCurrent) =>\n    d3\n      .scaleSequential()\n      .domain(d3.extent(particles, (d) => d[prevOrCurrent]))\n      .range([marginLeft + margin, width]);\n\n  const r = (selectedValue) => rScale(selectedValue);\n\n  const tooltip =\n    isBrowser() && d3.select(\"#tooltipDivLight\").style(\"opacity\", 0);\n\n  function showTooltip(\n    tooltipX,\n    tooltipY,\n    readableValue,\n    readableDate,\n    readableFullDate\n  ) {\n    isBrowser() &&\n      tooltip\n        .style(\"opacity\", 1)\n        .style(\"display\", \"block\")\n        .style(\"top\", tooltipY + \"px\")\n        .style(\"left\", tooltipX + 30 - margin + \"px\")\n        .style(\"z-index\", 5000000)\n        .html(\n          `<div class =\"swarmTooltipText\">\n          <div>words written: <b>${readableValue}</b></div>\n          <div>${props.dateSelection}: <b>${formatTics(\n            props.dateSelection,\n            readableDate\n          )}</b></div>\n          <div><b>${readableFullDate}</b></div>\n          </div>`\n        );\n  }\n\n  // const delaunayPoints = (dateString, x, y) =>\n  //   Delaunay.from(dodgedParticlesDestination.map((d) => [d.x, d.y]));\n\n  const xAxisScale = d3\n    .scaleSequential()\n    .domain(d3.extent(particles, (d) => d[props.dateSelection]))\n    .range([marginLeft, width - margin]);\n\n  const formatWeek = (d) => {\n    if (d === 0) {\n      return \"Sun\";\n    }\n    if (d === 1) {\n      return \"Mon\";\n    }\n    if (d === 2) {\n      return \"Tues\";\n    }\n    if (d === 3) {\n      return \"Wed\";\n    }\n    if (d === 4) {\n      return \"Thurs\";\n    }\n    if (d === 5) {\n      return \"Fri\";\n    }\n    if (d === 6) {\n      return \"Sat\";\n    }\n    return d;\n  };\n\n  const formatMonth = (d) => {\n    if (d === 0) {\n      return \"Jan\";\n    }\n    if (d === 2) {\n      return \"Feb\";\n    }\n    if (d === 3) {\n      return \"Mar\";\n    }\n    if (d === 4) {\n      return \"Apr\";\n    }\n    if (d === 5) {\n      return \"May\";\n    }\n    if (d === 6) {\n      return \"Jun\";\n    }\n    if (d === 7) {\n      return \"Jul\";\n    }\n    if (d === 8) {\n      return \"Aug\";\n    }\n    if (d === 9) {\n      return \"Sept\";\n    }\n    if (d === 10) {\n      return \"Oct\";\n    }\n    if (d === 11) {\n      return \"Nov\";\n    }\n    if (d === 12) {\n      return \"Dec\";\n    }\n    return d;\n  };\n\n  function formatTics(selectedTime, d) {\n    if (selectedTime === \"week\") {\n      return formatWeek(d);\n    }\n    if (selectedTime === \"month\") {\n      return formatMonth(d);\n    }\n    return d;\n  }\n\n  const xAxis = d3\n    .axisBottom(xAxisScale)\n    .ticks(5)\n    .tickFormat((d) => `${formatTics(props.dateSelection, d)}`);\n\n  const dodgedParticlesOrigin = dodge(\n    particles,\n    prevDate,\n    props.valueSelection,\n    xScale(particles, prevDate || \"year\"),\n    r,\n    padding\n  );\n\n  const dodgedParticlesDestination = dodge(\n    particles,\n    props.dateSelection,\n    props.valueSelection,\n    xScale(particles, props.dateSelection),\n    r,\n    padding\n  );\n\n  const generateDelaunay = (pointData) =>\n    Delaunay.from(pointData.map((d) => [d.x, d.y]));\n\n  const [canvasState, setCanvasState] = useState(mainCanvasRef);\n  const originRef = useRef(dodgedParticlesOrigin);\n\n  function animatePoints() {\n    if (!mainCanvasRef.current || !originRef.current) {\n      return;\n    }\n    const canvas = canvasState;\n    const context = canvas.getContext(\"2d\", { alpha: false });\n    const animation = GSAPanimation(\n      originRef.current,\n      dodgedParticlesDestination,\n      animate,\n      animationDuration,\n      0.001,\n      `elastic.inOut(.4, .3)`,\n      onComplete,\n      onInterupt,\n      prevDate\n    );\n\n    function onComplete() {\n      // for debugging\n      // console.log(\"Complete\", animation._start, animation._end);\n      // console.log(gsap.globalTimeline.seek(0).invalidate());\n    }\n\n    function onInterupt() {\n      // for debugging\n      // console.log(\"interrupt\");\n      // console.log(this);\n      // this._ease(\"elastic.inOut(.4, .4)\");\n    }\n\n    function animate() {\n      context.clearRect(0, 0, width, height);\n      d3.select(axisRef.current).call(xAxis);\n\n      originRef.current.map((d, i) => {\n        let variedStroke = d.r > 10 ? d.r / 18 : d.r > 7 ? d.r / 10 : d.r / 5;\n\n        context.beginPath();\n        context.arc(d.x - margin, height - d.y, d.r, 0, 2 * Math.PI);\n        // context.stroke();\n        context.fill();\n        renderRoughCircle(\n          d.x - margin,\n          height - d.y,\n          d.r * 1.9,\n          canvas,\n          variedStroke\n        );\n      });\n    }\n  }\n\n  // Create Canvas\n  useEffect(() => {\n    if (!mainCanvasRef.current) {\n      return;\n    }\n\n    const canvas = mainCanvasRef.current;\n    const context = canvas.getContext(\"2d\", { alpha: true });\n\n    context.scale(pixelRatio, pixelRatio);\n    context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    context.lineWidth = lineWidth;\n    context.fillStyle = circleColor;\n    context.strokeStyle = strokeColor;\n    setCanvasState(canvas);\n    // dodgedParticlesOrigin.map((d) => {\n    //   context.beginPath();\n    //   context.arc(d.x - margin, height - d.y, d.r, 0, 2 * Math.PI);\n    //   // context.stroke();\n    //   context.fill();\n    //   renderRoughCircle(d.x - margin, height - d.y, d.r * 2, canvas);\n    // });\n  }, [mainCanvasRef, props.width, props.height]);\n\n  if (canvasState.getContext) {\n    animatePoints(canvasState);\n  }\n\n  //Make interactive\n  useMemo(() => {\n    if (!interactiveCanvasRef.current) {\n      return;\n    }\n\n    const interactiveCanvas = interactiveCanvasRef.current;\n    const interactiveContext = interactiveCanvas.getContext(\"2d\");\n\n    interactiveContext.scale(pixelRatio, pixelRatio);\n    interactiveContext.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    interactiveContext.fillStyle = circleColor;\n\n    const delaunayPoints = () => generateDelaunay(dodgedParticlesDestination);\n\n    onscroll = () => {\n      pointHoverOut();\n    };\n\n    const pointHoverIn = (hoverActive) => {\n      interactiveContext.clearRect(0, 0, width, height);\n      renderRoughCircle(\n        hoverActive.x - margin,\n        height - hoverActive.y,\n        hoverActive.r * 2,\n        interactiveCanvas\n      );\n      interactiveContext.fill();\n    };\n    const pointHoverOut = () => {\n      interactiveContext.clearRect(0, 0, width, height);\n    };\n\n    function hideTooltip(hoverInactive) {\n      isBrowser && tooltip.style(\"display\", \"none\");\n      isBrowser && tooltip.style(\"opacity\", \"0\");\n    }\n\n    onmousemove = (event) => {\n      event.preventDefault();\n      let pageYoffset = window.pageYOffset;\n      let mousePoint = d3.pointer(event, this);\n      let xi = mousePoint[0] + margin;\n      let y = height - mousePoint[1] + pageYoffset;\n      let heightCond = xi < width + margin;\n      let index = delaunayPoints(props.dateSelection).find(xi, y);\n      let indexObj = dodgedParticlesDestination[index];\n      let tooltipX = indexObj.x;\n      let tooltipY = height - indexObj.y;\n      let tooltipLegibleValue = indexObj.data[props.valueSelection];\n      let tooltipLegibleSelectedDate = indexObj.data[props.dateSelection];\n      let tooltipLegibleDate = indexObj.data.date;\n\n      heightCond\n        ? showTooltip(\n            tooltipX,\n            tooltipY,\n            tooltipLegibleValue,\n            tooltipLegibleSelectedDate,\n            tooltipLegibleDate\n          )\n        : hideTooltip(indexObj);\n\n      heightCond ? pointHoverIn(indexObj) : pointHoverOut(indexObj);\n    };\n  }, [interactiveCanvasRef, props.dateSelection, height, width]);\n\n  return (\n    <div className=\"canvasStickyChartContainer scrollySwarmContainerDrawing\">\n      <div id=\"tooltipDivLight\" className=\"tooltipDiv\" />\n      <svg\n        className=\"canvasStickyPointHighlight\"\n        width={width}\n        height={height}\n      ></svg>\n      <canvas\n        className={\"canvasStickyChart\"}\n        style={{\n          width: props.width + \"px\",\n          height: props.height + \"px\",\n        }}\n        ref={mainCanvasRef}\n        width={props.width * props.pixelRatio}\n        height={props.height * props.pixelRatio}\n      />\n\n      <canvas\n        className={\"canvasStickyChart\"}\n        style={{\n          width: props.width + \"px\",\n          height: props.height + \"px\",\n        }}\n        ref={interactiveCanvasRef}\n        width={props.width * props.pixelRatio}\n        height={props.height * props.pixelRatio}\n      />\n      {/* <canvas ref={glRef}></canvas> */}\n      <svg style={{ top: props.height - 1 }} className=\"canvasStickyChartAxis\">\n        <g className=\"font-sans text-lg\" ref={axisRef}></g>\n      </svg>\n    </div>\n  );\n};\n\nexport default ScrollySwarmDrawing;\n\nexport const GSAPanimation = (\n  originData,\n  destinationData,\n  onUpdate,\n  animationDuration,\n  stagger,\n  ease,\n  onComplete,\n  onInterrupt,\n  isDateNotNull\n) =>\n  gsap.fromTo(\n    originData,\n    {\n      x: (index) => (isDateNotNull ? originData[index].x : 500),\n      y: (index) => (isDateNotNull ? originData[index].y : -30),\n    },\n    {\n      x: (index) => destinationData[index].x,\n      y: (index) => destinationData[index].y,\n      ease: isDateNotNull ? ease : \"elastic.out\",\n      duration: animationDuration,\n      // Documentation: https://greensock.com/docs/v3/Staggers\n      onUpdate: onUpdate,\n      data: originData,\n      lazy: false,\n      overwrite: true,\n      onComplete: onComplete,\n      // startAt: { x: -100, opacity: 0 },\n      onInterrupt: onInterrupt,\n      // autoRemoveChildren: true,\n      stagger: {\n        each: stagger,\n        from: isDateNotNull ? \"random\" : \"random\",\n      },\n    }\n  );\n\nexport const renderRoughCircle = (cx, cy, diamater, canvasElem, strokeWidth) =>\n  new RoughCanvas.RoughCanvas(canvasElem).circle(cx, cy, diamater, {\n    roughness: 0.2,\n    move: 0,\n    stroke: \"#303030\",\n    strokeWidth: strokeWidth,\n  });\n\nconsole.log(\"ROUGH\", RoughGenerator, renderRoughCircle);\n"],"names":["dodge","data","selectedDateI","selectedValueI","xScaleI","rScaleI","paddingI","preRenderFun","circles","map","d","x","r","sort","b","a","formatted_date","head","tail","intersects","y","next","Infinity","Math","sqrt","props","pixelRatio","height","width","margin","marginLeft","particles","marginTop","ref","useRef","highlightRef","axisRef","circleColor","prevDate","value","defaultRef","useEffect","current","usePrevious","dateSelection","rScale","d3","domain","valueSelection","range","incomingData","prevOrCurrent","selectedValue","dodgedParticlesOrigin","dodgedParticlesDestination","tooltip","isBrowser","style","xAxisScale","xAxis","ticks","tickFormat","context","getContext","scale","setTransform","globalAlpha","lineWidth","fillStyle","onscroll","event","pointHoverOut","attr","onmousemove","preventDefault","hoverActive","xSelection","ySelection","pageYoffset","window","pageYOffset","mousePoint","xi","heightCond","index","Delaunay","find","indexObj","tooltipX","tooltipY","tooltipLegibleValue","tooltipLegibleSelectedDate","tooltipLegibleDate","date","readableValue","readableDate","readableFullDate","html","showTooltip","strokeStyle","animate","restore","clearRect","call","transition","beginPath","i","arc","PI","stroke","fill","gsap","duration","ease","onUpdate","stagger","each","from","update","className","id","useScrollData","top","rotatePoints","points","center","degrees","length","_center","cx","cy","angle","cos","sin","forEach","p","_p","lineLength","line","p1","p2","pow","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","n","Object","prototype","toString","slice","constructor","name","test","F","s","done","e","_e","f","TypeError","err","normalCompletion","didErr","step","_e2","return","arr","len","arr2","polygonHachureLines","polygonList","hachureAngle","gap","hachureGap","strokeWidth","max","rotationCenter","_step","_iterator","lines","_step3","vertexArray","_iterator3","polygon","_vertices","join","push","edges","_i","_vertexArray","vertices","ymin","min","ymax","islope","e1","e2","abs","activeEdges","ix","_i2","splice","edge","filter","ae","ae1","ae2","_i3","nexti","ce","ne","round","straightHachureLines","_step2","_iterator2","apply","rotateLines","HachureFiller","helper","this","key","_fillPolygons","type","ops","renderLines","doubleLineOps","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","arguments","ZigZagFiller","_HachureFiller","_super","assign","zigZagAngle","zigzagLines","dgx","dgy","_step$value","HatchFiller","set","o2","set2","concat","DotFiller","dotsOnLines","fweight","fillWeight","ro","dl","count","ceil","offset","minY","random","el","ellipse","DashedFiller","dashedLine","_this","dashOffset","dashGap","floor","startOffset","alpha","atan","lstart","lend","start","end","ZigZagLineFiller","zo","zigzagOffset","dz","middle","fillers","Random","seed","imul","PARAMS","A","C","c","H","h","L","l","M","m","Q","q","S","T","t","V","v","Z","z","isType","token","parsePath","segments","tokens","match","substr","RegExp","$1","text","parseFloat","tokenize","mode","paramsCount","params","Error","numbeToken","segment","absolutize","subx","suby","out","_data","_data2","_data3","newdata","_newdata","_newdata2","normalize","lastType","lcx","lcy","cx1","cy1","_data4","x1","y1","_cx","_cy","cx2","cy2","_data5","_x","_y","_x2","_y2","_cx2","_cy2","_cx3","_cy3","r1","r2","largeArcFlag","sweepFlag","_x3","_y3","arcToCubicCurves","curve","rotate","angleRad","x2","y2","recursive","f1","f2","_recursive","_rotate","_rotate2","_rotate3","_rotate4","r1Pow","r2Pow","left","right","k","asin","toFixed","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","curves","_r","_r2","r3","randOffset","_offsetOpt","randOffsetWithRange","_offset","generateEllipseParams","ellipseWithParams","opset","_doubleLine","close","o1","_curveWithOffset","roughness","disableMultiStroke","randomizer","undefined","cloneOptionsAlterSeed","psq","stepCount","curveStepCount","increment","rx","ry","curveFitRandomness","curveFitting","ellipseParams","_computeEllipsePoints2","_computeEllipsePoints","_computeEllipsePoints3","ap1","cp1","_curve","_computeEllipsePoints4","estimatedPoints","stop","closed","roughClosure","strt","stp","ellipseInc","arcInc","_arc","op","solidFillPolygon","maxRandomnessOffset","patternFillPolygons","fillerName","getFiller","fillPolygons","patternFillArc","roughnessGain","filling","singleStroke","disableMultiStrokeFill","_line","move","overlay","lengthSq","halfOffset","divergePoint","midDispX","bowing","midDispY","randomHalf","randomFull","preserveVertices","ps","closePoint","curveTightness","cachedVertArray","overlap","corePoints","allPoints","radOffset","endAngle","_angle","_bezierTo","ros","iterations","clone","distanceSq","distanceToSegmentSq","w","l2","lerp","getPointsOnBezierCurveWithSplitting","tolerance","newPoints","outPoints","p3","p4","ux","uy","vx","vy","flatness","p0","distance","q1","q2","q3","red","simplify","simplifyPoints","epsilon","maxDistSq","maxNdx","distSq","pointsOnBezierCurves","numSegments","NOS","RoughGenerator","config","defaultOptions","options","_o","shape","sets","_d","paths","outline","ellipseResponse","diameter","ret","fillOptions","bcurve","pointsIn","curveToBezier","polyPoints","replace","hasFill","hasStroke","simplified","simplification","path","normalized","currentPoints","pendingCurve","appendPendingCurve","_currentPoints","appendPendingPoints","lastPoint","_sets","simplifiedSet","pointsOnPath","first","pv","svgPath","drawing","fixedDecimals","item","trim","drawable","opsToPath","fillSketch","RoughCanvas","canvas","ctx","gen","getDefaultOptions","precision","fixedDecimalPlaceDigits","save","strokeLineDash","setLineDash","strokeLineDashOffset","lineDashOffset","_drawToContext","fillRule","fillLineDash","fillLineDashOffset","rule","moveTo","bezierCurveTo","lineTo","get","draw","rectangle","circle","linearPath","strokeColor","animationDuration","padding","mainCanvasRef","interactiveCanvasRef","xScale","_","formatTics","selectedTime","formatWeek","formatMonth","useState","canvasState","setCanvasState","originRef","GSAPanimation","variedStroke","renderRoughCircle","animatePoints","useMemo","interactiveCanvas","interactiveContext","delaunayPoints","pointData","originData","destinationData","onComplete","onInterrupt","isDateNotNull","lazy","overwrite","diamater","canvasElem","console","log"],"sourceRoot":""}