{"version":3,"file":"component---src-pages-childhood-diary-swarm-scroll-js-3e4d5fb2f6497817ce8b.js","mappings":"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","sources":["webpack://visualization-sketches/./node_modules/roughjs/bin/core.js","webpack://visualization-sketches/./node_modules/roughjs/bin/geometry.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/scan-line-hachure.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/hachure-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/zigzag-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/hatch-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/dot-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/dashed-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/zigzag-line-filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/fillers/filler.js","webpack://visualization-sketches/./node_modules/roughjs/bin/math.js","webpack://visualization-sketches/./node_modules/path-data-parser/lib/parser.js","webpack://visualization-sketches/./node_modules/path-data-parser/lib/absolutize.js","webpack://visualization-sketches/./node_modules/path-data-parser/lib/normalize.js","webpack://visualization-sketches/./node_modules/roughjs/bin/renderer.js","webpack://visualization-sketches/./node_modules/points-on-curve/lib/curve-to-bezier.js","webpack://visualization-sketches/./node_modules/points-on-curve/lib/index.js","webpack://visualization-sketches/./node_modules/points-on-path/lib/index.js","webpack://visualization-sketches/./node_modules/roughjs/bin/generator.js","webpack://visualization-sketches/./node_modules/roughjs/bin/svg.js","webpack://visualization-sketches/./node_modules/roughjs/bin/canvas.js","webpack://visualization-sketches/./node_modules/react-rough/dist/index.js","webpack://visualization-sketches/./src/components/ScrollySwarm/index.js","webpack://visualization-sketches/./src/pages/childhood-diary-swarm-scroll.js","webpack://visualization-sketches/./src/utils/visualizationUtils.js"],"sourcesContent":["export var SVGNS = 'http://www.w3.org/2000/svg';","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nexport function rotatePoints(points, center, degrees) {\n  if (points && points.length) {\n    var _center = _slicedToArray(center, 2),\n        cx = _center[0],\n        cy = _center[1];\n\n    var angle = Math.PI / 180 * degrees;\n    var cos = Math.cos(angle);\n    var sin = Math.sin(angle);\n    points.forEach(function (p) {\n      var _p = _slicedToArray(p, 2),\n          x = _p[0],\n          y = _p[1];\n\n      p[0] = (x - cx) * cos - (y - cy) * sin + cx;\n      p[1] = (x - cx) * sin + (y - cy) * cos + cy;\n    });\n  }\n}\nexport function rotateLines(lines, center, degrees) {\n  var points = [];\n  lines.forEach(function (line) {\n    return points.push.apply(points, _toConsumableArray(line));\n  });\n  rotatePoints(points, center, degrees);\n}\nexport function lineLength(line) {\n  var p1 = line[0];\n  var p2 = line[1];\n  return Math.sqrt(Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2));\n}","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { rotatePoints, rotateLines } from '../geometry';\nexport function polygonHachureLines(polygonList, o) {\n  var angle = o.hachureAngle + 90;\n  var gap = o.hachureGap;\n\n  if (gap < 0) {\n    gap = o.strokeWidth * 4;\n  }\n\n  gap = Math.max(gap, 0.1);\n  var rotationCenter = [0, 0];\n\n  if (angle) {\n    var _iterator = _createForOfIteratorHelper(polygonList),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var polygon = _step.value;\n        rotatePoints(polygon, rotationCenter, angle);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n\n  var lines = straightHachureLines(polygonList, gap);\n\n  if (angle) {\n    var _iterator2 = _createForOfIteratorHelper(polygonList),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var _polygon = _step2.value;\n        rotatePoints(_polygon, rotationCenter, -angle);\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n\n    rotateLines(lines, rotationCenter, -angle);\n  }\n\n  return lines;\n}\n\nfunction straightHachureLines(polygonList, gap) {\n  var vertexArray = [];\n\n  var _iterator3 = _createForOfIteratorHelper(polygonList),\n      _step3;\n\n  try {\n    for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n      var polygon = _step3.value;\n\n      var _vertices = _toConsumableArray(polygon);\n\n      if (_vertices[0].join(',') !== _vertices[_vertices.length - 1].join(',')) {\n        _vertices.push([_vertices[0][0], _vertices[0][1]]);\n      }\n\n      if (_vertices.length > 2) {\n        vertexArray.push(_vertices);\n      }\n    }\n  } catch (err) {\n    _iterator3.e(err);\n  } finally {\n    _iterator3.f();\n  }\n\n  var lines = [];\n  gap = Math.max(gap, 0.1); // Create sorted edges table\n\n  var edges = [];\n\n  for (var _i = 0, _vertexArray = vertexArray; _i < _vertexArray.length; _i++) {\n    var vertices = _vertexArray[_i];\n\n    for (var i = 0; i < vertices.length - 1; i++) {\n      var p1 = vertices[i];\n      var p2 = vertices[i + 1];\n\n      if (p1[1] !== p2[1]) {\n        var ymin = Math.min(p1[1], p2[1]);\n        edges.push({\n          ymin: ymin,\n          ymax: Math.max(p1[1], p2[1]),\n          x: ymin === p1[1] ? p1[0] : p2[0],\n          islope: (p2[0] - p1[0]) / (p2[1] - p1[1])\n        });\n      }\n    }\n  }\n\n  edges.sort(function (e1, e2) {\n    if (e1.ymin < e2.ymin) {\n      return -1;\n    }\n\n    if (e1.ymin > e2.ymin) {\n      return 1;\n    }\n\n    if (e1.x < e2.x) {\n      return -1;\n    }\n\n    if (e1.x > e2.x) {\n      return 1;\n    }\n\n    if (e1.ymax === e2.ymax) {\n      return 0;\n    }\n\n    return (e1.ymax - e2.ymax) / Math.abs(e1.ymax - e2.ymax);\n  });\n\n  if (!edges.length) {\n    return lines;\n  } // Start scanning\n\n\n  var activeEdges = [];\n  var y = edges[0].ymin;\n\n  while (activeEdges.length || edges.length) {\n    if (edges.length) {\n      var ix = -1;\n\n      for (var _i2 = 0; _i2 < edges.length; _i2++) {\n        if (edges[_i2].ymin > y) {\n          break;\n        }\n\n        ix = _i2;\n      }\n\n      var removed = edges.splice(0, ix + 1);\n      removed.forEach(function (edge) {\n        activeEdges.push({\n          s: y,\n          edge: edge\n        });\n      });\n    }\n\n    activeEdges = activeEdges.filter(function (ae) {\n      if (ae.edge.ymax <= y) {\n        return false;\n      }\n\n      return true;\n    });\n    activeEdges.sort(function (ae1, ae2) {\n      if (ae1.edge.x === ae2.edge.x) {\n        return 0;\n      }\n\n      return (ae1.edge.x - ae2.edge.x) / Math.abs(ae1.edge.x - ae2.edge.x);\n    }); // fill between the edges\n\n    if (activeEdges.length > 1) {\n      for (var _i3 = 0; _i3 < activeEdges.length; _i3 = _i3 + 2) {\n        var nexti = _i3 + 1;\n\n        if (nexti >= activeEdges.length) {\n          break;\n        }\n\n        var ce = activeEdges[_i3].edge;\n        var ne = activeEdges[nexti].edge;\n        lines.push([[Math.round(ce.x), y], [Math.round(ne.x), y]]);\n      }\n    }\n\n    y += gap;\n    activeEdges.forEach(function (ae) {\n      ae.edge.x = ae.edge.x + gap * ae.edge.islope;\n    });\n  }\n\n  return lines;\n}","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { polygonHachureLines } from './scan-line-hachure';\nexport var HachureFiller = /*#__PURE__*/function () {\n  function HachureFiller(helper) {\n    _classCallCheck(this, HachureFiller);\n\n    this.helper = helper;\n  }\n\n  _createClass(HachureFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      return this._fillPolygons(polygonList, o);\n    }\n  }, {\n    key: \"_fillPolygons\",\n    value: function _fillPolygons(polygonList, o) {\n      var lines = polygonHachureLines(polygonList, o);\n      var ops = this.renderLines(lines, o);\n      return {\n        type: 'fillSketch',\n        ops: ops\n      };\n    }\n  }, {\n    key: \"renderLines\",\n    value: function renderLines(lines, o) {\n      var ops = [];\n\n      var _iterator = _createForOfIteratorHelper(lines),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var line = _step.value;\n          ops.push.apply(ops, _toConsumableArray(this.helper.doubleLineOps(line[0][0], line[0][1], line[1][0], line[1][1], o)));\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return ops;\n    }\n  }]);\n\n  return HachureFiller;\n}();","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { HachureFiller } from './hachure-filler';\nimport { polygonHachureLines } from './scan-line-hachure';\nimport { lineLength } from '../geometry';\nexport var ZigZagFiller = /*#__PURE__*/function (_HachureFiller) {\n  _inherits(ZigZagFiller, _HachureFiller);\n\n  var _super = _createSuper(ZigZagFiller);\n\n  function ZigZagFiller() {\n    _classCallCheck(this, ZigZagFiller);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ZigZagFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      var gap = o.hachureGap;\n\n      if (gap < 0) {\n        gap = o.strokeWidth * 4;\n      }\n\n      gap = Math.max(gap, 0.1);\n      var o2 = Object.assign({}, o, {\n        hachureGap: gap\n      });\n      var lines = polygonHachureLines(polygonList, o2);\n      var zigZagAngle = Math.PI / 180 * o.hachureAngle;\n      var zigzagLines = [];\n      var dgx = gap * 0.5 * Math.cos(zigZagAngle);\n      var dgy = gap * 0.5 * Math.sin(zigZagAngle);\n\n      var _iterator = _createForOfIteratorHelper(lines),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var _step$value = _slicedToArray(_step.value, 2),\n              p1 = _step$value[0],\n              p2 = _step$value[1];\n\n          if (lineLength([p1, p2])) {\n            zigzagLines.push([[p1[0] - dgx, p1[1] + dgy], _toConsumableArray(p2)], [[p1[0] + dgx, p1[1] - dgy], _toConsumableArray(p2)]);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      var ops = this.renderLines(zigzagLines, o);\n      return {\n        type: 'fillSketch',\n        ops: ops\n      };\n    }\n  }]);\n\n  return ZigZagFiller;\n}(HachureFiller);","import _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _possibleConstructorReturn from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js\";\nimport _getPrototypeOf from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { HachureFiller } from './hachure-filler';\nexport var HatchFiller = /*#__PURE__*/function (_HachureFiller) {\n  _inherits(HatchFiller, _HachureFiller);\n\n  var _super = _createSuper(HatchFiller);\n\n  function HatchFiller() {\n    _classCallCheck(this, HatchFiller);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(HatchFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      var set = this._fillPolygons(polygonList, o);\n\n      var o2 = Object.assign({}, o, {\n        hachureAngle: o.hachureAngle + 90\n      });\n\n      var set2 = this._fillPolygons(polygonList, o2);\n\n      set.ops = set.ops.concat(set2.ops);\n      return set;\n    }\n  }]);\n\n  return HatchFiller;\n}(HachureFiller);","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport var DotFiller = /*#__PURE__*/function () {\n  function DotFiller(helper) {\n    _classCallCheck(this, DotFiller);\n\n    this.helper = helper;\n  }\n\n  _createClass(DotFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      o = Object.assign({}, o, {\n        hachureAngle: 0\n      });\n      var lines = polygonHachureLines(polygonList, o);\n      return this.dotsOnLines(lines, o);\n    }\n  }, {\n    key: \"dotsOnLines\",\n    value: function dotsOnLines(lines, o) {\n      var ops = [];\n      var gap = o.hachureGap;\n\n      if (gap < 0) {\n        gap = o.strokeWidth * 4;\n      }\n\n      gap = Math.max(gap, 0.1);\n      var fweight = o.fillWeight;\n\n      if (fweight < 0) {\n        fweight = o.strokeWidth / 2;\n      }\n\n      var ro = gap / 4;\n\n      var _iterator = _createForOfIteratorHelper(lines),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var line = _step.value;\n          var length = lineLength(line);\n          var dl = length / gap;\n          var count = Math.ceil(dl) - 1;\n          var offset = length - count * gap;\n          var x = (line[0][0] + line[1][0]) / 2 - gap / 4;\n          var minY = Math.min(line[0][1], line[1][1]);\n\n          for (var i = 0; i < count; i++) {\n            var y = minY + offset + i * gap;\n            var cx = x - ro + Math.random() * 2 * ro;\n            var cy = y - ro + Math.random() * 2 * ro;\n            var el = this.helper.ellipse(cx, cy, fweight, fweight, o);\n            ops.push.apply(ops, _toConsumableArray(el.ops));\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return {\n        type: 'fillSketch',\n        ops: ops\n      };\n    }\n  }]);\n\n  return DotFiller;\n}();","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport var DashedFiller = /*#__PURE__*/function () {\n  function DashedFiller(helper) {\n    _classCallCheck(this, DashedFiller);\n\n    this.helper = helper;\n  }\n\n  _createClass(DashedFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      var lines = polygonHachureLines(polygonList, o);\n      return {\n        type: 'fillSketch',\n        ops: this.dashedLine(lines, o)\n      };\n    }\n  }, {\n    key: \"dashedLine\",\n    value: function dashedLine(lines, o) {\n      var _this = this;\n\n      var offset = o.dashOffset < 0 ? o.hachureGap < 0 ? o.strokeWidth * 4 : o.hachureGap : o.dashOffset;\n      var gap = o.dashGap < 0 ? o.hachureGap < 0 ? o.strokeWidth * 4 : o.hachureGap : o.dashGap;\n      var ops = [];\n      lines.forEach(function (line) {\n        var length = lineLength(line);\n        var count = Math.floor(length / (offset + gap));\n        var startOffset = (length + gap - count * (offset + gap)) / 2;\n        var p1 = line[0];\n        var p2 = line[1];\n\n        if (p1[0] > p2[0]) {\n          p1 = line[1];\n          p2 = line[0];\n        }\n\n        var alpha = Math.atan((p2[1] - p1[1]) / (p2[0] - p1[0]));\n\n        for (var i = 0; i < count; i++) {\n          var lstart = i * (offset + gap);\n          var lend = lstart + offset;\n          var start = [p1[0] + lstart * Math.cos(alpha) + startOffset * Math.cos(alpha), p1[1] + lstart * Math.sin(alpha) + startOffset * Math.sin(alpha)];\n          var end = [p1[0] + lend * Math.cos(alpha) + startOffset * Math.cos(alpha), p1[1] + lend * Math.sin(alpha) + startOffset * Math.sin(alpha)];\n          ops.push.apply(ops, _toConsumableArray(_this.helper.doubleLineOps(start[0], start[1], end[0], end[1], o)));\n        }\n      });\n      return ops;\n    }\n  }]);\n\n  return DashedFiller;\n}();","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { lineLength } from '../geometry';\nimport { polygonHachureLines } from './scan-line-hachure';\nexport var ZigZagLineFiller = /*#__PURE__*/function () {\n  function ZigZagLineFiller(helper) {\n    _classCallCheck(this, ZigZagLineFiller);\n\n    this.helper = helper;\n  }\n\n  _createClass(ZigZagLineFiller, [{\n    key: \"fillPolygons\",\n    value: function fillPolygons(polygonList, o) {\n      var gap = o.hachureGap < 0 ? o.strokeWidth * 4 : o.hachureGap;\n      var zo = o.zigzagOffset < 0 ? gap : o.zigzagOffset;\n      o = Object.assign({}, o, {\n        hachureGap: gap + zo\n      });\n      var lines = polygonHachureLines(polygonList, o);\n      return {\n        type: 'fillSketch',\n        ops: this.zigzagLines(lines, zo, o)\n      };\n    }\n  }, {\n    key: \"zigzagLines\",\n    value: function zigzagLines(lines, zo, o) {\n      var _this = this;\n\n      var ops = [];\n      lines.forEach(function (line) {\n        var length = lineLength(line);\n        var count = Math.round(length / (2 * zo));\n        var p1 = line[0];\n        var p2 = line[1];\n\n        if (p1[0] > p2[0]) {\n          p1 = line[1];\n          p2 = line[0];\n        }\n\n        var alpha = Math.atan((p2[1] - p1[1]) / (p2[0] - p1[0]));\n\n        for (var i = 0; i < count; i++) {\n          var lstart = i * 2 * zo;\n          var lend = (i + 1) * 2 * zo;\n          var dz = Math.sqrt(2 * Math.pow(zo, 2));\n          var start = [p1[0] + lstart * Math.cos(alpha), p1[1] + lstart * Math.sin(alpha)];\n          var end = [p1[0] + lend * Math.cos(alpha), p1[1] + lend * Math.sin(alpha)];\n          var middle = [start[0] + dz * Math.cos(alpha + Math.PI / 4), start[1] + dz * Math.sin(alpha + Math.PI / 4)];\n          ops.push.apply(ops, _toConsumableArray(_this.helper.doubleLineOps(start[0], start[1], middle[0], middle[1], o)).concat(_toConsumableArray(_this.helper.doubleLineOps(middle[0], middle[1], end[0], end[1], o))));\n        }\n      });\n      return ops;\n    }\n  }]);\n\n  return ZigZagLineFiller;\n}();","import { HachureFiller } from './hachure-filler';\nimport { ZigZagFiller } from './zigzag-filler';\nimport { HatchFiller } from './hatch-filler';\nimport { DotFiller } from './dot-filler';\nimport { DashedFiller } from './dashed-filler';\nimport { ZigZagLineFiller } from './zigzag-line-filler';\nvar fillers = {};\nexport function getFiller(o, helper) {\n  var fillerName = o.fillStyle || 'hachure';\n\n  if (!fillers[fillerName]) {\n    switch (fillerName) {\n      case 'zigzag':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new ZigZagFiller(helper);\n        }\n\n        break;\n\n      case 'cross-hatch':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new HatchFiller(helper);\n        }\n\n        break;\n\n      case 'dots':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new DotFiller(helper);\n        }\n\n        break;\n\n      case 'dashed':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new DashedFiller(helper);\n        }\n\n        break;\n\n      case 'zigzag-line':\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new ZigZagLineFiller(helper);\n        }\n\n        break;\n\n      case 'hachure':\n      default:\n        fillerName = 'hachure';\n\n        if (!fillers[fillerName]) {\n          fillers[fillerName] = new HachureFiller(helper);\n        }\n\n        break;\n    }\n  }\n\n  return fillers[fillerName];\n}","import _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nexport function randomSeed() {\n  return Math.floor(Math.random() * Math.pow(2, 31));\n}\nexport var Random = /*#__PURE__*/function () {\n  function Random(seed) {\n    _classCallCheck(this, Random);\n\n    this.seed = seed;\n  }\n\n  _createClass(Random, [{\n    key: \"next\",\n    value: function next() {\n      if (this.seed) {\n        return (Math.pow(2, 31) - 1 & (this.seed = Math.imul(48271, this.seed))) / Math.pow(2, 31);\n      } else {\n        return Math.random();\n      }\n    }\n  }]);\n\n  return Random;\n}();","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nvar COMMAND = 0;\nvar NUMBER = 1;\nvar EOD = 2;\nvar PARAMS = {\n  A: 7,\n  a: 7,\n  C: 6,\n  c: 6,\n  H: 1,\n  h: 1,\n  L: 2,\n  l: 2,\n  M: 2,\n  m: 2,\n  Q: 4,\n  q: 4,\n  S: 4,\n  s: 4,\n  T: 2,\n  t: 2,\n  V: 1,\n  v: 1,\n  Z: 0,\n  z: 0\n};\n\nfunction tokenize(d) {\n  var tokens = new Array();\n\n  while (d !== '') {\n    if (d.match(/^([ \\t\\r\\n,]+)/)) {\n      d = d.substr(RegExp.$1.length);\n    } else if (d.match(/^([aAcChHlLmMqQsStTvVzZ])/)) {\n      tokens[tokens.length] = {\n        type: COMMAND,\n        text: RegExp.$1\n      };\n      d = d.substr(RegExp.$1.length);\n    } else if (d.match(/^(([-+]?[0-9]+(\\.[0-9]*)?|[-+]?\\.[0-9]+)([eE][-+]?[0-9]+)?)/)) {\n      tokens[tokens.length] = {\n        type: NUMBER,\n        text: \"\".concat(parseFloat(RegExp.$1))\n      };\n      d = d.substr(RegExp.$1.length);\n    } else {\n      return [];\n    }\n  }\n\n  tokens[tokens.length] = {\n    type: EOD,\n    text: ''\n  };\n  return tokens;\n}\n\nfunction isType(token, type) {\n  return token.type === type;\n}\n\nexport function parsePath(d) {\n  var segments = [];\n  var tokens = tokenize(d);\n  var mode = 'BOD';\n  var index = 0;\n  var token = tokens[index];\n\n  while (!isType(token, EOD)) {\n    var paramsCount = 0;\n    var params = [];\n\n    if (mode === 'BOD') {\n      if (token.text === 'M' || token.text === 'm') {\n        index++;\n        paramsCount = PARAMS[token.text];\n        mode = token.text;\n      } else {\n        return parsePath('M0,0' + d);\n      }\n    } else if (isType(token, NUMBER)) {\n      paramsCount = PARAMS[mode];\n    } else {\n      index++;\n      paramsCount = PARAMS[token.text];\n      mode = token.text;\n    }\n\n    if (index + paramsCount < tokens.length) {\n      for (var i = index; i < index + paramsCount; i++) {\n        var numbeToken = tokens[i];\n\n        if (isType(numbeToken, NUMBER)) {\n          params[params.length] = +numbeToken.text;\n        } else {\n          throw new Error('Param not a number: ' + mode + ',' + numbeToken.text);\n        }\n      }\n\n      if (typeof PARAMS[mode] === 'number') {\n        var segment = {\n          key: mode,\n          data: params\n        };\n        segments.push(segment);\n        index += paramsCount;\n        token = tokens[index];\n        if (mode === 'M') mode = 'L';\n        if (mode === 'm') mode = 'l';\n      } else {\n        throw new Error('Bad segment: ' + mode);\n      }\n    } else {\n      throw new Error('Path data ended short');\n    }\n  }\n\n  return segments;\n}\nexport function serialize(segments) {\n  var tokens = [];\n\n  var _iterator = _createForOfIteratorHelper(segments),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n      tokens.push(key);\n\n      switch (key) {\n        case 'C':\n        case 'c':\n          tokens.push(data[0], \"\".concat(data[1], \",\"), data[2], \"\".concat(data[3], \",\"), data[4], data[5]);\n          break;\n\n        case 'S':\n        case 's':\n        case 'Q':\n        case 'q':\n          tokens.push(data[0], \"\".concat(data[1], \",\"), data[2], data[3]);\n          break;\n\n        default:\n          tokens.push.apply(tokens, _toConsumableArray(data));\n          break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return tokens.join(' ');\n}","import _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n// Translate relative commands to absolute commands\nexport function absolutize(segments) {\n  var cx = 0,\n      cy = 0;\n  var subx = 0,\n      suby = 0;\n  var out = [];\n\n  var _iterator = _createForOfIteratorHelper(segments),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n\n      switch (key) {\n        case 'M':\n          out.push({\n            key: 'M',\n            data: _toConsumableArray(data)\n          });\n\n          var _data = _slicedToArray(data, 2);\n\n          cx = _data[0];\n          cy = _data[1];\n\n          var _data2 = _slicedToArray(data, 2);\n\n          subx = _data2[0];\n          suby = _data2[1];\n          break;\n\n        case 'm':\n          cx += data[0];\n          cy += data[1];\n          out.push({\n            key: 'M',\n            data: [cx, cy]\n          });\n          subx = cx;\n          suby = cy;\n          break;\n\n        case 'L':\n          out.push({\n            key: 'L',\n            data: _toConsumableArray(data)\n          });\n\n          var _data3 = _slicedToArray(data, 2);\n\n          cx = _data3[0];\n          cy = _data3[1];\n          break;\n\n        case 'l':\n          cx += data[0];\n          cy += data[1];\n          out.push({\n            key: 'L',\n            data: [cx, cy]\n          });\n          break;\n\n        case 'C':\n          out.push({\n            key: 'C',\n            data: _toConsumableArray(data)\n          });\n          cx = data[4];\n          cy = data[5];\n          break;\n\n        case 'c':\n          {\n            var newdata = data.map(function (d, i) {\n              return i % 2 ? d + cy : d + cx;\n            });\n            out.push({\n              key: 'C',\n              data: newdata\n            });\n            cx = newdata[4];\n            cy = newdata[5];\n            break;\n          }\n\n        case 'Q':\n          out.push({\n            key: 'Q',\n            data: _toConsumableArray(data)\n          });\n          cx = data[2];\n          cy = data[3];\n          break;\n\n        case 'q':\n          {\n            var _newdata = data.map(function (d, i) {\n              return i % 2 ? d + cy : d + cx;\n            });\n\n            out.push({\n              key: 'Q',\n              data: _newdata\n            });\n            cx = _newdata[2];\n            cy = _newdata[3];\n            break;\n          }\n\n        case 'A':\n          out.push({\n            key: 'A',\n            data: _toConsumableArray(data)\n          });\n          cx = data[5];\n          cy = data[6];\n          break;\n\n        case 'a':\n          cx += data[5];\n          cy += data[6];\n          out.push({\n            key: 'A',\n            data: [data[0], data[1], data[2], data[3], data[4], cx, cy]\n          });\n          break;\n\n        case 'H':\n          out.push({\n            key: 'H',\n            data: _toConsumableArray(data)\n          });\n          cx = data[0];\n          break;\n\n        case 'h':\n          cx += data[0];\n          out.push({\n            key: 'H',\n            data: [cx]\n          });\n          break;\n\n        case 'V':\n          out.push({\n            key: 'V',\n            data: _toConsumableArray(data)\n          });\n          cy = data[0];\n          break;\n\n        case 'v':\n          cy += data[0];\n          out.push({\n            key: 'V',\n            data: [cy]\n          });\n          break;\n\n        case 'S':\n          out.push({\n            key: 'S',\n            data: _toConsumableArray(data)\n          });\n          cx = data[2];\n          cy = data[3];\n          break;\n\n        case 's':\n          {\n            var _newdata2 = data.map(function (d, i) {\n              return i % 2 ? d + cy : d + cx;\n            });\n\n            out.push({\n              key: 'S',\n              data: _newdata2\n            });\n            cx = _newdata2[2];\n            cy = _newdata2[3];\n            break;\n          }\n\n        case 'T':\n          out.push({\n            key: 'T',\n            data: _toConsumableArray(data)\n          });\n          cx = data[0];\n          cy = data[1];\n          break;\n\n        case 't':\n          cx += data[0];\n          cy += data[1];\n          out.push({\n            key: 'T',\n            data: [cx, cy]\n          });\n          break;\n\n        case 'Z':\n        case 'z':\n          out.push({\n            key: 'Z',\n            data: []\n          });\n          cx = subx;\n          cy = suby;\n          break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return out;\n}","import _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n// Normalize path to include only M, L, C, and Z commands\nexport function normalize(segments) {\n  var out = [];\n  var lastType = '';\n  var cx = 0,\n      cy = 0;\n  var subx = 0,\n      suby = 0;\n  var lcx = 0,\n      lcy = 0;\n\n  var _iterator = _createForOfIteratorHelper(segments),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n\n      switch (key) {\n        case 'M':\n          out.push({\n            key: 'M',\n            data: _toConsumableArray(data)\n          });\n\n          var _data = _slicedToArray(data, 2);\n\n          cx = _data[0];\n          cy = _data[1];\n\n          var _data2 = _slicedToArray(data, 2);\n\n          subx = _data2[0];\n          suby = _data2[1];\n          break;\n\n        case 'C':\n          out.push({\n            key: 'C',\n            data: _toConsumableArray(data)\n          });\n          cx = data[4];\n          cy = data[5];\n          lcx = data[2];\n          lcy = data[3];\n          break;\n\n        case 'L':\n          out.push({\n            key: 'L',\n            data: _toConsumableArray(data)\n          });\n\n          var _data3 = _slicedToArray(data, 2);\n\n          cx = _data3[0];\n          cy = _data3[1];\n          break;\n\n        case 'H':\n          cx = data[0];\n          out.push({\n            key: 'L',\n            data: [cx, cy]\n          });\n          break;\n\n        case 'V':\n          cy = data[0];\n          out.push({\n            key: 'L',\n            data: [cx, cy]\n          });\n          break;\n\n        case 'S':\n          {\n            var cx1 = 0,\n                cy1 = 0;\n\n            if (lastType === 'C' || lastType === 'S') {\n              cx1 = cx + (cx - lcx);\n              cy1 = cy + (cy - lcy);\n            } else {\n              cx1 = cx;\n              cy1 = cy;\n            }\n\n            out.push({\n              key: 'C',\n              data: [cx1, cy1].concat(_toConsumableArray(data))\n            });\n            lcx = data[0];\n            lcy = data[1];\n            cx = data[2];\n            cy = data[3];\n            break;\n          }\n\n        case 'T':\n          {\n            var _data4 = _slicedToArray(data, 2),\n                x = _data4[0],\n                y = _data4[1];\n\n            var x1 = 0,\n                y1 = 0;\n\n            if (lastType === 'Q' || lastType === 'T') {\n              x1 = cx + (cx - lcx);\n              y1 = cy + (cy - lcy);\n            } else {\n              x1 = cx;\n              y1 = cy;\n            }\n\n            var _cx = cx + 2 * (x1 - cx) / 3;\n\n            var _cy = cy + 2 * (y1 - cy) / 3;\n\n            var cx2 = x + 2 * (x1 - x) / 3;\n            var cy2 = y + 2 * (y1 - y) / 3;\n            out.push({\n              key: 'C',\n              data: [_cx, _cy, cx2, cy2, x, y]\n            });\n            lcx = x1;\n            lcy = y1;\n            cx = x;\n            cy = y;\n            break;\n          }\n\n        case 'Q':\n          {\n            var _data5 = _slicedToArray(data, 4),\n                _x = _data5[0],\n                _y = _data5[1],\n                _x2 = _data5[2],\n                _y2 = _data5[3];\n\n            var _cx2 = cx + 2 * (_x - cx) / 3;\n\n            var _cy2 = cy + 2 * (_y - cy) / 3;\n\n            var _cx3 = _x2 + 2 * (_x - _x2) / 3;\n\n            var _cy3 = _y2 + 2 * (_y - _y2) / 3;\n\n            out.push({\n              key: 'C',\n              data: [_cx2, _cy2, _cx3, _cy3, _x2, _y2]\n            });\n            lcx = _x;\n            lcy = _y;\n            cx = _x2;\n            cy = _y2;\n            break;\n          }\n\n        case 'A':\n          {\n            var r1 = Math.abs(data[0]);\n            var r2 = Math.abs(data[1]);\n            var angle = data[2];\n            var largeArcFlag = data[3];\n            var sweepFlag = data[4];\n            var _x3 = data[5];\n            var _y3 = data[6];\n\n            if (r1 === 0 || r2 === 0) {\n              out.push({\n                key: 'C',\n                data: [cx, cy, _x3, _y3, _x3, _y3]\n              });\n              cx = _x3;\n              cy = _y3;\n            } else {\n              if (cx !== _x3 || cy !== _y3) {\n                var curves = arcToCubicCurves(cx, cy, _x3, _y3, r1, r2, angle, largeArcFlag, sweepFlag);\n                curves.forEach(function (curve) {\n                  out.push({\n                    key: 'C',\n                    data: curve\n                  });\n                });\n                cx = _x3;\n                cy = _y3;\n              }\n            }\n\n            break;\n          }\n\n        case 'Z':\n          out.push({\n            key: 'Z',\n            data: []\n          });\n          cx = subx;\n          cy = suby;\n          break;\n      }\n\n      lastType = key;\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return out;\n}\n\nfunction degToRad(degrees) {\n  return Math.PI * degrees / 180;\n}\n\nfunction rotate(x, y, angleRad) {\n  var X = x * Math.cos(angleRad) - y * Math.sin(angleRad);\n  var Y = x * Math.sin(angleRad) + y * Math.cos(angleRad);\n  return [X, Y];\n}\n\nfunction arcToCubicCurves(x1, y1, x2, y2, r1, r2, angle, largeArcFlag, sweepFlag, recursive) {\n  var angleRad = degToRad(angle);\n  var params = [];\n  var f1 = 0,\n      f2 = 0,\n      cx = 0,\n      cy = 0;\n\n  if (recursive) {\n    var _recursive = _slicedToArray(recursive, 4);\n\n    f1 = _recursive[0];\n    f2 = _recursive[1];\n    cx = _recursive[2];\n    cy = _recursive[3];\n  } else {\n    var _rotate = rotate(x1, y1, -angleRad);\n\n    var _rotate2 = _slicedToArray(_rotate, 2);\n\n    x1 = _rotate2[0];\n    y1 = _rotate2[1];\n\n    var _rotate3 = rotate(x2, y2, -angleRad);\n\n    var _rotate4 = _slicedToArray(_rotate3, 2);\n\n    x2 = _rotate4[0];\n    y2 = _rotate4[1];\n    var x = (x1 - x2) / 2;\n    var y = (y1 - y2) / 2;\n    var h = x * x / (r1 * r1) + y * y / (r2 * r2);\n\n    if (h > 1) {\n      h = Math.sqrt(h);\n      r1 = h * r1;\n      r2 = h * r2;\n    }\n\n    var sign = largeArcFlag === sweepFlag ? -1 : 1;\n    var r1Pow = r1 * r1;\n    var r2Pow = r2 * r2;\n    var left = r1Pow * r2Pow - r1Pow * y * y - r2Pow * x * x;\n    var right = r1Pow * y * y + r2Pow * x * x;\n    var k = sign * Math.sqrt(Math.abs(left / right));\n    cx = k * r1 * y / r2 + (x1 + x2) / 2;\n    cy = k * -r2 * x / r1 + (y1 + y2) / 2;\n    f1 = Math.asin(parseFloat(((y1 - cy) / r2).toFixed(9)));\n    f2 = Math.asin(parseFloat(((y2 - cy) / r2).toFixed(9)));\n\n    if (x1 < cx) {\n      f1 = Math.PI - f1;\n    }\n\n    if (x2 < cx) {\n      f2 = Math.PI - f2;\n    }\n\n    if (f1 < 0) {\n      f1 = Math.PI * 2 + f1;\n    }\n\n    if (f2 < 0) {\n      f2 = Math.PI * 2 + f2;\n    }\n\n    if (sweepFlag && f1 > f2) {\n      f1 = f1 - Math.PI * 2;\n    }\n\n    if (!sweepFlag && f2 > f1) {\n      f2 = f2 - Math.PI * 2;\n    }\n  }\n\n  var df = f2 - f1;\n\n  if (Math.abs(df) > Math.PI * 120 / 180) {\n    var f2old = f2;\n    var x2old = x2;\n    var y2old = y2;\n\n    if (sweepFlag && f2 > f1) {\n      f2 = f1 + Math.PI * 120 / 180 * 1;\n    } else {\n      f2 = f1 + Math.PI * 120 / 180 * -1;\n    }\n\n    x2 = cx + r1 * Math.cos(f2);\n    y2 = cy + r2 * Math.sin(f2);\n    params = arcToCubicCurves(x2, y2, x2old, y2old, r1, r2, angle, 0, sweepFlag, [f2, f2old, cx, cy]);\n  }\n\n  df = f2 - f1;\n  var c1 = Math.cos(f1);\n  var s1 = Math.sin(f1);\n  var c2 = Math.cos(f2);\n  var s2 = Math.sin(f2);\n  var t = Math.tan(df / 4);\n  var hx = 4 / 3 * r1 * t;\n  var hy = 4 / 3 * r2 * t;\n  var m1 = [x1, y1];\n  var m2 = [x1 + hx * s1, y1 - hy * c1];\n  var m3 = [x2 + hx * s2, y2 - hy * c2];\n  var m4 = [x2, y2];\n  m2[0] = 2 * m1[0] - m2[0];\n  m2[1] = 2 * m1[1] - m2[1];\n\n  if (recursive) {\n    return [m2, m3, m4].concat(params);\n  } else {\n    params = [m2, m3, m4].concat(params);\n    var curves = [];\n\n    for (var i = 0; i < params.length; i += 3) {\n      var _r = rotate(params[i][0], params[i][1], angleRad);\n\n      var _r2 = rotate(params[i + 1][0], params[i + 1][1], angleRad);\n\n      var r3 = rotate(params[i + 2][0], params[i + 2][1], angleRad);\n      curves.push([_r[0], _r[1], _r2[0], _r2[1], r3[0], r3[1]]);\n    }\n\n    return curves;\n  }\n}","import _slicedToArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { getFiller } from './fillers/filler.js';\nimport { Random } from './math.js';\nimport { parsePath, normalize, absolutize } from 'path-data-parser';\nvar helper = {\n  randOffset: randOffset,\n  randOffsetWithRange: randOffsetWithRange,\n  ellipse: ellipse,\n  doubleLineOps: doubleLineFillOps\n};\nexport function line(x1, y1, x2, y2, o) {\n  return {\n    type: 'path',\n    ops: _doubleLine(x1, y1, x2, y2, o)\n  };\n}\nexport function linearPath(points, close, o) {\n  var len = (points || []).length;\n\n  if (len > 2) {\n    var ops = [];\n\n    for (var i = 0; i < len - 1; i++) {\n      ops.push.apply(ops, _toConsumableArray(_doubleLine(points[i][0], points[i][1], points[i + 1][0], points[i + 1][1], o)));\n    }\n\n    if (close) {\n      ops.push.apply(ops, _toConsumableArray(_doubleLine(points[len - 1][0], points[len - 1][1], points[0][0], points[0][1], o)));\n    }\n\n    return {\n      type: 'path',\n      ops: ops\n    };\n  } else if (len === 2) {\n    return line(points[0][0], points[0][1], points[1][0], points[1][1], o);\n  }\n\n  return {\n    type: 'path',\n    ops: []\n  };\n}\nexport function polygon(points, o) {\n  return linearPath(points, true, o);\n}\nexport function rectangle(x, y, width, height, o) {\n  var points = [[x, y], [x + width, y], [x + width, y + height], [x, y + height]];\n  return polygon(points, o);\n}\nexport function curve(points, o) {\n  var o1 = _curveWithOffset(points, 1 * (1 + o.roughness * 0.2), o);\n\n  if (!o.disableMultiStroke) {\n    var o2 = _curveWithOffset(points, 1.5 * (1 + o.roughness * 0.22), cloneOptionsAlterSeed(o));\n\n    o1 = o1.concat(o2);\n  }\n\n  return {\n    type: 'path',\n    ops: o1\n  };\n}\nexport function ellipse(x, y, width, height, o) {\n  var params = generateEllipseParams(width, height, o);\n  return ellipseWithParams(x, y, o, params).opset;\n}\nexport function generateEllipseParams(width, height, o) {\n  var psq = Math.sqrt(Math.PI * 2 * Math.sqrt((Math.pow(width / 2, 2) + Math.pow(height / 2, 2)) / 2));\n  var stepCount = Math.ceil(Math.max(o.curveStepCount, o.curveStepCount / Math.sqrt(200) * psq));\n  var increment = Math.PI * 2 / stepCount;\n  var rx = Math.abs(width / 2);\n  var ry = Math.abs(height / 2);\n  var curveFitRandomness = 1 - o.curveFitting;\n  rx += _offsetOpt(rx * curveFitRandomness, o);\n  ry += _offsetOpt(ry * curveFitRandomness, o);\n  return {\n    increment: increment,\n    rx: rx,\n    ry: ry\n  };\n}\nexport function ellipseWithParams(x, y, o, ellipseParams) {\n  var _computeEllipsePoints2 = _computeEllipsePoints(ellipseParams.increment, x, y, ellipseParams.rx, ellipseParams.ry, 1, ellipseParams.increment * _offset(0.1, _offset(0.4, 1, o), o), o),\n      _computeEllipsePoints3 = _slicedToArray(_computeEllipsePoints2, 2),\n      ap1 = _computeEllipsePoints3[0],\n      cp1 = _computeEllipsePoints3[1];\n\n  var o1 = _curve(ap1, null, o);\n\n  if (!o.disableMultiStroke && o.roughness !== 0) {\n    var _computeEllipsePoints4 = _computeEllipsePoints(ellipseParams.increment, x, y, ellipseParams.rx, ellipseParams.ry, 1.5, 0, o),\n        _computeEllipsePoints5 = _slicedToArray(_computeEllipsePoints4, 1),\n        ap2 = _computeEllipsePoints5[0];\n\n    var o2 = _curve(ap2, null, o);\n\n    o1 = o1.concat(o2);\n  }\n\n  return {\n    estimatedPoints: cp1,\n    opset: {\n      type: 'path',\n      ops: o1\n    }\n  };\n}\nexport function arc(x, y, width, height, start, stop, closed, roughClosure, o) {\n  var cx = x;\n  var cy = y;\n  var rx = Math.abs(width / 2);\n  var ry = Math.abs(height / 2);\n  rx += _offsetOpt(rx * 0.01, o);\n  ry += _offsetOpt(ry * 0.01, o);\n  var strt = start;\n  var stp = stop;\n\n  while (strt < 0) {\n    strt += Math.PI * 2;\n    stp += Math.PI * 2;\n  }\n\n  if (stp - strt > Math.PI * 2) {\n    strt = 0;\n    stp = Math.PI * 2;\n  }\n\n  var ellipseInc = Math.PI * 2 / o.curveStepCount;\n  var arcInc = Math.min(ellipseInc / 2, (stp - strt) / 2);\n\n  var ops = _arc(arcInc, cx, cy, rx, ry, strt, stp, 1, o);\n\n  if (!o.disableMultiStroke) {\n    var o2 = _arc(arcInc, cx, cy, rx, ry, strt, stp, 1.5, o);\n\n    ops.push.apply(ops, _toConsumableArray(o2));\n  }\n\n  if (closed) {\n    if (roughClosure) {\n      ops.push.apply(ops, _toConsumableArray(_doubleLine(cx, cy, cx + rx * Math.cos(strt), cy + ry * Math.sin(strt), o)).concat(_toConsumableArray(_doubleLine(cx, cy, cx + rx * Math.cos(stp), cy + ry * Math.sin(stp), o))));\n    } else {\n      ops.push({\n        op: 'lineTo',\n        data: [cx, cy]\n      }, {\n        op: 'lineTo',\n        data: [cx + rx * Math.cos(strt), cy + ry * Math.sin(strt)]\n      });\n    }\n  }\n\n  return {\n    type: 'path',\n    ops: ops\n  };\n}\nexport function svgPath(path, o) {\n  var segments = normalize(absolutize(parsePath(path)));\n  var ops = [];\n  var first = [0, 0];\n  var current = [0, 0];\n\n  var _iterator = _createForOfIteratorHelper(segments),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n\n      switch (key) {\n        case 'M':\n          {\n            var _ret = function () {\n              var ro = 1 * (o.maxRandomnessOffset || 0);\n              var pv = o.preserveVertices;\n              ops.push({\n                op: 'move',\n                data: data.map(function (d) {\n                  return d + (pv ? 0 : _offsetOpt(ro, o));\n                })\n              });\n              current = [data[0], data[1]];\n              first = [data[0], data[1]];\n              return \"break\";\n            }();\n\n            if (_ret === \"break\") break;\n          }\n\n        case 'L':\n          ops.push.apply(ops, _toConsumableArray(_doubleLine(current[0], current[1], data[0], data[1], o)));\n          current = [data[0], data[1]];\n          break;\n\n        case 'C':\n          {\n            var _data = _slicedToArray(data, 6),\n                x1 = _data[0],\n                y1 = _data[1],\n                x2 = _data[2],\n                y2 = _data[3],\n                x = _data[4],\n                y = _data[5];\n\n            ops.push.apply(ops, _toConsumableArray(_bezierTo(x1, y1, x2, y2, x, y, current, o)));\n            current = [x, y];\n            break;\n          }\n\n        case 'Z':\n          ops.push.apply(ops, _toConsumableArray(_doubleLine(current[0], current[1], first[0], first[1], o)));\n          current = [first[0], first[1]];\n          break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return {\n    type: 'path',\n    ops: ops\n  };\n} // Fills\n\nexport function solidFillPolygon(polygonList, o) {\n  var ops = [];\n\n  var _iterator2 = _createForOfIteratorHelper(polygonList),\n      _step2;\n\n  try {\n    for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n      var points = _step2.value;\n\n      if (points.length) {\n        var offset = o.maxRandomnessOffset || 0;\n        var len = points.length;\n\n        if (len > 2) {\n          ops.push({\n            op: 'move',\n            data: [points[0][0] + _offsetOpt(offset, o), points[0][1] + _offsetOpt(offset, o)]\n          });\n\n          for (var i = 1; i < len; i++) {\n            ops.push({\n              op: 'lineTo',\n              data: [points[i][0] + _offsetOpt(offset, o), points[i][1] + _offsetOpt(offset, o)]\n            });\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _iterator2.e(err);\n  } finally {\n    _iterator2.f();\n  }\n\n  return {\n    type: 'fillPath',\n    ops: ops\n  };\n}\nexport function patternFillPolygons(polygonList, o) {\n  return getFiller(o, helper).fillPolygons(polygonList, o);\n}\nexport function patternFillArc(x, y, width, height, start, stop, o) {\n  var cx = x;\n  var cy = y;\n  var rx = Math.abs(width / 2);\n  var ry = Math.abs(height / 2);\n  rx += _offsetOpt(rx * 0.01, o);\n  ry += _offsetOpt(ry * 0.01, o);\n  var strt = start;\n  var stp = stop;\n\n  while (strt < 0) {\n    strt += Math.PI * 2;\n    stp += Math.PI * 2;\n  }\n\n  if (stp - strt > Math.PI * 2) {\n    strt = 0;\n    stp = Math.PI * 2;\n  }\n\n  var increment = (stp - strt) / o.curveStepCount;\n  var points = [];\n\n  for (var angle = strt; angle <= stp; angle = angle + increment) {\n    points.push([cx + rx * Math.cos(angle), cy + ry * Math.sin(angle)]);\n  }\n\n  points.push([cx + rx * Math.cos(stp), cy + ry * Math.sin(stp)]);\n  points.push([cx, cy]);\n  return patternFillPolygons([points], o);\n}\nexport function randOffset(x, o) {\n  return _offsetOpt(x, o);\n}\nexport function randOffsetWithRange(min, max, o) {\n  return _offset(min, max, o);\n}\nexport function doubleLineFillOps(x1, y1, x2, y2, o) {\n  return _doubleLine(x1, y1, x2, y2, o, true);\n} // Private helpers\n\nfunction cloneOptionsAlterSeed(ops) {\n  var result = Object.assign({}, ops);\n  result.randomizer = undefined;\n\n  if (ops.seed) {\n    result.seed = ops.seed + 1;\n  }\n\n  return result;\n}\n\nfunction random(ops) {\n  if (!ops.randomizer) {\n    ops.randomizer = new Random(ops.seed || 0);\n  }\n\n  return ops.randomizer.next();\n}\n\nfunction _offset(min, max, ops) {\n  var roughnessGain = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n  return ops.roughness * roughnessGain * (random(ops) * (max - min) + min);\n}\n\nfunction _offsetOpt(x, ops) {\n  var roughnessGain = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  return _offset(-x, x, ops, roughnessGain);\n}\n\nfunction _doubleLine(x1, y1, x2, y2, o) {\n  var filling = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n  var singleStroke = filling ? o.disableMultiStrokeFill : o.disableMultiStroke;\n\n  var o1 = _line(x1, y1, x2, y2, o, true, false);\n\n  if (singleStroke) {\n    return o1;\n  }\n\n  var o2 = _line(x1, y1, x2, y2, o, true, true);\n\n  return o1.concat(o2);\n}\n\nfunction _line(x1, y1, x2, y2, o, move, overlay) {\n  var lengthSq = Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2);\n  var length = Math.sqrt(lengthSq);\n  var roughnessGain = 1;\n\n  if (length < 200) {\n    roughnessGain = 1;\n  } else if (length > 500) {\n    roughnessGain = 0.4;\n  } else {\n    roughnessGain = -0.0016668 * length + 1.233334;\n  }\n\n  var offset = o.maxRandomnessOffset || 0;\n\n  if (offset * offset * 100 > lengthSq) {\n    offset = length / 10;\n  }\n\n  var halfOffset = offset / 2;\n  var divergePoint = 0.2 + random(o) * 0.2;\n  var midDispX = o.bowing * o.maxRandomnessOffset * (y2 - y1) / 200;\n  var midDispY = o.bowing * o.maxRandomnessOffset * (x1 - x2) / 200;\n  midDispX = _offsetOpt(midDispX, o, roughnessGain);\n  midDispY = _offsetOpt(midDispY, o, roughnessGain);\n  var ops = [];\n\n  var randomHalf = function randomHalf() {\n    return _offsetOpt(halfOffset, o, roughnessGain);\n  };\n\n  var randomFull = function randomFull() {\n    return _offsetOpt(offset, o, roughnessGain);\n  };\n\n  var preserveVertices = o.preserveVertices;\n\n  if (move) {\n    if (overlay) {\n      ops.push({\n        op: 'move',\n        data: [x1 + (preserveVertices ? 0 : randomHalf()), y1 + (preserveVertices ? 0 : randomHalf())]\n      });\n    } else {\n      ops.push({\n        op: 'move',\n        data: [x1 + (preserveVertices ? 0 : _offsetOpt(offset, o, roughnessGain)), y1 + (preserveVertices ? 0 : _offsetOpt(offset, o, roughnessGain))]\n      });\n    }\n  }\n\n  if (overlay) {\n    ops.push({\n      op: 'bcurveTo',\n      data: [midDispX + x1 + (x2 - x1) * divergePoint + randomHalf(), midDispY + y1 + (y2 - y1) * divergePoint + randomHalf(), midDispX + x1 + 2 * (x2 - x1) * divergePoint + randomHalf(), midDispY + y1 + 2 * (y2 - y1) * divergePoint + randomHalf(), x2 + (preserveVertices ? 0 : randomHalf()), y2 + (preserveVertices ? 0 : randomHalf())]\n    });\n  } else {\n    ops.push({\n      op: 'bcurveTo',\n      data: [midDispX + x1 + (x2 - x1) * divergePoint + randomFull(), midDispY + y1 + (y2 - y1) * divergePoint + randomFull(), midDispX + x1 + 2 * (x2 - x1) * divergePoint + randomFull(), midDispY + y1 + 2 * (y2 - y1) * divergePoint + randomFull(), x2 + (preserveVertices ? 0 : randomFull()), y2 + (preserveVertices ? 0 : randomFull())]\n    });\n  }\n\n  return ops;\n}\n\nfunction _curveWithOffset(points, offset, o) {\n  var ps = [];\n  ps.push([points[0][0] + _offsetOpt(offset, o), points[0][1] + _offsetOpt(offset, o)]);\n  ps.push([points[0][0] + _offsetOpt(offset, o), points[0][1] + _offsetOpt(offset, o)]);\n\n  for (var i = 1; i < points.length; i++) {\n    ps.push([points[i][0] + _offsetOpt(offset, o), points[i][1] + _offsetOpt(offset, o)]);\n\n    if (i === points.length - 1) {\n      ps.push([points[i][0] + _offsetOpt(offset, o), points[i][1] + _offsetOpt(offset, o)]);\n    }\n  }\n\n  return _curve(ps, null, o);\n}\n\nfunction _curve(points, closePoint, o) {\n  var len = points.length;\n  var ops = [];\n\n  if (len > 3) {\n    var b = [];\n    var s = 1 - o.curveTightness;\n    ops.push({\n      op: 'move',\n      data: [points[1][0], points[1][1]]\n    });\n\n    for (var i = 1; i + 2 < len; i++) {\n      var cachedVertArray = points[i];\n      b[0] = [cachedVertArray[0], cachedVertArray[1]];\n      b[1] = [cachedVertArray[0] + (s * points[i + 1][0] - s * points[i - 1][0]) / 6, cachedVertArray[1] + (s * points[i + 1][1] - s * points[i - 1][1]) / 6];\n      b[2] = [points[i + 1][0] + (s * points[i][0] - s * points[i + 2][0]) / 6, points[i + 1][1] + (s * points[i][1] - s * points[i + 2][1]) / 6];\n      b[3] = [points[i + 1][0], points[i + 1][1]];\n      ops.push({\n        op: 'bcurveTo',\n        data: [b[1][0], b[1][1], b[2][0], b[2][1], b[3][0], b[3][1]]\n      });\n    }\n\n    if (closePoint && closePoint.length === 2) {\n      var ro = o.maxRandomnessOffset;\n      ops.push({\n        op: 'lineTo',\n        data: [closePoint[0] + _offsetOpt(ro, o), closePoint[1] + _offsetOpt(ro, o)]\n      });\n    }\n  } else if (len === 3) {\n    ops.push({\n      op: 'move',\n      data: [points[1][0], points[1][1]]\n    });\n    ops.push({\n      op: 'bcurveTo',\n      data: [points[1][0], points[1][1], points[2][0], points[2][1], points[2][0], points[2][1]]\n    });\n  } else if (len === 2) {\n    ops.push.apply(ops, _toConsumableArray(_doubleLine(points[0][0], points[0][1], points[1][0], points[1][1], o)));\n  }\n\n  return ops;\n}\n\nfunction _computeEllipsePoints(increment, cx, cy, rx, ry, offset, overlap, o) {\n  var coreOnly = o.roughness === 0;\n  var corePoints = [];\n  var allPoints = [];\n\n  if (coreOnly) {\n    increment = increment / 4;\n    allPoints.push([cx + rx * Math.cos(-increment), cy + ry * Math.sin(-increment)]);\n\n    for (var angle = 0; angle <= Math.PI * 2; angle = angle + increment) {\n      var p = [cx + rx * Math.cos(angle), cy + ry * Math.sin(angle)];\n      corePoints.push(p);\n      allPoints.push(p);\n    }\n\n    allPoints.push([cx + rx * Math.cos(0), cy + ry * Math.sin(0)]);\n    allPoints.push([cx + rx * Math.cos(increment), cy + ry * Math.sin(increment)]);\n  } else {\n    var radOffset = _offsetOpt(0.5, o) - Math.PI / 2;\n    allPoints.push([_offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment), _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment)]);\n    var endAngle = Math.PI * 2 + radOffset - 0.01;\n\n    for (var _angle = radOffset; _angle < endAngle; _angle = _angle + increment) {\n      var _p = [_offsetOpt(offset, o) + cx + rx * Math.cos(_angle), _offsetOpt(offset, o) + cy + ry * Math.sin(_angle)];\n      corePoints.push(_p);\n      allPoints.push(_p);\n    }\n\n    allPoints.push([_offsetOpt(offset, o) + cx + rx * Math.cos(radOffset + Math.PI * 2 + overlap * 0.5), _offsetOpt(offset, o) + cy + ry * Math.sin(radOffset + Math.PI * 2 + overlap * 0.5)]);\n    allPoints.push([_offsetOpt(offset, o) + cx + 0.98 * rx * Math.cos(radOffset + overlap), _offsetOpt(offset, o) + cy + 0.98 * ry * Math.sin(radOffset + overlap)]);\n    allPoints.push([_offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset + overlap * 0.5), _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset + overlap * 0.5)]);\n  }\n\n  return [allPoints, corePoints];\n}\n\nfunction _arc(increment, cx, cy, rx, ry, strt, stp, offset, o) {\n  var radOffset = strt + _offsetOpt(0.1, o);\n\n  var points = [];\n  points.push([_offsetOpt(offset, o) + cx + 0.9 * rx * Math.cos(radOffset - increment), _offsetOpt(offset, o) + cy + 0.9 * ry * Math.sin(radOffset - increment)]);\n\n  for (var angle = radOffset; angle <= stp; angle = angle + increment) {\n    points.push([_offsetOpt(offset, o) + cx + rx * Math.cos(angle), _offsetOpt(offset, o) + cy + ry * Math.sin(angle)]);\n  }\n\n  points.push([cx + rx * Math.cos(stp), cy + ry * Math.sin(stp)]);\n  points.push([cx + rx * Math.cos(stp), cy + ry * Math.sin(stp)]);\n  return _curve(points, null, o);\n}\n\nfunction _bezierTo(x1, y1, x2, y2, x, y, current, o) {\n  var ops = [];\n  var ros = [o.maxRandomnessOffset || 1, (o.maxRandomnessOffset || 1) + 0.3];\n  var f = [0, 0];\n  var iterations = o.disableMultiStroke ? 1 : 2;\n  var preserveVertices = o.preserveVertices;\n\n  for (var i = 0; i < iterations; i++) {\n    if (i === 0) {\n      ops.push({\n        op: 'move',\n        data: [current[0], current[1]]\n      });\n    } else {\n      ops.push({\n        op: 'move',\n        data: [current[0] + (preserveVertices ? 0 : _offsetOpt(ros[0], o)), current[1] + (preserveVertices ? 0 : _offsetOpt(ros[0], o))]\n      });\n    }\n\n    f = preserveVertices ? [x, y] : [x + _offsetOpt(ros[i], o), y + _offsetOpt(ros[i], o)];\n    ops.push({\n      op: 'bcurveTo',\n      data: [x1 + _offsetOpt(ros[i], o), y1 + _offsetOpt(ros[i], o), x2 + _offsetOpt(ros[i], o), y2 + _offsetOpt(ros[i], o), f[0], f[1]]\n    });\n  }\n\n  return ops;\n}","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction clone(p) {\n  return _toConsumableArray(p);\n}\n\nexport function curveToBezier(pointsIn) {\n  var curveTightness = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  var len = pointsIn.length;\n\n  if (len < 3) {\n    throw new Error('A curve must have at least three points.');\n  }\n\n  var out = [];\n\n  if (len === 3) {\n    out.push(clone(pointsIn[0]), clone(pointsIn[1]), clone(pointsIn[2]), clone(pointsIn[2]));\n  } else {\n    var points = [];\n    points.push(pointsIn[0], pointsIn[0]);\n\n    for (var i = 1; i < pointsIn.length; i++) {\n      points.push(pointsIn[i]);\n\n      if (i === pointsIn.length - 1) {\n        points.push(pointsIn[i]);\n      }\n    }\n\n    var b = [];\n    var s = 1 - curveTightness;\n    out.push(clone(points[0]));\n\n    for (var _i = 1; _i + 2 < points.length; _i++) {\n      var cachedVertArray = points[_i];\n      b[0] = [cachedVertArray[0], cachedVertArray[1]];\n      b[1] = [cachedVertArray[0] + (s * points[_i + 1][0] - s * points[_i - 1][0]) / 6, cachedVertArray[1] + (s * points[_i + 1][1] - s * points[_i - 1][1]) / 6];\n      b[2] = [points[_i + 1][0] + (s * points[_i][0] - s * points[_i + 2][0]) / 6, points[_i + 1][1] + (s * points[_i][1] - s * points[_i + 2][1]) / 6];\n      b[3] = [points[_i + 1][0], points[_i + 1][1]];\n      out.push(b[1], b[2], b[3]);\n    }\n  }\n\n  return out;\n}","// distance between 2 points\nfunction distance(p1, p2) {\n  return Math.sqrt(distanceSq(p1, p2));\n} // distance between 2 points squared\n\n\nfunction distanceSq(p1, p2) {\n  return Math.pow(p1[0] - p2[0], 2) + Math.pow(p1[1] - p2[1], 2);\n} // Sistance squared from a point p to the line segment vw\n\n\nfunction distanceToSegmentSq(p, v, w) {\n  var l2 = distanceSq(v, w);\n\n  if (l2 === 0) {\n    return distanceSq(p, v);\n  }\n\n  var t = ((p[0] - v[0]) * (w[0] - v[0]) + (p[1] - v[1]) * (w[1] - v[1])) / l2;\n  t = Math.max(0, Math.min(1, t));\n  return distanceSq(p, lerp(v, w, t));\n}\n\nfunction lerp(a, b, t) {\n  return [a[0] + (b[0] - a[0]) * t, a[1] + (b[1] - a[1]) * t];\n} // Adapted from https://seant23.wordpress.com/2010/11/12/offset-bezier-curves/\n\n\nfunction flatness(points, offset) {\n  var p1 = points[offset + 0];\n  var p2 = points[offset + 1];\n  var p3 = points[offset + 2];\n  var p4 = points[offset + 3];\n  var ux = 3 * p2[0] - 2 * p1[0] - p4[0];\n  ux *= ux;\n  var uy = 3 * p2[1] - 2 * p1[1] - p4[1];\n  uy *= uy;\n  var vx = 3 * p3[0] - 2 * p4[0] - p1[0];\n  vx *= vx;\n  var vy = 3 * p3[1] - 2 * p4[1] - p1[1];\n  vy *= vy;\n\n  if (ux < vx) {\n    ux = vx;\n  }\n\n  if (uy < vy) {\n    uy = vy;\n  }\n\n  return ux + uy;\n}\n\nfunction getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints) {\n  var outPoints = newPoints || [];\n\n  if (flatness(points, offset) < tolerance) {\n    var p0 = points[offset + 0];\n\n    if (outPoints.length) {\n      var d = distance(outPoints[outPoints.length - 1], p0);\n\n      if (d > 1) {\n        outPoints.push(p0);\n      }\n    } else {\n      outPoints.push(p0);\n    }\n\n    outPoints.push(points[offset + 3]);\n  } else {\n    // subdivide\n    var t = .5;\n    var p1 = points[offset + 0];\n    var p2 = points[offset + 1];\n    var p3 = points[offset + 2];\n    var p4 = points[offset + 3];\n    var q1 = lerp(p1, p2, t);\n    var q2 = lerp(p2, p3, t);\n    var q3 = lerp(p3, p4, t);\n    var r1 = lerp(q1, q2, t);\n    var r2 = lerp(q2, q3, t);\n    var red = lerp(r1, r2, t);\n    getPointsOnBezierCurveWithSplitting([p1, q1, r1, red], 0, tolerance, outPoints);\n    getPointsOnBezierCurveWithSplitting([red, r2, q3, p4], 0, tolerance, outPoints);\n  }\n\n  return outPoints;\n}\n\nexport function simplify(points, distance) {\n  return simplifyPoints(points, 0, points.length, distance);\n} // RamerDouglasPeucker algorithm\n// https://en.wikipedia.org/wiki/Ramer%E2%80%93Douglas%E2%80%93Peucker_algorithm\n\nfunction simplifyPoints(points, start, end, epsilon, newPoints) {\n  var outPoints = newPoints || []; // find the most distance point from the endpoints\n\n  var s = points[start];\n  var e = points[end - 1];\n  var maxDistSq = 0;\n  var maxNdx = 1;\n\n  for (var i = start + 1; i < end - 1; ++i) {\n    var distSq = distanceToSegmentSq(points[i], s, e);\n\n    if (distSq > maxDistSq) {\n      maxDistSq = distSq;\n      maxNdx = i;\n    }\n  } // if that point is too far, split\n\n\n  if (Math.sqrt(maxDistSq) > epsilon) {\n    simplifyPoints(points, start, maxNdx + 1, epsilon, outPoints);\n    simplifyPoints(points, maxNdx, end, epsilon, outPoints);\n  } else {\n    if (!outPoints.length) {\n      outPoints.push(s);\n    }\n\n    outPoints.push(e);\n  }\n\n  return outPoints;\n}\n\nexport function pointsOnBezierCurves(points) {\n  var tolerance = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0.15;\n  var distance = arguments.length > 2 ? arguments[2] : undefined;\n  var newPoints = [];\n  var numSegments = (points.length - 1) / 3;\n\n  for (var i = 0; i < numSegments; i++) {\n    var offset = i * 3;\n    getPointsOnBezierCurveWithSplitting(points, offset, tolerance, newPoints);\n  }\n\n  if (distance && distance > 0) {\n    return simplifyPoints(newPoints, 0, newPoints.length, distance);\n  }\n\n  return newPoints;\n}","import _toConsumableArray from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { pointsOnBezierCurves, simplify } from 'points-on-curve';\nimport { parsePath, absolutize, normalize } from 'path-data-parser';\nexport function pointsOnPath(path, tolerance, distance) {\n  var segments = parsePath(path);\n  var normalized = normalize(absolutize(segments));\n  var sets = [];\n  var currentPoints = [];\n  var start = [0, 0];\n  var pendingCurve = [];\n\n  var appendPendingCurve = function appendPendingCurve() {\n    if (pendingCurve.length >= 4) {\n      var _currentPoints;\n\n      (_currentPoints = currentPoints).push.apply(_currentPoints, _toConsumableArray(pointsOnBezierCurves(pendingCurve, tolerance)));\n    }\n\n    pendingCurve = [];\n  };\n\n  var appendPendingPoints = function appendPendingPoints() {\n    appendPendingCurve();\n\n    if (currentPoints.length) {\n      sets.push(currentPoints);\n      currentPoints = [];\n    }\n  };\n\n  var _iterator = _createForOfIteratorHelper(normalized),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var _step$value = _step.value,\n          key = _step$value.key,\n          data = _step$value.data;\n\n      switch (key) {\n        case 'M':\n          appendPendingPoints();\n          start = [data[0], data[1]];\n          currentPoints.push(start);\n          break;\n\n        case 'L':\n          appendPendingCurve();\n          currentPoints.push([data[0], data[1]]);\n          break;\n\n        case 'C':\n          if (!pendingCurve.length) {\n            var lastPoint = currentPoints.length ? currentPoints[currentPoints.length - 1] : start;\n            pendingCurve.push([lastPoint[0], lastPoint[1]]);\n          }\n\n          pendingCurve.push([data[0], data[1]]);\n          pendingCurve.push([data[2], data[3]]);\n          pendingCurve.push([data[4], data[5]]);\n          break;\n\n        case 'Z':\n          appendPendingCurve();\n          currentPoints.push([start[0], start[1]]);\n          break;\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  appendPendingPoints();\n\n  if (!distance) {\n    return sets;\n  }\n\n  var out = [];\n\n  for (var _i = 0, _sets = sets; _i < _sets.length; _i++) {\n    var set = _sets[_i];\n    var simplifiedSet = simplify(set, distance);\n\n    if (simplifiedSet.length) {\n      out.push(simplifiedSet);\n    }\n  }\n\n  return out;\n}","import _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { line as _line, solidFillPolygon, patternFillPolygons, rectangle as _rectangle, ellipseWithParams, generateEllipseParams, linearPath as _linearPath, arc as _arc, patternFillArc, curve as _curve, svgPath } from './renderer.js';\nimport { randomSeed } from './math.js';\nimport { curveToBezier } from 'points-on-curve/lib/curve-to-bezier.js';\nimport { pointsOnBezierCurves } from 'points-on-curve';\nimport { pointsOnPath } from 'points-on-path';\nvar NOS = 'none';\nexport var RoughGenerator = /*#__PURE__*/function () {\n  function RoughGenerator(config) {\n    _classCallCheck(this, RoughGenerator);\n\n    this.defaultOptions = {\n      maxRandomnessOffset: 2,\n      roughness: 1,\n      bowing: 1,\n      stroke: '#000',\n      strokeWidth: 1,\n      curveTightness: 0,\n      curveFitting: 0.95,\n      curveStepCount: 9,\n      fillStyle: 'hachure',\n      fillWeight: -1,\n      hachureAngle: -41,\n      hachureGap: -1,\n      dashOffset: -1,\n      dashGap: -1,\n      zigzagOffset: -1,\n      seed: 0,\n      disableMultiStroke: false,\n      disableMultiStrokeFill: false,\n      preserveVertices: false\n    };\n    this.config = config || {};\n\n    if (this.config.options) {\n      this.defaultOptions = this._o(this.config.options);\n    }\n  }\n\n  _createClass(RoughGenerator, [{\n    key: \"_o\",\n    value: function _o(options) {\n      return options ? Object.assign({}, this.defaultOptions, options) : this.defaultOptions;\n    }\n  }, {\n    key: \"_d\",\n    value: function _d(shape, sets, options) {\n      return {\n        shape: shape,\n        sets: sets || [],\n        options: options || this.defaultOptions\n      };\n    }\n  }, {\n    key: \"line\",\n    value: function line(x1, y1, x2, y2, options) {\n      var o = this._o(options);\n\n      return this._d('line', [_line(x1, y1, x2, y2, o)], o);\n    }\n  }, {\n    key: \"rectangle\",\n    value: function rectangle(x, y, width, height, options) {\n      var o = this._o(options);\n\n      var paths = [];\n\n      var outline = _rectangle(x, y, width, height, o);\n\n      if (o.fill) {\n        var points = [[x, y], [x + width, y], [x + width, y + height], [x, y + height]];\n\n        if (o.fillStyle === 'solid') {\n          paths.push(solidFillPolygon([points], o));\n        } else {\n          paths.push(patternFillPolygons([points], o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(outline);\n      }\n\n      return this._d('rectangle', paths, o);\n    }\n  }, {\n    key: \"ellipse\",\n    value: function ellipse(x, y, width, height, options) {\n      var o = this._o(options);\n\n      var paths = [];\n      var ellipseParams = generateEllipseParams(width, height, o);\n      var ellipseResponse = ellipseWithParams(x, y, o, ellipseParams);\n\n      if (o.fill) {\n        if (o.fillStyle === 'solid') {\n          var shape = ellipseWithParams(x, y, o, ellipseParams).opset;\n          shape.type = 'fillPath';\n          paths.push(shape);\n        } else {\n          paths.push(patternFillPolygons([ellipseResponse.estimatedPoints], o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(ellipseResponse.opset);\n      }\n\n      return this._d('ellipse', paths, o);\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(x, y, diameter, options) {\n      var ret = this.ellipse(x, y, diameter, diameter, options);\n      ret.shape = 'circle';\n      return ret;\n    }\n  }, {\n    key: \"linearPath\",\n    value: function linearPath(points, options) {\n      var o = this._o(options);\n\n      return this._d('linearPath', [_linearPath(points, false, o)], o);\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(x, y, width, height, start, stop) {\n      var closed = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n      var options = arguments.length > 7 ? arguments[7] : undefined;\n\n      var o = this._o(options);\n\n      var paths = [];\n\n      var outline = _arc(x, y, width, height, start, stop, closed, true, o);\n\n      if (closed && o.fill) {\n        if (o.fillStyle === 'solid') {\n          var fillOptions = Object.assign({}, o);\n          fillOptions.disableMultiStroke = true;\n\n          var shape = _arc(x, y, width, height, start, stop, true, false, fillOptions);\n\n          shape.type = 'fillPath';\n          paths.push(shape);\n        } else {\n          paths.push(patternFillArc(x, y, width, height, start, stop, o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(outline);\n      }\n\n      return this._d('arc', paths, o);\n    }\n  }, {\n    key: \"curve\",\n    value: function curve(points, options) {\n      var o = this._o(options);\n\n      var paths = [];\n\n      var outline = _curve(points, o);\n\n      if (o.fill && o.fill !== NOS && points.length >= 3) {\n        var bcurve = curveToBezier(points);\n        var polyPoints = pointsOnBezierCurves(bcurve, 10, (1 + o.roughness) / 2);\n\n        if (o.fillStyle === 'solid') {\n          paths.push(solidFillPolygon([polyPoints], o));\n        } else {\n          paths.push(patternFillPolygons([polyPoints], o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(outline);\n      }\n\n      return this._d('curve', paths, o);\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(points, options) {\n      var o = this._o(options);\n\n      var paths = [];\n\n      var outline = _linearPath(points, true, o);\n\n      if (o.fill) {\n        if (o.fillStyle === 'solid') {\n          paths.push(solidFillPolygon([points], o));\n        } else {\n          paths.push(patternFillPolygons([points], o));\n        }\n      }\n\n      if (o.stroke !== NOS) {\n        paths.push(outline);\n      }\n\n      return this._d('polygon', paths, o);\n    }\n  }, {\n    key: \"path\",\n    value: function path(d, options) {\n      var o = this._o(options);\n\n      var paths = [];\n\n      if (!d) {\n        return this._d('path', paths, o);\n      }\n\n      d = (d || '').replace(/\\n/g, ' ').replace(/(-\\s)/g, '-').replace('/(\\s\\s)/g', ' ');\n      var hasFill = o.fill && o.fill !== 'transparent' && o.fill !== NOS;\n      var hasStroke = o.stroke !== NOS;\n      var simplified = !!(o.simplification && o.simplification < 1);\n      var distance = simplified ? 4 - 4 * o.simplification : (1 + o.roughness) / 2;\n      var sets = pointsOnPath(d, 1, distance);\n\n      if (hasFill) {\n        if (o.fillStyle === 'solid') {\n          paths.push(solidFillPolygon(sets, o));\n        } else {\n          paths.push(patternFillPolygons(sets, o));\n        }\n      }\n\n      if (hasStroke) {\n        if (simplified) {\n          sets.forEach(function (set) {\n            paths.push(_linearPath(set, false, o));\n          });\n        } else {\n          paths.push(svgPath(d, o));\n        }\n      }\n\n      return this._d('path', paths, o);\n    }\n  }, {\n    key: \"opsToPath\",\n    value: function opsToPath(drawing, fixedDecimals) {\n      var path = '';\n\n      var _iterator = _createForOfIteratorHelper(drawing.ops),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var item = _step.value;\n          var data = typeof fixedDecimals === 'number' && fixedDecimals >= 0 ? item.data.map(function (d) {\n            return +d.toFixed(fixedDecimals);\n          }) : item.data;\n\n          switch (item.op) {\n            case 'move':\n              path += \"M\".concat(data[0], \" \").concat(data[1], \" \");\n              break;\n\n            case 'bcurveTo':\n              path += \"C\".concat(data[0], \" \").concat(data[1], \", \").concat(data[2], \" \").concat(data[3], \", \").concat(data[4], \" \").concat(data[5], \" \");\n              break;\n\n            case 'lineTo':\n              path += \"L\".concat(data[0], \" \").concat(data[1], \" \");\n              break;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return path.trim();\n    }\n  }, {\n    key: \"toPaths\",\n    value: function toPaths(drawable) {\n      var sets = drawable.sets || [];\n      var o = drawable.options || this.defaultOptions;\n      var paths = [];\n\n      var _iterator2 = _createForOfIteratorHelper(sets),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var drawing = _step2.value;\n          var path = null;\n\n          switch (drawing.type) {\n            case 'path':\n              path = {\n                d: this.opsToPath(drawing),\n                stroke: o.stroke,\n                strokeWidth: o.strokeWidth,\n                fill: NOS\n              };\n              break;\n\n            case 'fillPath':\n              path = {\n                d: this.opsToPath(drawing),\n                stroke: NOS,\n                strokeWidth: 0,\n                fill: o.fill || NOS\n              };\n              break;\n\n            case 'fillSketch':\n              path = this.fillSketch(drawing, o);\n              break;\n          }\n\n          if (path) {\n            paths.push(path);\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      return paths;\n    }\n  }, {\n    key: \"fillSketch\",\n    value: function fillSketch(drawing, o) {\n      var fweight = o.fillWeight;\n\n      if (fweight < 0) {\n        fweight = o.strokeWidth / 2;\n      }\n\n      return {\n        d: this.opsToPath(drawing),\n        stroke: o.fill || NOS,\n        strokeWidth: fweight,\n        fill: NOS\n      };\n    }\n  }], [{\n    key: \"newSeed\",\n    value: function newSeed() {\n      return randomSeed();\n    }\n  }]);\n\n  return RoughGenerator;\n}();","import _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { SVGNS } from './core';\nimport { RoughGenerator } from './generator';\nexport var RoughSVG = /*#__PURE__*/function () {\n  function RoughSVG(svg, config) {\n    _classCallCheck(this, RoughSVG);\n\n    this.svg = svg;\n    this.gen = new RoughGenerator(config);\n  }\n\n  _createClass(RoughSVG, [{\n    key: \"draw\",\n    value: function draw(drawable) {\n      var sets = drawable.sets || [];\n      var o = drawable.options || this.getDefaultOptions();\n      var doc = this.svg.ownerDocument || window.document;\n      var g = doc.createElementNS(SVGNS, 'g');\n      var precision = drawable.options.fixedDecimalPlaceDigits;\n\n      var _iterator = _createForOfIteratorHelper(sets),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var drawing = _step.value;\n          var path = null;\n\n          switch (drawing.type) {\n            case 'path':\n              {\n                path = doc.createElementNS(SVGNS, 'path');\n                path.setAttribute('d', this.opsToPath(drawing, precision));\n                path.setAttribute('stroke', o.stroke);\n                path.setAttribute('stroke-width', o.strokeWidth + '');\n                path.setAttribute('fill', 'none');\n\n                if (o.strokeLineDash) {\n                  path.setAttribute('stroke-dasharray', o.strokeLineDash.join(' ').trim());\n                }\n\n                if (o.strokeLineDashOffset) {\n                  path.setAttribute('stroke-dashoffset', \"\".concat(o.strokeLineDashOffset));\n                }\n\n                break;\n              }\n\n            case 'fillPath':\n              {\n                path = doc.createElementNS(SVGNS, 'path');\n                path.setAttribute('d', this.opsToPath(drawing, precision));\n                path.setAttribute('stroke', 'none');\n                path.setAttribute('stroke-width', '0');\n                path.setAttribute('fill', o.fill || '');\n\n                if (drawable.shape === 'curve' || drawable.shape === 'polygon') {\n                  path.setAttribute('fill-rule', 'evenodd');\n                }\n\n                break;\n              }\n\n            case 'fillSketch':\n              {\n                path = this.fillSketch(doc, drawing, o);\n                break;\n              }\n          }\n\n          if (path) {\n            g.appendChild(path);\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n\n      return g;\n    }\n  }, {\n    key: \"fillSketch\",\n    value: function fillSketch(doc, drawing, o) {\n      var fweight = o.fillWeight;\n\n      if (fweight < 0) {\n        fweight = o.strokeWidth / 2;\n      }\n\n      var path = doc.createElementNS(SVGNS, 'path');\n      path.setAttribute('d', this.opsToPath(drawing, o.fixedDecimalPlaceDigits));\n      path.setAttribute('stroke', o.fill || '');\n      path.setAttribute('stroke-width', fweight + '');\n      path.setAttribute('fill', 'none');\n\n      if (o.fillLineDash) {\n        path.setAttribute('stroke-dasharray', o.fillLineDash.join(' ').trim());\n      }\n\n      if (o.fillLineDashOffset) {\n        path.setAttribute('stroke-dashoffset', \"\".concat(o.fillLineDashOffset));\n      }\n\n      return path;\n    }\n  }, {\n    key: \"generator\",\n    get: function get() {\n      return this.gen;\n    }\n  }, {\n    key: \"getDefaultOptions\",\n    value: function getDefaultOptions() {\n      return this.gen.defaultOptions;\n    }\n  }, {\n    key: \"opsToPath\",\n    value: function opsToPath(drawing, fixedDecimalPlaceDigits) {\n      return this.gen.opsToPath(drawing, fixedDecimalPlaceDigits);\n    }\n  }, {\n    key: \"line\",\n    value: function line(x1, y1, x2, y2, options) {\n      var d = this.gen.line(x1, y1, x2, y2, options);\n      return this.draw(d);\n    }\n  }, {\n    key: \"rectangle\",\n    value: function rectangle(x, y, width, height, options) {\n      var d = this.gen.rectangle(x, y, width, height, options);\n      return this.draw(d);\n    }\n  }, {\n    key: \"ellipse\",\n    value: function ellipse(x, y, width, height, options) {\n      var d = this.gen.ellipse(x, y, width, height, options);\n      return this.draw(d);\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(x, y, diameter, options) {\n      var d = this.gen.circle(x, y, diameter, options);\n      return this.draw(d);\n    }\n  }, {\n    key: \"linearPath\",\n    value: function linearPath(points, options) {\n      var d = this.gen.linearPath(points, options);\n      return this.draw(d);\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(points, options) {\n      var d = this.gen.polygon(points, options);\n      return this.draw(d);\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(x, y, width, height, start, stop) {\n      var closed = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n      var options = arguments.length > 7 ? arguments[7] : undefined;\n      var d = this.gen.arc(x, y, width, height, start, stop, closed, options);\n      return this.draw(d);\n    }\n  }, {\n    key: \"curve\",\n    value: function curve(points, options) {\n      var d = this.gen.curve(points, options);\n      return this.draw(d);\n    }\n  }, {\n    key: \"path\",\n    value: function path(d, options) {\n      var drawing = this.gen.path(d, options);\n      return this.draw(drawing);\n    }\n  }]);\n\n  return RoughSVG;\n}();","import _classCallCheck from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/ryezupancis/Documents/projects/visualization-sketches/node_modules/@babel/runtime/helpers/esm/createClass.js\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport { RoughGenerator } from './generator';\nexport var RoughCanvas = /*#__PURE__*/function () {\n  function RoughCanvas(canvas, config) {\n    _classCallCheck(this, RoughCanvas);\n\n    this.canvas = canvas;\n    this.ctx = this.canvas.getContext('2d');\n    this.gen = new RoughGenerator(config);\n  }\n\n  _createClass(RoughCanvas, [{\n    key: \"draw\",\n    value: function draw(drawable) {\n      var sets = drawable.sets || [];\n      var o = drawable.options || this.getDefaultOptions();\n      var ctx = this.ctx;\n      var precision = drawable.options.fixedDecimalPlaceDigits;\n\n      var _iterator = _createForOfIteratorHelper(sets),\n          _step;\n\n      try {\n        for (_iterator.s(); !(_step = _iterator.n()).done;) {\n          var drawing = _step.value;\n\n          switch (drawing.type) {\n            case 'path':\n              ctx.save();\n              ctx.strokeStyle = o.stroke === 'none' ? 'transparent' : o.stroke;\n              ctx.lineWidth = o.strokeWidth;\n\n              if (o.strokeLineDash) {\n                ctx.setLineDash(o.strokeLineDash);\n              }\n\n              if (o.strokeLineDashOffset) {\n                ctx.lineDashOffset = o.strokeLineDashOffset;\n              }\n\n              this._drawToContext(ctx, drawing, precision);\n\n              ctx.restore();\n              break;\n\n            case 'fillPath':\n              {\n                ctx.save();\n                ctx.fillStyle = o.fill || '';\n                var fillRule = drawable.shape === 'curve' || drawable.shape === 'polygon' || drawable.shape === 'path' ? 'evenodd' : 'nonzero';\n\n                this._drawToContext(ctx, drawing, precision, fillRule);\n\n                ctx.restore();\n                break;\n              }\n\n            case 'fillSketch':\n              this.fillSketch(ctx, drawing, o);\n              break;\n          }\n        }\n      } catch (err) {\n        _iterator.e(err);\n      } finally {\n        _iterator.f();\n      }\n    }\n  }, {\n    key: \"fillSketch\",\n    value: function fillSketch(ctx, drawing, o) {\n      var fweight = o.fillWeight;\n\n      if (fweight < 0) {\n        fweight = o.strokeWidth / 2;\n      }\n\n      ctx.save();\n\n      if (o.fillLineDash) {\n        ctx.setLineDash(o.fillLineDash);\n      }\n\n      if (o.fillLineDashOffset) {\n        ctx.lineDashOffset = o.fillLineDashOffset;\n      }\n\n      ctx.strokeStyle = o.fill || '';\n      ctx.lineWidth = fweight;\n\n      this._drawToContext(ctx, drawing, o.fixedDecimalPlaceDigits);\n\n      ctx.restore();\n    }\n  }, {\n    key: \"_drawToContext\",\n    value: function _drawToContext(ctx, drawing, fixedDecimals) {\n      var rule = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'nonzero';\n      ctx.beginPath();\n\n      var _iterator2 = _createForOfIteratorHelper(drawing.ops),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var item = _step2.value;\n          var data = typeof fixedDecimals === 'number' && fixedDecimals >= 0 ? item.data.map(function (d) {\n            return +d.toFixed(fixedDecimals);\n          }) : item.data;\n\n          switch (item.op) {\n            case 'move':\n              ctx.moveTo(data[0], data[1]);\n              break;\n\n            case 'bcurveTo':\n              ctx.bezierCurveTo(data[0], data[1], data[2], data[3], data[4], data[5]);\n              break;\n\n            case 'lineTo':\n              ctx.lineTo(data[0], data[1]);\n              break;\n          }\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n\n      if (drawing.type === 'fillPath') {\n        ctx.fill(rule);\n      } else {\n        ctx.stroke();\n      }\n    }\n  }, {\n    key: \"generator\",\n    get: function get() {\n      return this.gen;\n    }\n  }, {\n    key: \"getDefaultOptions\",\n    value: function getDefaultOptions() {\n      return this.gen.defaultOptions;\n    }\n  }, {\n    key: \"line\",\n    value: function line(x1, y1, x2, y2, options) {\n      var d = this.gen.line(x1, y1, x2, y2, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"rectangle\",\n    value: function rectangle(x, y, width, height, options) {\n      var d = this.gen.rectangle(x, y, width, height, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"ellipse\",\n    value: function ellipse(x, y, width, height, options) {\n      var d = this.gen.ellipse(x, y, width, height, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"circle\",\n    value: function circle(x, y, diameter, options) {\n      var d = this.gen.circle(x, y, diameter, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"linearPath\",\n    value: function linearPath(points, options) {\n      var d = this.gen.linearPath(points, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"polygon\",\n    value: function polygon(points, options) {\n      var d = this.gen.polygon(points, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"arc\",\n    value: function arc(x, y, width, height, start, stop) {\n      var closed = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n      var options = arguments.length > 7 ? arguments[7] : undefined;\n      var d = this.gen.arc(x, y, width, height, start, stop, closed, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"curve\",\n    value: function curve(points, options) {\n      var d = this.gen.curve(points, options);\n      this.draw(d);\n      return d;\n    }\n  }, {\n    key: \"path\",\n    value: function path(d, options) {\n      var drawing = this.gen.path(d, options);\n      this.draw(drawing);\n      return drawing;\n    }\n  }]);\n\n  return RoughCanvas;\n}();","import e, { memo as r, useContext as t } from \"react\";\nimport { RoughSVG as n } from \"roughjs/bin/svg\";\nimport { RoughCanvas as i } from \"roughjs/bin/canvas\";\nvar a = e.createContext({\n  width: 300,\n  height: 150,\n  type: \"canvas\"\n});\n\nfunction u(e, r) {\n  if (null == e) return {};\n  var t,\n      n,\n      i = {},\n      a = Object.keys(e);\n\n  for (n = 0; n < a.length; n++) {\n    r.indexOf(t = a[n]) >= 0 || (i[t] = e[t]);\n  }\n\n  return i;\n}\n\nfunction c(e) {\n  return null == e || /^[sbn]/.test(typeof e);\n}\n\na.displayName = \"RoughContext\";\n\nvar o = function o(r) {\n  var u = r.render,\n      o = t(a),\n      f = o.ref,\n      l = o.config,\n      s = o.width,\n      d = o.height,\n      h = o.type;\n  return function (r, t) {\n    var n, i;\n    \"production\" !== process.env.NODE_ENV && function (e) {\n      if (!e || !e.length) throw new Error(\"useDeepCompareEffect should not be used with no dependencies. Use React.useEffect instead.\");\n      if (e.every(c)) throw new Error(\"useDeepCompareEffect should not be used with dependencies that are all primitive values. Use React.useEffect instead.\");\n    }(t), e.useEffect(r, (function e(r, t) {\n      var n, i;\n      if (r === t) return !0;\n\n      if (r && t && (n = r.constructor) === t.constructor) {\n        if (n === Date) return r.getTime() === t.getTime();\n        if (n === RegExp) return r.toString() === t.toString();\n\n        if (n === Array && (i = r.length) === t.length) {\n          for (; i-- && e(r[i], t[i]);) {\n            ;\n          }\n\n          return -1 === i;\n        }\n\n        if (n === Object) {\n          if (Object.keys(r).length !== Object.keys(t).length) return !1;\n\n          for (i in r) {\n            if (!(i in t) || !e(r[i], t[i])) return !1;\n          }\n\n          return !0;\n        }\n      }\n\n      return r != r && t != t;\n    }(n = t, (i = e.useRef()).current) || (i.current = n), i.current));\n  }(function () {\n    var e = f && f.current;\n\n    if (e) {\n      if (\"svg\" === h) {\n        var r = new n(e, l),\n            t = u(r);\n        return e.appendChild(t), function () {\n          e.removeChild(t);\n        };\n      }\n\n      var a = new i(e, l);\n      u(a);\n    }\n  }, [f, l, u, h]), \"canvas\" === h && function () {\n    if (!s || !d) throw new Error(\"Canvas should have a defined width and height\");\n    var e = f && f.current,\n        r = e && e.getContext(\"2d\");\n    r && r.clearRect(0, 0, s, d);\n  }(), null;\n},\n    f = r(function (r) {\n  var t = r.x1,\n      n = r.y1,\n      i = r.x2,\n      a = r.y2,\n      c = u(r, [\"x1\", \"y1\", \"x2\", \"y2\"]),\n      f = e.useCallback(function (e) {\n    return e.line(t, n, i, a, c);\n  }, [t, n, i, a, c]);\n  return e.createElement(o, {\n    render: function render(e) {\n      return f(e);\n    }\n  });\n});\n\nf.displayName = \"Line\";\nvar l = r(function (r) {\n  var t = r.x,\n      n = r.y,\n      i = r.width,\n      a = r.height,\n      c = u(r, [\"x\", \"y\", \"width\", \"height\"]),\n      f = e.useCallback(function (e) {\n    return e.rectangle(t, n, i, a, c);\n  }, [t, n, i, a, c]);\n  return e.createElement(o, {\n    render: function render(e) {\n      return f(e);\n    }\n  });\n});\nl.displayName = \"Rectangle\";\nvar s = r(function (r) {\n  var t = r.x,\n      n = r.y,\n      i = r.width,\n      a = r.height,\n      c = u(r, [\"x\", \"y\", \"width\", \"height\"]),\n      f = e.useCallback(function (e) {\n    return e.ellipse(t, n, i, a, c);\n  }, [t, n, i, a, c]);\n  return e.createElement(o, {\n    render: function render(e) {\n      return f(e);\n    }\n  });\n});\ns.displayName = \"Ellipse\";\nvar d = r(function (r) {\n  var t = r.x,\n      n = r.y,\n      i = r.diameter,\n      a = u(r, [\"x\", \"y\", \"diameter\"]),\n      c = e.useCallback(function (e) {\n    return e.circle(t, n, i, a);\n  }, [t, n, i, a]);\n  return e.createElement(o, {\n    render: function render(e) {\n      return c(e);\n    }\n  });\n});\nd.displayName = \"Circle\";\nvar h = r(function (r) {\n  var t = r.points,\n      n = u(r, [\"points\"]),\n      i = e.useCallback(function (e) {\n    return e.linearPath(t, n);\n  }, [t, n]);\n  return e.createElement(o, {\n    render: function render(e) {\n      return i(e);\n    }\n  });\n});\nh.displayName = \"LinearPath\";\nvar v = r(function (r) {\n  var t = r.points,\n      n = u(r, [\"points\"]),\n      i = e.useCallback(function (e) {\n    return e.polygon(t, n);\n  }, [t, n]);\n  return e.createElement(o, {\n    render: function render(e) {\n      return i(e);\n    }\n  });\n});\nv.displayName = \"Polygon\";\nvar p = r(function (r) {\n  var t = r.x,\n      n = r.y,\n      i = r.width,\n      a = r.height,\n      c = r.start,\n      f = r.stop,\n      l = r.closed,\n      s = u(r, [\"x\", \"y\", \"width\", \"height\", \"start\", \"stop\", \"closed\"]),\n      d = e.useCallback(function (e) {\n    return e.arc(t, n, i, a, c, f, l, s);\n  }, [t, n, i, a, c, f, l, s]);\n  return e.createElement(o, {\n    render: function render(e) {\n      return d(e);\n    }\n  });\n});\np.displayName = \"Arc\";\nvar g = r(function (r) {\n  var t = r.points,\n      n = u(r, [\"points\"]),\n      i = e.useCallback(function (e) {\n    return e.curve(t, n);\n  }, [t, n]);\n  return e.createElement(o, {\n    render: function render(e) {\n      return i(e);\n    }\n  });\n});\ng.displayName = \"Curve\";\nvar m = r(function (r) {\n  var t = r.d,\n      n = u(r, [\"d\"]),\n      i = e.useCallback(function (e) {\n    return e.path(t, n);\n  }, [t, n]);\n  return e.createElement(o, {\n    render: function render(e) {\n      return i(e);\n    }\n  });\n});\nm.displayName = \"Path\";\n\nvar y = function y(r) {\n  var t = r.config,\n      n = r.width,\n      i = void 0 === n ? 300 : n,\n      u = r.height,\n      c = void 0 === u ? 150 : u,\n      o = r.renderer,\n      f = void 0 === o ? \"canvas\" : o,\n      l = r.forwardedRef,\n      s = r.children,\n      d = e.useRef(),\n      h = e.useRef();\n  return l ? e.createElement(a.Provider, {\n    value: {\n      config: t,\n      width: i,\n      height: c,\n      type: \"canvas\",\n      ref: l\n    }\n  }, s) : \"svg\" === f ? e.createElement(a.Provider, {\n    value: {\n      config: t,\n      type: \"svg\",\n      ref: d\n    }\n  }, e.createElement(\"svg\", {\n    width: i,\n    height: c,\n    ref: d\n  }, s)) : e.createElement(a.Provider, {\n    value: {\n      config: t,\n      width: i,\n      height: c,\n      type: \"canvas\",\n      ref: h\n    }\n  }, e.createElement(\"canvas\", {\n    width: i,\n    height: c,\n    ref: h\n  }, s));\n},\n    w = e.forwardRef(function (r, t) {\n  return e.createElement(y, Object.assign({}, r, {\n    forwardedRef: t\n  }));\n});\n\nw.displayName = \"ReactRough\";\nexport default w;\nexport { p as Arc, d as Circle, g as Curve, s as Ellipse, f as Line, h as LinearPath, m as Path, v as Polygon, w as ReactRough, y as ReactRoughComp, l as Rectangle };","// To fix canvas blurryness I used this: https://stackoverflow.com/questions/48961797/canvas-circle-looks-blurry\nimport { useEffect, useRef } from \"react\";\nimport { Delaunay } from \"d3-delaunay\";\nimport * as d3 from \"d3\";\nimport React from \"react\";\nimport { gsap } from \"gsap\";\nimport { isBrowser } from \"../../utils/staticRendering\";\nimport { dodge } from \"../../utils/visualizationUtils\";\nimport ReactRough, { Rectangle, Arc, Circle } from 'react-rough'\nimport * as RoughCanvas from \"roughjs/bin/canvas\"\nimport * as RoughSvgfrom from \"roughjs/bin/svg\"\n\n\nconsole.log(\"rough\", RoughCanvas)\n\nconst ScrollySwarm = (props) => {\n  const pixelRatio = props.pixelRatio;\n  let height = props.height;\n  let width = props.width;\n  let margin = props.margin;\n  let marginLeft = props.marginLeft;\n  let marginTop = props.marginTop;\n  let particles = props.particles;\n  let ref = useRef();\n  let glRef = useRef();\n\n  let highlightRef = useRef();\n  let axisRef = useRef();\n  let circleColor = \"rgba(0,0,255,.3)\"\n  let circleHighlightColor = \"rgb(255,255,255)\"\n  let strokeColor = \"rgba(0,0,255,1)\"\n  let globalOpacity = 1\n  let animationDuration = .5\n  let lineWidth = 0;\n  let padding = lineWidth\n\n  ////MOVE TO HOOKS\n  const usePrevious = (value, defaultRef) => {\n    const ref = useRef(defaultRef);\n    useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  };\n\n  const prevDate = usePrevious(props.dateSelection, \"\");\n\n  let rScale = d3\n    .scaleLinear()\n    .domain(d3.extent(particles, (d) => d[props.valueSelection]))\n    .range([1, height / 70]);\n\n  let x = (incomingData, prevOrCurrent) =>\n    d3\n      .scaleSequential()\n      .domain(d3.extent(particles, (d) => d[prevOrCurrent]))\n      .range([marginLeft + margin, width]);\n\n  let r = (selectedValue) => rScale(selectedValue);\n\n  const dodgedParticlesOrigin = dodge(\n    particles,\n    prevDate,\n    props.valueSelection,\n    x(particles, prevDate),\n    r,\n    padding\n  );\n  const dodgedParticlesDestination = dodge(\n    particles,\n    props.dateSelection,\n    props.valueSelection,\n    x(particles, props.dateSelection),\n    r,\n    padding\n  );\n\n  const tooltip =\n    isBrowser() &&\n    d3\n      .select(\"#tooltipDiv\")\n      .style(\"background-color\", \"white\")\n      .style(\"border-radius\", \"2px\")\n      .style(\n        \"box-shadow\",\n        \"0 3px 6px rgba(0, 0, 0, 0.3), 0 3px 6px rgba(0, 0, 0, 0.4)\"\n      )\n      .style(\"opacity\", 0)\n      .style(\"padding\", \"5px\")\n      .style(\"z-index\", 1000000);\n\n  function showTooltip(\n    tooltipX,\n    tooltipY,\n    readableValue,\n    readableDate,\n    readableFullDate\n  ) {\n    isBrowser() &&\n      tooltip\n        .style(\"opacity\", 0.7)\n        .style(\"display\", \"block\")\n        .style(\"top\", tooltipY + \"px\")\n        .style(\"left\", tooltipX + 30 - margin + \"px\")\n        .style(\"z-index\", 500000)\n        .html(\n          `<div class =\"swarmTooltipText\">\n          <div>words written: <b>${readableValue}</b></div>\n          <div>${props.dateSelection}: <b>${readableDate}</b></div>\n          <div><b>${readableFullDate}</b></div>\n          </div>`\n        );\n  }\n\n  const delaunay2 = (dateString, x, y) =>\n    Delaunay.from(dodgedParticlesDestination.map((d) => [d.x, d.y]));\n\n  const xAxisScale = d3\n    .scaleSequential()\n    .domain(d3.extent(particles, (d) => d[props.dateSelection]))\n    .range([marginLeft, width - margin]);\n\n  const xAxis = d3\n    .axisBottom(xAxisScale)\n    .ticks(5)\n    .tickFormat((d) => `${d}`);\n\n  useEffect(() => {\n    //************************************************************\n    // ***** Scale Canvas and prep\n    // ***********************************************************\n    const canvas = ref.current;\n    const glCanvas = glRef.current;\n\n\n    // const gl = canvas.getContext(\"webgl\");\n    const gl = glCanvas.getContext('webgl')\n\n    const context = canvas.getContext(\"2d\");\n    const roughCanvas = new RoughCanvas.RoughCanvas(canvas)\n\n\n    context.scale(pixelRatio, pixelRatio);\n    context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    context.globalAlpha = globalOpacity;\n    context.lineWidth = lineWidth;\n    context.fillStyle = circleColor;\n\n    //************************************************************\n    // ***** End Scale Canvas and prep\n    // ***********************************************************\n\n    const update = () => {\n      // context.fillStyle = \"rgb(226, 99, 255)\";\n      // context.fillStyle = \"rgb(65, 82, 158, 0.2)\";\n\n      context.strokeStyle = strokeColor;\n\n      const animation = () =>\n        gsap.fromTo(\n          dodgedParticlesOrigin,\n          {\n            x: (index) => dodgedParticlesOrigin[index].x,\n            y: (index) => dodgedParticlesOrigin[index].y,\n          },\n          {\n            x: (index) => dodgedParticlesDestination[index].x,\n            y: (index) => dodgedParticlesDestination[index].y,\n            // ease: \"power.3.out\",\n            duration: animationDuration,\n\n            // Documentation: https://greensock.com/docs/v3/Staggers\n            ease: \"strong.inOut\",\n            // runBackwards: true,\n            onUpdate: animate,\n            lazy: false,\n            // onInterrupt: 'pause',\n\n            stagger: {\n              each: 0.001,\n              from: \"random\",\n            },\n          }\n        );\n\n      animation();\n\n      function animate() {\n        // context.restore();\n\n        context.clearRect(0, 0, width, height);\n        d3.select(axisRef.current).call(xAxis).transition();\n        // context.beginPath();\n// console.log(\"GL\", canvas.getContext('webgl'), context)\n        dodgedParticlesOrigin.map(\n          (d, i) => (\n            // new RoughCanvas.RoughCanvas(canvas).arc(100 , 300, 200, 180, Math.PI / 2, Math.PI, true, {\n            //   stroke: 'blue', strokeWidth: 2,\n            //   fill: 'rgba(255,0,255,0.4)'\n            // }),\n\n\n            // new RoughCanvas.RoughCanvas(canvas).circle(d.x - margin, height - d.y, d.r * 2, { roughness: 0 }),\n\n            // context.\n            // context.clearRect(0, 0, width, height),\n\n            context.beginPath(),\n            // context.rect(d.x - margin - d.r, height - d.y - d.r, d.r *2, d.r *2),\n            roughCanvas.circle(d.x - margin, height - d.y, d.r * 2, { roughness: .3}),\n\n            // context.arc(d.x - margin, height - d.y, d.r, 0, 2 * Math.PI),\n            context.stroke(),\n            context.fill()\n          )\n        );\n      }\n    };\n\n    onscroll = (event) => {\n      pointHoverOut();\n    };\n\n    const pointHoverIn = (hoverActive) => {\n      let xSelection = hoverActive.x - margin;\n\n      let ySelection = hoverActive.y;\n\n      d3.select(highlightRef.current)\n        .attr(\"r\", hoverActive.r + 1)\n        .attr(\"cx\", xSelection)\n        .attr(\"cy\", height - ySelection)\n        .attr(\"fill\", circleHighlightColor)\n        .attr(\"stroke\", circleColor);\n\n    };\n\n    const pointHoverOut = () => {\n      d3.select(highlightRef.current).attr(\"r\", 0);\n    };\n\n    function hideTooltip(hoverInactive) {\n      isBrowser && tooltip.style(\"display\", \"none\");\n      isBrowser && tooltip.style(\"opacity\", \"0\");\n    }\n\n    onmousemove = (event) => {\n      event.preventDefault();\n      const pageYoffset = window.pageYOffset;\n      let mousePoint = d3.pointer(event, this);\n      let xi = mousePoint[0] + margin;\n      let y = height - mousePoint[1] + pageYoffset;\n      let heightCond = xi < width + margin;\n      let index = delaunay2(props.dateSelection).find(xi, y);\n      let indexObj = dodgedParticlesDestination[index];\n      let tooltipX = indexObj.x;\n      let tooltipY = height - indexObj.y;\n      let tooltipLegibleValue = indexObj.data[props.valueSelection];\n      let tooltipLegibleSelectedDate = indexObj.data[props.dateSelection];\n      let tooltipLegibleDate = indexObj.data.date;\n\n      heightCond\n        ? showTooltip(\n            tooltipX,\n            tooltipY,\n            tooltipLegibleValue,\n            tooltipLegibleSelectedDate,\n            tooltipLegibleDate\n          )\n        : hideTooltip(indexObj);\n\n      heightCond ? pointHoverIn(indexObj) : pointHoverOut(indexObj);\n    };\n\n    update();\n  }, [props.dateSelection, props.width, props.height, props.pixelRatio]);\n\n  return (\n    <div className=\"canvasStickyChartContainer scrollySwarmContainer\">\n      <div id=\"tooltipDiv\" className=\"tooltipDiv\" />\n\n\n\n      // <svg className=\"canvasStickyPointHighlight\" width={width} height={height}>\n// <ReactRough width={width} height={height} className=\"canvasStickyPointHighlight\"  renderer=\"svg\">\n       <Circle renderer=\"svg\" r={0} className=\"highlightCircle\" ref={highlightRef}></Circle>\n      //  </ReactRough>\n      // </svg>\n      <canvas\n        className={\"canvasStickyChart\"}\n        style={{\n          width: props.width + \"px\",\n          height: props.height + \"px\",\n        }}\n        ref={ref}\n        particles={props.particles}\n        stroke={props.stroke}\n        width={props.width * props.pixelRatio}\n        height={props.height * props.pixelRatio}\n        useScrollData={props.useScrollData}\n        dateSelection={props.dateSelection}\n        valueSelection={props.valueSelection}\n        margin={props.margin}\n      />\n      <canvas ref={glRef}></canvas>\n\n      <svg style={{ top: props.height - 1 }} className=\"canvasStickyChartAxis\">\n        <g className=\"lightModeAxis\" ref={axisRef}></g>\n      </svg>\n    </div>\n  );\n};\n\nexport default ScrollySwarm;\n","import React, { useEffect, useRef, createRef, useState } from \"react\";\nimport ScrollySwarm from \"../components/ScrollySwarm\";\nimport { useScrollData } from \"scroll-data-hook\";\nimport debounce from \"debounce\";\nimport { Link } from \"gatsby\";\nimport { useScrollRestoration } from \"gatsby\";\nimport { Scrollama, Step } from \"react-scrollama\";\nimport { graphql } from \"gatsby\";\nimport \"../styles.css\";\nimport { isBrowser } from \"../utils/staticRendering\";\nimport { scatterScrollingtextSwarm } from \"../utils/childhoodDiaryUtils\";\nimport { formatDataFunct } from \"../utils/childhoodDiaryUtils\";\n// import * as Scroll from 'react-scroll';\n\nconst ScrollySwarmPage = ({ data }) => {\n  const diaryRawData = data.allDataCsv.edges[0].node.items;\n\n  const [currentSelectedTime, setCurrentSelectedTime] = useState(null);\n  const [pixelRatio, setPixelRatio] = useState(\n    isBrowser() ? window.devicePixelRatio : 0\n  );\n  const [currentWidth, setCurrentWidth] = useState(\n    isBrowser() ? window.innerWidth : 0\n  );\n  const [currentHeight, setCurrentHeight] = useState(\n    isBrowser() ? window.innerHeight : 0\n  );\n\n  const onStepEnter = (stepdata, index) => {\n    setCurrentSelectedTime(stepdata.data);\n  };\n\n  const generateOffset = (stepdata, index) => {\n    console.log(\"OFFSET\", stepdata)\n    return 1\n  };\n\n\n  function onStepProgress  (data, index)  {\n    console.log(\"STEPDATA\", data)\n    // window.scrollTo({\n    //   top: stepdata.element.offsetTop - currentHeight/2,\n    //   behavior: 'smooth'\n    // });\n  };\n\n  const scrollOrder = [\"year\", \"month\", \"week\"];\n\n  // const [elRefs, setElRefs] = useState([]);\n\n  const stepRefs = useRef([]);\n\n  // console.log(Object.keys(stepRefs).length != scrollOrder.length)\n    stepRefs.current = scrollOrder.map((element, i) => (stepRefs.current[i] ?? createRef()));\n\n\n\n  React.useEffect(() => {\n\n\n    if (isBrowser()) {\n      setCurrentWidth(window.innerWidth);\n      setCurrentHeight(window.innerHeight);\n      setPixelRatio(window.devicePixelRatio);\n      window.onresize = function () {\n        setCurrentWidth(window.innerWidth);\n        setCurrentHeight(window.innerHeight);\n        setPixelRatio(window.devicePixelRatio);\n      };\n    }\n  }, [currentWidth, pixelRatio]);\n\n\n\n  if (isBrowser() === false) {\n    return <></>;\n  }\n\n  console.log(stepRefs);\n\n  return (\n    <div className={\"scrollySwarmContainer\"}>\n      <div>\n\n        <ScrollySwarm\n          className={\"staticGraphicContainer scrollySwarmContainer\"}\n          height={currentHeight * 0.95}\n          width={currentWidth * 0.6}\n          particles={formatDataFunct(diaryRawData)}\n          useScrollData={useScrollData}\n          dateSelection={\n            scatterScrollingtextSwarm(currentSelectedTime).date_selection\n          }\n          valueSelection=\"entry_word_count\"\n          stepIndex={currentSelectedTime}\n          margin={45}\n          marginLeft={currentWidth * 0.1}\n          marginTop={currentHeight * 0.7}\n          pixelRatio={pixelRatio}\n        />\n        <div className=\"scrollingTextContainer darkModeScrollingTitle\">\n        {/* {scrollOrder.map((selectedTime, i) => (\n            <div ref={stepRefs.current[i]}></div>\n          ))} */}\n          <Scrollama threshold={1} offset={.5} onStepEnter={onStepEnter} debug={false}>\n\n          {scrollOrder.map((selectedTime, i) => (\n              <Step data={selectedTime}>\n                <div\n                  key={i}\n                  ref={stepRefs.current[i]}\n                  style={{\n                    opacity: currentSelectedTime === selectedTime ? 1 : .5,\n                  }}\n                  class=\"textStep scrollySwarmTextStep\"\n                >\n                  <div id={currentSelectedTime + i}    style={{\n                    opacity: currentSelectedTime === selectedTime ? 1 : 1,\n                  }} className=\"scrollToSelection\" ref={stepRefs.current[i]}> {scatterScrollingtextSwarm(selectedTime).title}</div>\n\n                </div>\n              </Step>\n            ))}\n          </Scrollama>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport const query = graphql`\n  query ScrollySwarmPage {\n    allDataCsv {\n      edges {\n        node {\n          items {\n            date\n            formatted_date\n            entry_word_count\n            quarter\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport default ScrollySwarmPage;\n","export const dodge = (data, selectedDateI, selectedValueI, xScaleI, rScaleI, paddingI) => {\n  const circles = data\n    .map((d) => ({ x: xScaleI(d[selectedDateI]), r: rScaleI(d[selectedValueI]), data: d }))\n    .sort((b, a) => b.data.formatted_date - a.data.formatted_date);\n\n  const epsilon = 1e-3;\n  let head = null,\n    tail = null,\n    queue = null;\n\n  //   // Returns true if circle x,y intersects with any circle in the queue.\n  function intersects(x, y, r) {\n    let a = head;\n    while (a) {\n      const radius2 = (a.r + r + paddingI) ** 2;\n      if (radius2 - epsilon > (a.x - x) ** 2 + (a.y - y) ** 2) {\n        return true;\n      }\n      a = a.next;\n    }\n    return false;\n  }\n\n  //   // Place each circle sequentially.\n  for (const b of circles) {\n    //     // Choose the minimum non-intersecting tangent.\n    if (intersects(b.x, (b.y = b.r), b.r)) {\n      let a = head;\n      b.y = Infinity;\n      do {\n        let y =\n          a.y + Math.sqrt((a.r + b.r + paddingI) ** 2 - (a.x - b.x) ** 2);\n        if (y < b.y && !intersects(b.x, y, b.r)) b.y = y;\n        a = a.next;\n      } while (a);\n    }\n\n    //     // Add b to the queue.\n    b.next = null;\n    if (head === null) {\n      head = tail = b;\n      queue = head;\n    } else tail = tail.next = b;\n  }\n\n  return circles;\n};\n"],"names":["SVGNS","rotatePoints","points","center","degrees","length","_center","cx","cy","angle","Math","PI","cos","sin","forEach","p","_p","x","y","lineLength","line","p1","p2","sqrt","pow","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","minLen","_arrayLikeToArray","n","Object","prototype","toString","call","slice","constructor","name","from","test","_unsupportedIterableToArray","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","polygonHachureLines","polygonList","hachureAngle","gap","hachureGap","strokeWidth","max","rotationCenter","_step","_iterator","lines","_step3","vertexArray","_iterator3","polygon","_vertices","join","push","edges","_i","_vertexArray","vertices","ymin","min","ymax","islope","sort","e1","e2","abs","activeEdges","ix","_i2","splice","edge","filter","ae","ae1","ae2","_i3","nexti","ce","ne","round","straightHachureLines","_step2","_iterator2","apply","rotateLines","HachureFiller","helper","this","key","_fillPolygons","type","ops","renderLines","doubleLineOps","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","Boolean","valueOf","_isNativeReflectConstruct","result","Super","NewTarget","arguments","ZigZagFiller","_HachureFiller","_super","assign","zigZagAngle","zigzagLines","dgx","dgy","_step$value","HatchFiller","set","o2","set2","concat","DotFiller","dotsOnLines","fweight","fillWeight","ro","dl","count","ceil","offset","minY","random","el","ellipse","DashedFiller","dashedLine","_this","dashOffset","dashGap","floor","startOffset","alpha","atan","lstart","lend","start","end","ZigZagLineFiller","zo","zigzagOffset","dz","middle","fillers","Random","seed","imul","PARAMS","A","a","C","c","H","h","L","l","M","m","Q","q","S","T","t","V","v","Z","z","isType","token","parsePath","d","segments","tokens","match","substr","RegExp","$1","text","parseFloat","tokenize","mode","index","paramsCount","params","Error","numbeToken","segment","data","absolutize","subx","suby","out","_data","_data2","_data3","newdata","map","_newdata","_newdata2","normalize","lastType","lcx","lcy","cx1","cy1","_data4","x1","y1","_cx","_cy","cx2","cy2","_data5","_x","_y","_x2","_y2","_cx2","_cy2","_cx3","_cy3","r1","r2","largeArcFlag","sweepFlag","_x3","_y3","arcToCubicCurves","curve","rotate","angleRad","x2","y2","recursive","f1","f2","_recursive","_rotate","_rotate2","_rotate3","_rotate4","r1Pow","r2Pow","left","right","k","asin","toFixed","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","curves","_r","_r2","r3","randOffset","_offsetOpt","randOffsetWithRange","_offset","width","height","generateEllipseParams","ellipseWithParams","opset","_doubleLine","close","o1","_curveWithOffset","roughness","disableMultiStroke","randomizer","undefined","cloneOptionsAlterSeed","psq","stepCount","curveStepCount","increment","rx","ry","curveFitRandomness","curveFitting","ellipseParams","_computeEllipsePoints2","_computeEllipsePoints","_computeEllipsePoints3","ap1","cp1","_curve","_computeEllipsePoints4","estimatedPoints","stop","closed","roughClosure","strt","stp","ellipseInc","arcInc","_arc","op","solidFillPolygon","maxRandomnessOffset","patternFillPolygons","fillerName","fillStyle","getFiller","fillPolygons","patternFillArc","roughnessGain","filling","singleStroke","disableMultiStrokeFill","_line","move","overlay","lengthSq","halfOffset","divergePoint","midDispX","bowing","midDispY","randomHalf","randomFull","preserveVertices","ps","closePoint","b","curveTightness","cachedVertArray","overlap","corePoints","allPoints","radOffset","endAngle","_angle","_bezierTo","current","ros","iterations","clone","distanceSq","distanceToSegmentSq","w","l2","lerp","getPointsOnBezierCurveWithSplitting","tolerance","newPoints","outPoints","p3","p4","ux","uy","vx","vy","flatness","p0","distance","q1","q2","q3","red","simplify","simplifyPoints","epsilon","maxDistSq","maxNdx","distSq","pointsOnBezierCurves","numSegments","NOS","RoughGenerator","config","defaultOptions","stroke","options","_o","shape","sets","_d","paths","outline","fill","ellipseResponse","diameter","ret","fillOptions","bcurve","pointsIn","curveToBezier","polyPoints","replace","hasFill","hasStroke","simplified","simplification","path","normalized","currentPoints","pendingCurve","appendPendingCurve","_currentPoints","appendPendingPoints","lastPoint","_sets","simplifiedSet","pointsOnPath","first","_ret","pv","svgPath","drawing","fixedDecimals","item","trim","drawable","opsToPath","fillSketch","RoughSVG","svg","gen","getDefaultOptions","doc","ownerDocument","window","document","g","createElementNS","precision","fixedDecimalPlaceDigits","setAttribute","strokeLineDash","strokeLineDashOffset","appendChild","fillLineDash","fillLineDashOffset","get","draw","rectangle","circle","linearPath","arc","RoughCanvas","canvas","ctx","getContext","save","strokeStyle","lineWidth","setLineDash","lineDashOffset","_drawToContext","restore","fillRule","rule","beginPath","moveTo","bezierCurveTo","lineTo","u","r","keys","indexOf","displayName","render","ref","removeChild","Date","getTime","clearRect","renderer","forwardedRef","children","Provider","console","log","props","pixelRatio","margin","marginLeft","particles","marginTop","useRef","glRef","highlightRef","axisRef","circleColor","prevDate","defaultRef","useEffect","usePrevious","dateSelection","rScale","d3","domain","valueSelection","range","incomingData","prevOrCurrent","selectedValue","dodgedParticlesOrigin","dodge","dodgedParticlesDestination","tooltip","isBrowser","style","xAxisScale","xAxis","ticks","tickFormat","context","roughCanvas","scale","setTransform","globalAlpha","onscroll","event","pointHoverOut","attr","onmousemove","preventDefault","hoverActive","xSelection","ySelection","pageYoffset","pageYOffset","mousePoint","xi","heightCond","Delaunay","find","indexObj","tooltipX","tooltipY","tooltipLegibleValue","tooltipLegibleSelectedDate","tooltipLegibleDate","date","readableValue","readableDate","readableFullDate","html","showTooltip","animate","transition","gsap","duration","ease","onUpdate","lazy","stagger","each","update","className","id","useScrollData","top","diaryRawData","allDataCsv","node","items","useState","currentSelectedTime","setCurrentSelectedTime","devicePixelRatio","setPixelRatio","innerWidth","currentWidth","setCurrentWidth","innerHeight","currentHeight","setCurrentHeight","scrollOrder","stepRefs","element","createRef","React","onresize","formatDataFunct","scatterScrollingtextSwarm","date_selection","stepIndex","threshold","onStepEnter","stepdata","debug","selectedTime","opacity","class","title","selectedDateI","selectedValueI","xScaleI","rScaleI","paddingI","circles","formatted_date","head","tail","intersects","Infinity"],"sourceRoot":""}